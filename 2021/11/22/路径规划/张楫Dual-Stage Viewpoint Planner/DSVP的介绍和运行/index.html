<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="DSVP的介绍和运行"><meta name="keywords" content=""><meta name="author" content="Charon Cheung"><meta name="copyright" content="Charon Cheung"><title>DSVP的介绍和运行 | 沉默杀手</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">运行问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Detailed-Instructions"><span class="toc-number">2.</span> <span class="toc-text">Detailed Instructions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Simulation-Environments"><span class="toc-number">2.1.</span> <span class="toc-text">Simulation Environments</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Autonomous-Navigation-Modules"><span class="toc-number">3.</span> <span class="toc-text">Autonomous Navigation Modules</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Charon Cheung</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">470</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">5</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">43</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.loli.net/2021/07/13/RCLw5Bx8aFPN74b.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">沉默杀手</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">DSVP的介绍和运行</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-11-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/Dual-Stage-Viewpoint-Planner/">Dual-Stage Viewpoint Planner</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2021/11/22/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%BC%A0%E6%A5%ABDual-Stage%20Viewpoint%20Planner/DSVP%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E8%BF%90%E8%A1%8C/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2021/11/22/路径规划/张楫Dual-Stage Viewpoint Planner/DSVP的介绍和运行/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1.2k</span><span class="post-meta__separator">|</span><span>Reading time: 4 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>DSVP有几个上层规划算法，包括在未知环境中的探索算法和全局路径规划算法，以及全套算法的系统集成和扩展应用。</p>
<p>搭建的五种仿真环境，室内环境/校园/停车场/隧道以及森林。</p>
<ul>
<li><p>校园环境(340m x 340m): 根据卡内基梅隆大学的部分校园环境重建得到，包含一些上下坡以及盘绕的地形。</p>
</li>
<li><p>室内环境(130m x 100m): 包含长且窄的走廊以及许多桌子/椅子等障碍物，其中还有一个护栏，由于其中间可以穿透的特性，会对机器人的感知（perception）模块增加挑战性。</p>
</li>
<li><p>停车场(140m x 130m, 5层): 包含多层楼且有上下坡，会对机器人3D导航任务增加难度</p>
</li>
<li><p>隧道(330m x 250m): 错综复杂的隧道构成的一个庞大的网格结构</p>
</li>
<li><p>森林(150m x 150m): 包含无规律分布的树木以及几栋房子。</p>
</li>
</ul>
<p>我们提供的避障算法优势在于能实时高效地应对复杂环境,同时最大化到达目标点的概率。算法的主要思想在于尽可能地让计算在线下完成。具体来说，一个避障算法最耗时的计算一般在于检测机器人在未来时间点与环境发生碰撞的可能。我们的算法先通过离线生成一个庞大的轨迹库（trajectory library）来模拟机器人在未来一段时间内可能走过的轨迹。接下来对于所有轨迹覆盖的空间，我们计算其内部所有点（在一定解析度下）与所有轨迹发生碰撞的可能性。经过这样的离线计算，我们可以得到一个空间内3D点到轨迹的对应关系。在实时运行的过程中，一旦空间内的某个点上有障碍物，我们可以马上知道哪些轨迹将会受到影响。我们的算法会降低选择这些轨迹作为最终路径的可能性。因为大量的计算都在线下进行，线上运行的时候只需要实时选择无碰撞的轨迹，我们的算法可以在几毫秒之内规划出一条无碰撞而最接近目标点的路径。</p>
<p>平台是野外机器人平台，车上用了velodyne-16激光雷达，xsens mti-200 imu。速度只能达到2m/s。运行系统要求是18.04或者20.04</p>
<p>TARE系统有使用多线激光点云做地面分割，来判断哪些高度的地方可以去，哪些不能去，以应对有坡度、崎岖的地面。 系统里维护的是3d octomap</p>
<p>只是把点云数据register到了全局坐标系下，然后把局部的点云叠加起来先做地形分析再用地形图做避障和导航。</p>
<h2 id="运行问题"><a href="#运行问题" class="headerlink" title="运行问题"></a>运行问题</h2><p>在虚拟机下运行gazebo，得到<font color = orange size=4> vmw_ioctl_command error Invalid argument</font>错误<br>解决方法是在终端下设置环境变量为0：<code>export SVGA_VGPU10=0</code>， 再加入环境变量</p>
<p><br></p>
<p>打开gazebo报错 [Err] <font color = orange size=4> [REST.cc:205] Error in REST request</font> </p>
<p>执行<code>sudo gedit ~/.ignition/fuel/config.yaml</code>， 然后将<code>url : https://api.ignitionfuel.org</code> 改为 <code>url: https://api.ignitionrobotics.org</code></p>
<p><br><br><img src="https://i.loli.net/2021/11/22/tVlSzcPmNK7vWZu.png" alt="打开gazebo_ros出错.png"></p>
<p><code>roslaunch waypoint_example waypoint_example_garage.launch</code></p>
<p>Alternatively, users can run a ROS node to send a series of waypoints. The ROS node sends navigation boundary and speed as well. The vehicle will navigate inside the boundary while following the waypoints.</p>
<h2 id="Detailed-Instructions"><a href="#Detailed-Instructions" class="headerlink" title="Detailed Instructions"></a>Detailed Instructions</h2><h3 id="Simulation-Environments"><a href="#Simulation-Environments" class="headerlink" title="Simulation Environments"></a>Simulation Environments</h3><p>进入<code>src/vehicle_simulator/launch</code>，运行不同环境的launch<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch vehicle_simulator system_campus.launch</span><br></pre></td></tr></table></figure><br>还可以换成<code>system_indoor.launch</code>等等</p>
<p>使用<strong>Waypoint</strong> button in RVIZ 进行导航。为了在Gazebo观察, 设置launch文件中的<code>gazebo_gui = true</code> </p>
<p>环境文件在<code>src/vehicle_simulator/meshes</code>. <code>preview</code>文件夹中的<code>pointcloud.ply</code>是地图的点云文件，可使用 CloudCompare and MeshLab 打开。</p>
<h2 id="Autonomous-Navigation-Modules"><a href="#Autonomous-Navigation-Modules" class="headerlink" title="Autonomous Navigation Modules"></a>Autonomous Navigation Modules</h2><p>Sending waypoints, navigation boundary, and speed: Upon receiving waypoint, navigation boundary, and speed messages, the system will navigate the vehicle inside the navigation boundary to the waypoint. Sending navigation boundary and speed is optional. The default speed in the system is set to 2m/s. Users can take the code in the ‘waypoint_example’ package as an example of sending these messages.</p>
<p>Waypoint: ‘geometry_msgs::PointStamped’ typed messages on ROS topic ‘/way_point’, in ‘map’ frame.</p>
<p>Navigation boundary (optional): ‘geometry_msgs::PolygonStamped’ typed messages on ROS topic ‘/navigation_boundary’, in ‘map’ frame.</p>
<p>Speed (optional): ‘std_msgs::Float32’ typed messages on ROS topic ‘/speed’.</p>
<p>Collision avoidance: The collision avoidance is handled by the ‘local_planner’ package. The package computes collision-free paths to guide the vehicle through the environment. Motion primitives are pre-generated and loaded into the system upon start. When the vehicle navigates, the system in real-time determines the motion primitives occluded by obstacles. Those motion primitives are eliminated and the collision-free paths are selected. In the image below, the coordinate frame indicates the vehicle and the yellow dots are collision-free paths. In an autonomous navigation system, the collision avoidance module should be guided by a high-level planning module, e.g. a route planner that sends waypoints in the vicinity of the vehicle along the route. The collision avoidance module uses terrain maps from the ‘terrain_analysis’ package to determine terrain traversability (information below).</p>
</div></article><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/11/27/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/move_base%20%E5%88%86%E6%9E%90/move_base%E7%9A%84CPU%E5%8D%A0%E7%94%A8%E5%92%8C%E4%B8%A4%E4%B8%AA%E5%B8%B8%E8%A7%81%E6%8A%A5%E8%AD%A6/"><i class="fa fa-chevron-left">  </i><span>move_base的CPU占用和两个常见报警</span></a></div><div class="next-post pull-right"><a href="/2021/11/18/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%85%A8%E5%B1%80%E8%B7%AF%E5%BE%84/%E5%85%A8%E5%B1%80%E8%B7%AF%E5%BE%84%E6%97%A0%E6%B3%95%E8%B5%B0%E5%87%BA%E9%9A%9C%E7%A2%8D/"><span>全局路径无法走出障碍</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://charon-cheung.github.io/2021/11/22/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%BC%A0%E6%A5%ABDual-Stage%20Viewpoint%20Planner/DSVP%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E8%BF%90%E8%A1%8C/';
  this.page.identifier = '2021/11/22/路径规划/张楫Dual-Stage Viewpoint Planner/DSVP的介绍和运行/';
  this.page.title = 'DSVP的介绍和运行';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '沉默杀手' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://沉默杀手.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://i.loli.net/2021/07/13/RCLw5Bx8aFPN74b.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2021 By Charon Cheung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>