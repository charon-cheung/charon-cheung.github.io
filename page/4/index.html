<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-ROS/ROS Kinetic知识/我自定义的常用函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/26/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E6%88%91%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2021-04-26T08:58:52.000Z" itemprop="datePublished">2021-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/26/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E6%88%91%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/">我自定义的常用函数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="杀死指定的ROS节点"><a href="#杀死指定的ROS节点" class="headerlink" title="杀死指定的ROS节点"></a>杀死指定的ROS节点</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">killNode</span><span class="params">(std::string nodeName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">pid_t</span> status;</span><br><span class="line">  string cmd = <span class="string">&quot;rosnode kill &quot;</span>+nodeName;</span><br><span class="line">  status = <span class="built_in">system</span>(cmd.<span class="built_in">data</span>());</span><br><span class="line">  <span class="keyword">if</span> (<span class="number">-1</span> == status)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">// system func error</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">WIFEXITED</span>(status))    <span class="comment">//返回一个非零值, 正常退出</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">ROS_INFO</span>(<span class="string">&quot;child process exit done: %d&quot;</span>, <span class="built_in">WEXITSTATUS</span>(status) );</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">WEXITSTATUS</span>(status);   <span class="comment">// rosnode kill done, exit status value</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">ROS_WARN</span>(<span class="string">&quot;child process exit abnormally&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获得Linux命令的结果"><a href="#获得Linux命令的结果" class="headerlink" title="获得Linux命令的结果"></a>获得Linux命令的结果</h2><p>比如输入<code>ls</code>，返回当前目录的文件名</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">getCmdResult</span><span class="params">(<span class="keyword">const</span> string &amp;strCmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">10240</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	FILE *pf = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">if</span>( (pf = <span class="built_in">popen</span>(strCmd.<span class="built_in">c_str</span>(), <span class="string">&quot;r&quot;</span>)) == <span class="literal">NULL</span> )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	string strResult;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">fgets</span>(buf, <span class="keyword">sizeof</span> buf, pf))</span><br><span class="line">	&#123;</span><br><span class="line">		strResult += buf;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">pclose</span>(pf);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> iSize =  strResult.<span class="built_in">size</span>();</span><br><span class="line">	<span class="keyword">if</span>(iSize &gt; <span class="number">0</span> &amp;&amp; strResult[iSize - <span class="number">1</span>] == <span class="string">&#x27;\n&#x27;</span>)  <span class="comment">// linux</span></span><br><span class="line">	&#123;</span><br><span class="line">		strResult = strResult.<span class="built_in">substr</span>(<span class="number">0</span>, iSize - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> strResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ros-Time-转为年月日的string"><a href="#ros-Time-转为年月日的string" class="headerlink" title="ros::Time 转为年月日的string"></a>ros::Time 转为年月日的string</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">stampToString</span><span class="params">(<span class="keyword">const</span> ros::Time&amp; stamp, <span class="keyword">const</span> std::string format=<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> output_size = <span class="number">100</span>;</span><br><span class="line">	<span class="keyword">char</span> output[output_size];</span><br><span class="line">	std::<span class="keyword">time_t</span> raw_time = <span class="keyword">static_cast</span>&lt;<span class="keyword">time_t</span>&gt;(stamp.sec);</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">tm</span>* <span class="title">timeinfo</span> =</span> <span class="built_in">localtime</span>(&amp;raw_time);</span><br><span class="line">	std::<span class="built_in">strftime</span>(output, output_size, format.<span class="built_in">c_str</span>(), timeinfo);</span><br><span class="line">	std::stringstream ss; </span><br><span class="line">	ss &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">9</span>) &lt;&lt; std::<span class="built_in">setfill</span>(<span class="string">&#x27;0&#x27;</span>) &lt;&lt; stamp.nsec;  </span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">size_t</span> fractional_second_digits = <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">return</span> std::<span class="built_in">string</span>(output) + <span class="string">&quot;.&quot;</span> + ss.<span class="built_in">str</span>().<span class="built_in">substr</span>(<span class="number">0</span>, fractional_second_digits);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/26/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E6%88%91%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/" data-id="ckr28oqz100chewlmhsug6qls" data-title="我自定义的常用函数" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-激光SLAM/反光板/反光板定位 (四) 定位流程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/25/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E5%9B%9B)%20%E5%AE%9A%E4%BD%8D%E6%B5%81%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2021-04-25T09:39:32.000Z" itemprop="datePublished">2021-04-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a>►<a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/">反光板</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/25/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E5%9B%9B)%20%E5%AE%9A%E4%BD%8D%E6%B5%81%E7%A8%8B/">反光板定位 (四) 定位流程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>定位模式下，先在构造函数里加载特征地图，若地图里不足3个坐标点则退出，然后计算和保存三角形地图。</p>
<p>进入回调函数后，先判断是否一直接收到调度发来的话题<code>reflector_start</code>的true消息，若有，再向下执行。只要调度一停止发布，定位也会停止。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(ros::this_node::<span class="built_in">getName</span>()==<span class="string">&quot;/reflector_locate&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 接收到话题 reflector_start 后才启动定位和建图</span></span><br><span class="line">    boost::shared_ptr&lt;std_msgs::Bool <span class="keyword">const</span>&gt; isStart;</span><br><span class="line">    isStart = ros::topic::waitForMessage&lt;std_msgs::Bool&gt;(<span class="string">&quot;reflector_start&quot;</span>,ros::<span class="built_in">Duration</span>(<span class="number">0.3</span>) );</span><br><span class="line">    <span class="keyword">if</span>(isStart != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(isStart-&gt;data == <span class="literal">false</span>)	<span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>经过对点云高强度数据处理后，发布反光板的局部位姿，如果检测不到3个以上则return. 然后进行三角形匹配和三边定位，最后发布机器人的位姿话题<code>reflector_robot_pose</code></p>
<br>

<p><code>reflector_robot_pose</code>的发布频率只有1Hz左右，追根溯源，它其实是在话题<code>scan_rectified</code>的回调函数里发布的。 callback里发布新话题时，尽量少使用循环，否则话题的频率会比较低</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/25/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E5%9B%9B)%20%E5%AE%9A%E4%BD%8D%E6%B5%81%E7%A8%8B/" data-id="ckr28or1300h4ewlm81u538y9" data-title="反光板定位 (四) 定位流程" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/ROS Kinetic知识/rosdep 命令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/24/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosdep%20%E5%91%BD%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2021-04-24T10:02:02.000Z" itemprop="datePublished">2021-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/24/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosdep%20%E5%91%BD%E4%BB%A4/">rosdep 命令</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>编译ROS时，有时会报错缺某个包，常常是 <code>could not find *Config.cmake 或者 *-config.cmake</code>，我以前一般的解决方法是：<code>sudo apt-get install ros-kinetic-package_name</code>，其实用rosdep更方便。</p>
<p>安装ROS时，会有一个命令 <code>sudo apt-get install python-rosdep</code>，在安装完成后，还会执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rosdep init</span><br><span class="line">rosdep update</span><br></pre></td></tr></table></figure>

<p>在<code>src</code>目录下运行<code>rosdep check --from-path package_name</code>，可以查找到所有依赖包。 安装所有依赖包的命令： <code>rosdep install --from-path package_name</code></p>
<p><code>rosdep check --from-path src --ignore-src -r -y</code>对整个工作空间<strong>检查依赖</strong></p>
<p>最强大的就是<code>rosdep install --from-path src --ignore-src -r -y</code>，在工作空间路径执行，它magically安装了所有 package缺失的依赖项。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/24/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosdep%20%E5%91%BD%E4%BB%A4/" data-id="ckr28oqym00bkewlmegw23zni" data-title="rosdep 命令" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C++/C++  模板与STL/string容器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/20/C++/C++%20%20%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/string%E5%AE%B9%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2021-04-20T13:53:11.000Z" itemprop="datePublished">2021-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C/">C++</a>►<a class="article-category-link" href="/categories/C/C-%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/">C++ 模板与STL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/20/C++/C++%20%20%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/string%E5%AE%B9%E5%99%A8/">string容器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="find-函数"><a href="#find-函数" class="headerlink" title="find 函数"></a>find 函数</h2><p><code>find()</code>返回值是字母在母串中的位置（下标记录），如果没有找到，那么会返回一个特别的标记<code>npos</code>，是一个很大的数。返回值可以看成是一个int型的数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">s</span><span class="params">(<span class="string">&quot;12345&quot;</span>)</span></span>;</span><br><span class="line">string::size_type  position;</span><br><span class="line"><span class="comment">// 返回34 在 s 中的下标位置</span></span><br><span class="line">position = s.<span class="built_in">find</span>(<span class="string">&quot;34&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (position != s.npos)  <span class="comment">//如果没找到，返回一个特别的标志c++中用npos表示，我这里npos取值是4294967295，</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;position is : %d\n&quot;</span> ,position);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Not found the flag\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/20/C++/C++%20%20%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/string%E5%AE%B9%E5%99%A8/" data-id="ckr28oqxc008kewlmgmiqgeds" data-title="string容器" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-激光SLAM/雷达/雷达数据运动畸变" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/12/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/%E9%9B%B7%E8%BE%BE%E6%95%B0%E6%8D%AE%E8%BF%90%E5%8A%A8%E7%95%B8%E5%8F%98/" class="article-date">
  <time class="dt-published" datetime="2021-04-12T14:09:33.000Z" itemprop="datePublished">2021-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a>►<a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/">雷达</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/12/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/%E9%9B%B7%E8%BE%BE%E6%95%B0%E6%8D%AE%E8%BF%90%E5%8A%A8%E7%95%B8%E5%8F%98/">雷达数据的运动畸变</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在移动机器人的运动过程中，当激光雷达扫描频率较低时，获得的原始扫描数据会发生畸变，并且随着速度的增加变得越来越严重。雷达旋转有顺时针与逆时针2种情况，但导致运动畸变的效果差异并不明显。</p>
<ol>
<li>激光点数据不是瞬时获得的，雷达扫描时在旋转，有个扫描频率的问题</li>
<li>雷达扫描中，机器人也是运动的。 机器人旋转造成的运动畸变比直线运动大。</li>
</ol>
<p>比如所用激光雷达的扫描频率为10Hz，当移动机器人以角速度为1 rad/s 进行纯旋转时，在激光雷达扫描一圈得到<br>一帧数据的时间内（0.1s）移动机器人已经旋转了0.1 rad，约为5.7度，这会影响机器人的定位和路径规划。</p>
<p>由于我以前的机器人是低速机器人，最大线速度才<code>0.4m/s</code>，而雷达的扫描频率至少<code>25Hz</code>，所以雷达不必考虑畸变，实际使用时，从rviz上看，也没发现运动畸变。雷达扫描频率最好达到30Hz以上。但是我现在使用的机器人速度最快<code>1.4m/s</code>，雷达频率才10Hz，这就需要考虑运动畸变了。</p>
<p>使用里程计辅助的方法去除运动畸变。里程计的频率一般比较高，<code>move_base</code>里面默认订阅里程计的频率是20Hz，所以里程计至少也得20Hz，我所用的里程计是50Hz。</p>
<p>参考：<br><a target="_blank" rel="noopener" href="https://imuncle.github.io/content.html?id=103">基于里程计修复激光雷达数据</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wenhust/p/8735390.html">激光雷达移动状态下的数据矫正</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/tiancailx/article/details/110141867">激光雷达数据效果对比</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/12/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/%E9%9B%B7%E8%BE%BE%E6%95%B0%E6%8D%AE%E8%BF%90%E5%8A%A8%E7%95%B8%E5%8F%98/" data-id="ckr28or1700hgewlmdt8ahfms" data-title="雷达数据的运动畸变" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-数学基础/马氏距离" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/06/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB/" class="article-date">
  <time class="dt-published" datetime="2021-04-06T13:30:51.000Z" itemprop="datePublished">2021-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/">数学基础</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/06/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB/">马氏距离</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>马氏距离表示数据的协方差距离。它是一种有效的计算两个未知样本集的相似度的方法。与欧氏距离不同的是它考虑到各种特性之间的联系（例如：一条关于身高的信息会带来一条关于体重的信息，因为两者是有关联的）并且是尺度无关的（scale-invariant），即独立于测量尺度。<br><img src="https://i.loli.net/2021/04/02/HbFdaWTk4ISgBo7.png"><br><img src="https://i.loli.net/2021/04/02/QOdvGcClZmb3XVk.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/06/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB/" data-id="ckr28oqvl004bewlm6i8i0nig" data-title="马氏距离" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-激光SLAM/反光板/反光板定位 (五) 测试和分析 " class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/30/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%BA%94)%20%E6%B5%8B%E8%AF%95%E5%92%8C%E5%88%86%E6%9E%90%20/" class="article-date">
  <time class="dt-published" datetime="2021-03-30T12:49:58.000Z" itemprop="datePublished">2021-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a>►<a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/">反光板</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/30/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%BA%94)%20%E6%B5%8B%E8%AF%95%E5%92%8C%E5%88%86%E6%9E%90%20/">反光板定位 (五) 测试和分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="雷达扫描圆柱的结果不像圆弧"><a href="#雷达扫描圆柱的结果不像圆弧" class="headerlink" title="雷达扫描圆柱的结果不像圆弧"></a>雷达扫描圆柱的结果不像圆弧</h3><p>与厂家沟通后才发现，所用的反光柱的反射强度太强了，反而造成了点云质量差，使用<code>3M 3930</code>反光膜的结果会好很多。另外，直射反光板时，强度数据比较好；但成一定角度时，常常数据不好</p>
<h3 id="最小二乘找圆心的不收敛"><a href="#最小二乘找圆心的不收敛" class="headerlink" title="最小二乘找圆心的不收敛"></a>最小二乘找圆心的不收敛</h3><p>反光板截面不是理想圆弧，而我在最小二乘法里是按照圆处理的。从rviz里看，强度数据也不是圆弧形状，常常是锯齿形，甚至近乎直线。这样当然不收敛了，即使出现了收敛的情况，获得的圆心的坐标肯定也不精确。即使机器人在静止时，反光板的局部位姿也很不稳定。<br><img src="https://i.loli.net/2021/04/25/QIoUtVgmWGbHBen.gif" alt="个别反光板的位姿不稳定.gif"><br>多次测试后，还是决定<strong>使用反光板和几何平均法</strong>，根据极坐标，所有的range求均值，所有的theta也求均值，进而获得圆心的x y坐标。这样有时雷达不能扫描到完整的反光板，存在系统误差，但是定位精度要求不高，仍可以使用。</p>
<p><img src="https://i.loli.net/2021/04/27/qZx9FSmDWJV4zdU.png" alt="示意图.png"></p>
<h3 id="建图时的全局位姿不稳定，增加不存在的位姿"><a href="#建图时的全局位姿不稳定，增加不存在的位姿" class="headerlink" title="建图时的全局位姿不稳定，增加不存在的位姿"></a>建图时的全局位姿不稳定，增加不存在的位姿</h3><p><img src="https://i.loli.net/2021/04/25/71klRd4XAosiE6U.gif" alt="建图模式，错误全局位姿增加.gif"><br>建图和定位模式时，出于实现动态定位的考虑，局部位姿在机器人移动时是不断更新的。但机器人只有在静止3秒后，才通过<code>laser_link</code>和<code>map</code>坐标系的转换，计算出全局位姿。如果是先记录了局部位姿，又移动了机器人，此时的laser_link和map的转换已经改变了，所以计算的全局位姿是错误的。</p>
<p>修改:  在建图模式时，局部位姿在机器人静止时才获得，全局位姿的发布也如此</p>
<h3 id="激光雷达数据畸变"><a href="#激光雷达数据畸变" class="headerlink" title="激光雷达数据畸变"></a>激光雷达数据畸变</h3><p><img src="https://i.loli.net/2021/04/24/Byow1YdcjQ8MElb.png"><br>如图，扫描结果上方和左方都是墙，应该是水平和竖直的，但是偏转了</p>
<p>解决参考 <a target="_blank" rel="noopener" href="https://charon-cheung.github.io/2019/12/12/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/%E9%9B%B7%E8%BE%BE%E6%95%B0%E6%8D%AE%E8%BF%90%E5%8A%A8%E7%95%B8%E5%8F%98/">雷达数据的运动畸变</a></p>
<h3 id="反光板获得的y坐标总和AMCL的y差十几厘米"><a href="#反光板获得的y坐标总和AMCL的y差十几厘米" class="headerlink" title="反光板获得的y坐标总和AMCL的y差十几厘米"></a>反光板获得的y坐标总和AMCL的y差十几厘米</h3><p>之前通过三边定位获得的位姿其实是雷达的全局位姿，不是机器人的。还需要经过 <code>base_link ---&gt; laser</code>的转换获取机器人的全局位姿，这里需要使用Censi提出的公式了</p>
<h2 id="位姿误差来源"><a href="#位姿误差来源" class="headerlink" title="位姿误差来源"></a>位姿误差来源</h2><ol>
<li>计算的map位姿和地图文件中的位姿有一定差距，把x y 匹配的坐标阈值设置为0.2，这就很大了</li>
<li>雷达的射程不到4米，直射反光板时，强度数据比较好；但成一定角度时，常常数据不好，获取不到位姿</li>
<li>换反光板后，雷达有时只扫描到部分</li>
<li>激光雷达数据畸变，需要标定</li>
</ol>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>将话题<code>reflector_robot_pose</code>和来自AMCL的话题<code>robot_pose</code>的消息对比，发现x y坐标相差不超过4cm，静态定位的差值一般是毫米级。朝向yaw相差不超过4°<br><img src="https://i.loli.net/2021/05/29/rdTIkzoON6gfK7J.png" alt="反光板误差程序.png"><br>地图和定位数据较准确时，就不会出现三角形多个匹配的情况</p>
<h2 id="未来改进"><a href="#未来改进" class="headerlink" title="未来改进"></a>未来改进</h2><ul>
<li>使用倍加福R2000或其他专业的反光板雷达</li>
<li>使用3M 3930反光材料，圆柱形</li>
<li>三角形匹配法的优化，减少因阈值而出现的多个匹配，处理因等腰三角形而无法匹配的情况</li>
<li>全局定位的精度不错，但<code>reflector_robot_pose</code>的发布频率低，导致位姿数据方差较大</li>
<li>为了得到较高的定位精度和鲁棒性， 并结合移动机器人系统的非线性情况， 考虑使用EKF将里程计和全局定位进行融合</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/30/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%BA%94)%20%E6%B5%8B%E8%AF%95%E5%92%8C%E5%88%86%E6%9E%90%20/" data-id="ckr28or1300h2ewlm025ccsbk" data-title="反光板定位 (五) 测试和分析" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmake qmake/使用 CMake 解决编译出来的so文件过大的问题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/29/cmake%20qmake/%E4%BD%BF%E7%94%A8%20CMake%20%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%87%BA%E6%9D%A5%E7%9A%84so%E6%96%87%E4%BB%B6%E8%BF%87%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2021-03-29T12:03:13.000Z" itemprop="datePublished">2021-03-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cmake-qmake/">cmake/qmake</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/29/cmake%20qmake/%E4%BD%BF%E7%94%A8%20CMake%20%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%87%BA%E6%9D%A5%E7%9A%84so%E6%96%87%E4%BB%B6%E8%BF%87%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98/">使用 CMake 解决编译出来的so文件过大的问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>编译选项使用<code>-Os</code>，表示以最小化大小为优化方向，假如链接失败，则修改为-O2</li>
</ol>
<p>在 CMakeLists.txt 文件中加入以下两行：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>(CMAKE_C_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_C_FLAGS_RELEASE&#125;</span> -s&quot;</span>)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS_RELEASE&#125;</span> -s -O4 -Wall&quot;</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>去除<code>-g</code>选项，进而去除调试信息</p>
</li>
<li><p>通过strip裁剪符号及调试信息</p>
</li>
<li><p>只导出必要符号</p>
</li>
</ol>
<p>Linux默认导出所有符号，并不仅仅导出你开放的接口。</p>
<p>定义如下宏：</p>
<p><code>#define SYMBOL_EXPORT __attribute__ ((visibility(&quot;default&quot;)))</code></p>
<p>在你想导出的符号前加上SYMBOL_EXPORT就好。</p>
<p>同时，需要在脚本中增加如下编译选项： <code>-fvisibility = hidden</code></p>
<p>譬如：导出符号是<code>int add(int a, int b);</code> 那么添加的结果就是<code>SYMBOL_EXPORT int add(int a, int b);</code></p>
<p>通过这种方式只导出想导出的符号，也可以减小库大小。</p>
<p><code>default</code>: 用它定义的符号将被导出，动态库中的函数默认是可见的。</p>
<p><code>hidden</code>: 用它定义的符号将不被导出，并且不能从其它对象进行使用，动态库中的函数是被隐藏的。</p>
<p>default意味着该方法对其它模块是可见的。而hidden表示该方法符号不会被放到动态符号表里，所以其它模块(可执行文件或者动态库)不可以通过符号表访问该方法。<strong>这个选项可能导致编译失败，出现undef reference</strong></p>
<p>还有一个选项 <code>-fvisibility = inlines-hidden</code></p>
<ul>
<li><p>控制C++特性的使用，如无必要，则不使用C++的高级特性。</p>
</li>
<li><p>屏蔽RTTI特性，增加编译选项-fno-rtti。</p>
</li>
<li><p>对性能影响不大时，避免使用C++的inline特性，也就是增加编译选项 <code>-fno-inline</code></p>
</li>
<li><p>在不影响使用时，控制对STL的组件的使用。尤其iostream的相关模板类。</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭C++特性set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -fno-inline&quot;)</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -fno-exceptions&quot;</span>)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS&#125;</span> -fno-rtti&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(CMAKE_C_FLAGS_RELEASE     <span class="string">&quot;<span class="variable">$&#123;CMAKE_C_FLAGS_RELEASE&#125;</span>   -fvisibility = inlines-hidden&quot;</span>)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS_RELEASE   <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS_RELEASE&#125;</span> -fvisibility = inlines-hidden&quot;</span>)</span><br><span class="line"><span class="comment"># 删除调试符号</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_C_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_C_FLAGS_RELEASE&#125;</span> -s&quot;</span>)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS_RELEASE&#125;</span> -s&quot;</span>)</span><br><span class="line"><span class="comment"># 开启空间优化</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_C_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_C_FLAGS_RELEASE&#125;</span> -Os&quot;</span>)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;<span class="variable">$&#123;CMAKE_CXX_FLAGS_RELEASE&#125;</span> -Os&quot;</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/29/cmake%20qmake/%E4%BD%BF%E7%94%A8%20CMake%20%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%87%BA%E6%9D%A5%E7%9A%84so%E6%96%87%E4%BB%B6%E8%BF%87%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98/" data-id="ckr28oqut002hewlm82rofc9h" data-title="使用 CMake 解决编译出来的so文件过大的问题" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95/" rel="tag">编译调试</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-激光SLAM/反光板/反光板定位 (三) 定位的原理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/27/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%B8%89)%20%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%8E%9F%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-03-27T12:58:01.000Z" itemprop="datePublished">2021-03-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a>►<a class="article-category-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/">反光板</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/27/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%B8%89)%20%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%8E%9F%E7%90%86/">反光板定位 (三) 定位的原理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>定位比建图就难多了，需要进行三角形匹配以获知当前检测到的是哪几个反光板，与此相对，二维码的ID识别由图像识别算法完成。</p>
<ul>
<li>必须保证雷达能一直扫描到3个或以上的反光板</li>
<li>反光板的布置尽量不要出现等腰三角形，会影响匹配</li>
<li>反光板不要布置重叠，不能让雷达扫描到一个反光板有一部分遮挡另一个反光板</li>
</ul>
<h2 id="三角形匹配法"><a href="#三角形匹配法" class="headerlink" title="三角形匹配法"></a>三角形匹配法</h2><p>以扫描到的反光板圆心为顶点构建三角形，然后以三角形边长为准则和反光板地图中的三角形进行匹配，匹配成功后即可建立扫描到的反光板和地图中的反光板的对应关系. 地图很大的时候，需要用很多的反光板，此时的<br>三角形匹配需要考虑耗时问题。因此在反光板地图和检测的反光板三角形中，以三角形边长进行降序行排列，这会有利于三角形匹配算法的加速。</p>
<p>首先需要根据之前的反光板地图得到三角形地图，取三个组成三角形，按边长从大到小的顺序，然后是三个id，id不分顺序。 比如三角形地图的一部分是这样的:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">4.24766 2.79992 2.18164   1 2 3 </span><br><span class="line">4.24766 3.1294 1.88096    1 3 4 </span><br><span class="line">4.24766 2.63656 2.09148   1 3 5 </span><br><span class="line">3.1294 2.63656 2.34001    3 4 5 </span><br><span class="line">3.1294 2.18164 1.099      2 3 4 </span><br><span class="line">2.79992 1.88096 1.099     1 2 4 </span><br><span class="line">2.79992 2.41088 2.09148   1 2 5 </span><br></pre></td></tr></table></figure>
<p>假设当前得到的反光板的三角形边长为<code>4.3 2.65 2.1</code>。先用第一个边长跟地图的每一项比较，而不必跟所有边长比较，这样就加速了。这个例子中，如果设置的边长阈值过大，会得到<code>1 2 3</code>和<code>1 3 5</code>两个匹配结果，所以阈值尽量小一些。</p>
<p>如果地图文件或检测的反光板出现等腰三角形，会无法区分等腰的两个顶点，这是算法的另一个缺陷。</p>
<p>如果不能够唯一匹配，则不使用此帧激光雷达数据，不计算移动机器人的位姿，需要让机器人移动。</p>
<p><img src="https://i.loli.net/2021/04/27/eF5QJyai36ZLXjG.png" alt="三角形匹配的流程图"></p>
<h2 id="三边定位算法-求机器人的位姿"><a href="#三边定位算法-求机器人的位姿" class="headerlink" title="三边定位算法 求机器人的位姿"></a>三边定位算法 求机器人的位姿</h2><p><img src="https://i.loli.net/2021/04/26/JM8kQpFDlbcCP2o.png"><br><img src="https://i.loli.net/2021/04/26/gDXzByTMdA1VfYW.png" alt="示意图"><br><img src="https://i.loli.net/2021/06/22/XlAQUcyP9gW67wp.jpg" alt="求雷达的全局位姿.jpg"><br>从这里的矩阵方程就能看出，定位时检测到的反光板至少有3个，否则方程组无法求解。如果只有三个反光板，直接求方程组；如果超过三个反光板，用最小二乘按超定方程组求解。实际中即使超过了三个，我在程序里也只取三个。<br><img src="https://i.loli.net/2021/04/26/JSHqlo86U3ne4zV.png"><br><img src="https://i.loli.net/2021/04/26/l4FiLN3HWKIAfky.png"></p>
<br>

<p>上面求出的是雷达在map坐标系的坐标，还要利用Censi提出的公式转换，如下图所示<br><img src="https://i.loli.net/2021/04/26/tCkGSjz47wABEVv.jpg" alt="最终求机器人位姿.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/27/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/%E5%8F%8D%E5%85%89%E6%9D%BF%E5%AE%9A%E4%BD%8D%20(%E4%B8%89)%20%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%8E%9F%E7%90%86/" data-id="ckr28or1100gzewlm99vfdicl" data-title="反光板定位 (三) 定位的原理" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/ROS Kinetic知识/常用的tf程序" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/27/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B8%B8%E7%94%A8%E7%9A%84tf%E7%A8%8B%E5%BA%8F/" class="article-date">
  <time class="dt-published" datetime="2021-03-27T12:30:14.000Z" itemprop="datePublished">2021-03-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/27/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B8%B8%E7%94%A8%E7%9A%84tf%E7%A8%8B%E5%BA%8F/">常用的tf程序</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="使用程序实现父子坐标系的转换"><a href="#使用程序实现父子坐标系的转换" class="headerlink" title="使用程序实现父子坐标系的转换"></a>使用程序实现父子坐标系的转换</h2><p>除了直接用<code>static_transform_publisher</code>外，当然可以在程序中实现两个坐标系的转换，以经典的<strong>乌龟追乌龟程序</strong>为参考，它的tf树是这样的<br><img src="https://farm8.staticflickr.com/7873/46554821814_6f87bb5c43_z.jpg"><br>现在我们写一个这样的程序：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/transform_broadcaster.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/tf.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/transform_listener.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;turtlesim/Pose.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">poseCallback</span><span class="params">(<span class="keyword">const</span> turtlesim::PosePtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> tf::TransformBroadcaster br;</span><br><span class="line">  tf::Transform transform;</span><br><span class="line">  transform.<span class="built_in">setOrigin</span>( tf::<span class="built_in">Vector3</span>(<span class="number">0</span>,<span class="number">0</span>, <span class="number">-0.24</span>) );  <span class="comment">//子坐标系相对父坐标系的位移</span></span><br><span class="line">  <span class="comment">//子坐标系相对父坐标系的旋转，可以用欧拉角和四元数两种形式</span></span><br><span class="line">  tf::Quaternion q;</span><br><span class="line">  q.<span class="built_in">setRPY</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">//tf::Quaternion q(qx,qy,qz,qw);</span></span><br><span class="line">  transform.<span class="built_in">setRotation</span>(q);</span><br><span class="line">  br.<span class="built_in">sendTransform</span>(tf::<span class="built_in">StampedTransform</span>(transform, ros::Time::<span class="built_in">now</span>(), <span class="string">&quot;turtle1&quot;</span>, <span class="string">&quot;robot_base&quot;</span>));   <span class="comment">//父坐标系在前，子坐标系在后</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;camera_base_tf&quot;</span>);</span><br><span class="line">    ros::NodeHandle node;</span><br><span class="line">    ros::Subscriber sub = node.<span class="built_in">subscribe</span>(<span class="string">&quot;/turtle1/pose&quot;</span>, <span class="number">10</span>, &amp;poseCallback);</span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们订阅乌龟1的位姿话题<code>/turtle1/pose</code>，在回调函数里定义tf广播和变换的参数，最后发送。这里只能用回调函数的形式，因为在main函数里只能发一次，无法建立父子坐标系的关系。<code>tf::broadcaster</code>类的<code>sendTransform</code>函数中，把父子坐标系交换，只会交换tf树中的位置，坐标关系还是原来的，所以必须使用<code>Transform::inverse ()</code>函数．</p>
<h2 id="使用程序获得坐标系在另一坐标系中的坐标"><a href="#使用程序获得坐标系在另一坐标系中的坐标" class="headerlink" title="使用程序获得坐标系在另一坐标系中的坐标"></a>使用程序获得坐标系在另一坐标系中的坐标</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/tf.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tf/transform_listener.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;turtle_2_1&quot;</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line">  tf::TransformListener listener;</span><br><span class="line">  <span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">  <span class="keyword">while</span>(n.<span class="built_in">ok</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    tf::StampedTransform transform;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      listener.<span class="built_in">waitForTransform</span>(<span class="string">&quot;turtle1&quot;</span>,<span class="string">&quot;turtle2&quot;</span>,ros::<span class="built_in">Time</span>(<span class="number">0</span>),ros::<span class="built_in">Duration</span>(<span class="number">3</span>));</span><br><span class="line">      listener.<span class="built_in">lookupTransform</span>(<span class="string">&quot;turtle1&quot;</span>,<span class="string">&quot;turtle2&quot;</span>,ros::<span class="built_in">Time</span>(<span class="number">0</span>),transform);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in"><span class="keyword">catch</span></span>(tf::TransformException &amp;ex)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;%s&quot;</span>,ex.<span class="built_in">what</span>());</span><br><span class="line">      ros::<span class="built_in">Duration</span>(<span class="number">1</span>).<span class="built_in">sleep</span>();</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;x: %f&quot;</span>, transform.<span class="built_in">getOrigin</span>().<span class="built_in">x</span>());</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;y: %f&quot;</span>, transform.<span class="built_in">getOrigin</span>().<span class="built_in">y</span>());</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;z: %f\n&quot;</span>, transform.<span class="built_in">getOrigin</span>().<span class="built_in">z</span>());</span><br><span class="line">    rate.<span class="built_in">sleep</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个程序获得的是乌龟2在乌龟1坐标系中的坐标</p>
<p>先运行<code>roslaunch turtle_tf turtle_tf_demo.launch</code>，这是ROS自带的一个tf演示程序，然后马上运行上面的程序。我们会看到乌龟1不动，乌龟2向前者移动，如果运行程序太慢，乌龟2就停止了，二者没有相对运动就捕捉不到<code>tf</code>话题上的消息了</p>
<p><img src="https://farm8.staticflickr.com/7878/40313472703_c6aeb596ff_m.jpg"><br>同时我们的程序会输出下面内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[ INFO] [1551530137.681192434]: x: -1.394780</span><br><span class="line">[ INFO] [1551530137.681317271]: y: -3.510608</span><br><span class="line">[ INFO] [1551530137.681352733]: z: 0.000000</span><br><span class="line"></span><br><span class="line">[ INFO] [1551530137.781891361]: x: -1.221200</span><br><span class="line">[ INFO] [1551530137.781970030]: y: -3.391552</span><br><span class="line">[ INFO] [1551530137.782007398]: z: 0.000000</span><br><span class="line"></span><br><span class="line">[ INFO] [1551530137.982427762]: x: -1.018356</span><br><span class="line">[ INFO] [1551530137.982512261]: y: -3.122349</span><br><span class="line">[ INFO] [1551530137.982559203]: z: 0.000000</span><br><span class="line">......	//忽略</span><br></pre></td></tr></table></figure>
<p>显然从图中能看出乌龟2在乌龟1的坐标系中初始坐标x,y肯定都是负值。随着运动，xy的绝对值越来越小，最终两个乌龟重合，xy都成为0。</p>
<h3 id="程序分析"><a href="#程序分析" class="headerlink" title="程序分析"></a>程序分析</h3><p><code>waitForTransform</code>函数的原型有两个，我们用的这个是:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Transformer::waitForTransform</span></span></span><br><span class="line"><span class="function"><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> std::string &amp; 	target_frame,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> std::string &amp; 	source_frame,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> ros::Time &amp; 		time,	<span class="comment">//The time at which to transform</span></span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> ros::Duration &amp; 	timeout,  <span class="comment">//How long to block before failing</span></span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> ros::Duration &amp; 	polling_sleep_duration = ros::Duration(<span class="number">0.01</span>),</span></span></span><br><span class="line"><span class="params"><span class="function">	std::string * 			error_msg = <span class="literal">NULL</span> </span></span></span><br><span class="line"><span class="params"><span class="function">)</span><span class="keyword">const</span></span></span><br></pre></td></tr></table></figure>
<p>功能：函数阻塞直到能进行坐标系转换或者时间timeout截止，返回值表示是否成功。函数不会throw，如果给error_msg传变量，它会在函数出错时记录错误信息。</p>
<p>一般用前四个参数就行了，如果开始没有坐标系转换，会报错<font color = red>  <font size= 3> “turtle1” passed to lookupTransform argument target_frame does not exist </font> </font> 。如果又有了转换，程序可以正常运行。因为网络问题，如果<code>timeout</code>为0，那会直接报错失败，如果设置太小，也可能捕捉不到转换。使用<code>tf_echo</code>就会发现它要等一点时间才会输出结果，这是一样的道理。</p>
<p><code>lookupTransform</code>函数的原型也有两个，我们用的是:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Transformer::lookupTransform</span></span></span><br><span class="line"><span class="function"><span class="params">(	</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> std::string &amp; 	target_frame,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> std::string &amp; 	source_frame,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="keyword">const</span> ros::Time &amp; 	time,  <span class="comment">//某时间的变换，0表示最近的变换</span></span></span></span><br><span class="line"><span class="params"><span class="function">	StampedTransform &amp; 	transform </span></span></span><br><span class="line"><span class="params"><span class="function">)</span><span class="keyword">const</span></span></span><br></pre></td></tr></table></figure>
<p>功能：获得两坐标系之间的转换，也就是赋值给<code>tf::StampedTransform</code>对象</p>
<p>还有函数<code>canTransform()</code>，这个函数纯粹就是判断用的，也能记录错误信息，但不能指定阻塞时间。</p>
<h2 id="技巧-1"><a href="#技巧-1" class="headerlink" title="技巧 1"></a>技巧 1</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">std::string tf_error;</span><br><span class="line"><span class="comment">// make sure that the transform between base_link and the global frame is available</span></span><br><span class="line"><span class="keyword">while</span> (ros::<span class="built_in">ok</span>()</span><br><span class="line">    &amp;&amp; !tf_.<span class="built_in">waitForTransform</span>(global_frame_, <span class="string">&quot;base_link&quot;</span>, ros::<span class="built_in">Time</span>(), ros::<span class="built_in">Duration</span>(<span class="number">0.1</span>), ros::<span class="built_in">Duration</span>(<span class="number">0.01</span>), &amp;tf_error))</span><br><span class="line">&#123;</span><br><span class="line">  ros::<span class="built_in">spinOnce</span>();</span><br><span class="line">  <span class="keyword">if</span> (last_error + ros::<span class="built_in">Duration</span>(<span class="number">5.0</span>) &lt; ros::Time::<span class="built_in">now</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">ROS_WARN</span>(<span class="string">&quot;Timed out waiting for transform from %s to %s to become available before running costmap, tf error: %s&quot;</span>,</span><br><span class="line">             robot_base_frame_.<span class="built_in">c_str</span>(), global_frame_.<span class="built_in">c_str</span>(), tf_error.<span class="built_in">c_str</span>());</span><br><span class="line">    last_error = ros::Time::<span class="built_in">now</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// The error string will accumulate and errors will typically be the same, so the last</span></span><br><span class="line">  <span class="comment">// will do for the warning above. Reset the string here to avoid accumulation.</span></span><br><span class="line">  tf_error.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/27/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B8%B8%E7%94%A8%E7%9A%84tf%E7%A8%8B%E5%BA%8F/" data-id="ckr28oqz000cgewlmfvet1kbj" data-title="常用的tf程序" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/45/">45</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/Boost/">Boost</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E5%9F%BA%E7%A1%80/">C++ 基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/">C++ 模板与STL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">C++ 面向对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux%E5%9F%BA%E7%A1%80/">Linux基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Matlab/">Matlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PCL%E7%82%B9%E4%BA%91/">PCL点云</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/">ROS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/">ROS机器人</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">ROS程序和源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AF%BC%E8%88%AA/">机器人导航</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SLAM%E5%B7%A5%E5%85%B7/">SLAM工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Valgrind%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">Valgrind和内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Wireshark/">Wireshark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cmake-qmake/">cmake/qmake</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%97%E4%BA%AC%E5%AF%BC%E8%88%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%96%91%E9%9A%BE%E9%97%AE%E9%A2%98/">南京导航程序的疑难问题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/">常用工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/">数学基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/">Cartographer</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/%E5%8E%9F%E7%90%86%E5%92%8C%E9%85%8D%E7%BD%AE/">原理和配置</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/">源码解读</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/ICP/">ICP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/amcl%E5%92%8C%E7%B2%92%E5%AD%90%E6%BB%A4%E6%B3%A2/">amcl和粒子滤波</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/gmapping/">gmapping</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/">卡尔曼滤波</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/">反光板</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/">算法推导</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/">雷达</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/">第三方库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%84%9A%E6%9C%AC/">脚本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%86%E8%A7%89SLAM/">视觉SLAM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/TEB%E7%AE%97%E6%B3%95/">TEB算法</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/TEB%E7%AE%97%E6%B3%95/costmap-converter/">costmap converter</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/move-base%E5%88%86%E6%9E%90/">move_base分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E4%BB%A3%E4%BB%B7%E5%9C%B0%E5%9B%BE/">代价地图</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%85%A8%E5%B1%80%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/">全局路径算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%9F%BA%E4%BA%8Erealsense%E6%89%AB%E6%8F%8F%E7%82%B9%E4%BA%91%E7%9A%84%E4%BD%8E%E7%9F%AE%E9%81%BF%E9%9A%9C/">基于realsense扫描点云的低矮避障</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%A4%A7%E8%BD%AE%E5%BB%93%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E5%AF%BC%E8%88%AA/">大轮廓机器人的导航</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/">面试笔试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">web服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%91%84%E5%83%8F%E5%A4%B4/" rel="tag">摄像头</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95/" rel="tag">编译调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/" rel="tag">面试笔试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/web%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 10px;">web服务器</a> <a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 10px;">内存管理</a> <a href="/tags/%E6%91%84%E5%83%8F%E5%A4%B4/" style="font-size: 15px;">摄像头</a> <a href="/tags/%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95/" style="font-size: 20px;">编译调试</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/" style="font-size: 10px;">面试笔试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/13/7861/">7861</a>
          </li>
        
          <li>
            <a href="/2021/07/13/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/07/13/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/%E9%AB%98%E6%96%AF%E7%89%9B%E9%A1%BF%E6%B3%95/">17747</a>
          </li>
        
          <li>
            <a href="/2021/07/13/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/%E7%89%9B%E9%A1%BF%E6%B3%95/">牛顿法</a>
          </li>
        
          <li>
            <a href="/2021/07/12/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/ROS/">ROS</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>