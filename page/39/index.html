<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/39/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-ROS/ROS机器人/超声波传感器和电机驱动器的控制" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/07/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8%E5%92%8C%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E5%99%A8%E7%9A%84%E6%8E%A7%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2019-01-07T12:48:08.000Z" itemprop="datePublished">2019-01-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/">ROS机器人</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/07/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8%E5%92%8C%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E5%99%A8%E7%9A%84%E6%8E%A7%E5%88%B6/">超声波传感器和电机驱动器的控制</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="超声波传感器"><a href="#超声波传感器" class="headerlink" title="超声波传感器"></a>超声波传感器</h3><p>机器人前后共６个超声波传感器，根据下位机程序，任意一个传感器在200mm检测到障碍物时会让机器人停下，但不能继续对机器人进行控制。</p>
<p>根据下位机设置，ROS可以一次性发布话题<code>cmd_Wave</code>，控制超声波的使能和失效。话题消息是<code>std_msgs/Bool data</code>，data=0时，超声波失效，可以正常控制机器人，此时对超声波进行遮挡无法让机器人停下。data=1时，可以用遮挡方式停止机器人，但不能进行手动控制。</p>
<p>同之前一样，使用web方式设置超声波的使能和失效，访问<code>http://localhost/wave_control?data=0</code>使超声波传感器失效，可执行文件为<code>wave_control</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;wave_control&quot;</span>);</span><br><span class="line">ros::NodeHandle nh;</span><br><span class="line">ros::Publisher pub = nh.advertise&lt;std_msgs::Bool&gt;(<span class="string">&quot;cmd_Wave&quot;</span>,<span class="number">1000</span>);</span><br><span class="line">std_msgs::Bool msg;</span><br><span class="line">msg.data = <span class="literal">false</span>;	<span class="comment">// 这里应该是从地址栏获取data输入值</span></span><br><span class="line"><span class="comment">//不必判断订阅者，直接等待１秒钟，只发布一次</span></span><br><span class="line"><span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">pub.<span class="built_in">publish</span>(msg);</span><br></pre></td></tr></table></figure>

<p>传感器距离障碍物的距离也可以获得，下位机里发布的主题是<code>Wave</code>，在ROS订阅这个主题。消息类型需要自己定义，包含6个float变量。在ROS回调函数中输出六个变量即可，不再贴代码了。</p>
<h3 id="电机驱动器"><a href="#电机驱动器" class="headerlink" title="电机驱动器"></a>电机驱动器</h3><p>电机驱动器也可以进行使能和失效的切换。失效后，机器人可以手动移动。使能后，由于电机保持转矩，无法手动移动。原理同超声波传感器基本一样，只是换个主题而已，不再重复了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/07/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/%E8%B6%85%E5%A3%B0%E6%B3%A2%E4%BC%A0%E6%84%9F%E5%99%A8%E5%92%8C%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E5%99%A8%E7%9A%84%E6%8E%A7%E5%88%B6/" data-id="ckr29mypy00e4i0lm86izfn2w" data-title="超声波传感器和电机驱动器的控制" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/rviz深入研究/rviz源码解读(三)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/05/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%89)/" class="article-date">
  <time class="dt-published" datetime="2019-01-05T01:42:10.000Z" itemprop="datePublished">2019-01-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/05/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%89)/">rviz源码解读（三） 插件中的interaction</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>类继承关系：DisplayContext: public QObject<br>VisualizationManager: public DisplayContext<br>MockContext: public DisplayContext</p>
<p>VisualizationFrame::initialize<br>VisualizationManager  handleMouseEvent</p>
<p><code>ImageDisplay::onInitialize()</code>——<code>render_panel_ = new RenderPanel();</code><br>执行顺序:<br>InteractionTool   construct<br>InteractionTool   onInitialize<br>InteractionTool   activate<br>VisualizationManager  handleMouseEvent<br>InteractionTool   processMouseEvent<br>InteractionTool   updateFocus</p>
<p>event.panel = context_-&gt;getViewManager()-&gt;getRenderPanel();<br>event.viewport = context_-&gt;getViewManager()-&gt;getRenderPanel()-&gt;getRenderWindow()-&gt;getViewport(0);</p>
<hr>
<p>render_panel_-&gt;initialize( manager_-&gt;getSceneManager(), manager_ );</p>
<p>void RenderPanel::wheelEvent( QWheelEvent* event )<br>{<br>  int last_x = mouse_x_;<br>  int last_y = mouse_y_;</p>
<p>  mouse_x_ = event-&gt;x();<br>  mouse_y_ = event-&gt;y();</p>
<p>  if (context_)<br>  {<br>    setFocus( Qt::MouseFocusReason );</p>
<pre><code>ViewportMouseEvent vme(this, getViewport(), event, last_x, last_y);
context_-&gt;handleMouseEvent(vme);
event-&gt;accept();
</code></pre>
<p>  }<br>}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/05/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%89)/" data-id="ckr29myqd00f5i0lmgyg1hz4k" data-title="rviz源码解读（三） 插件中的interaction" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/rviz深入研究/rviz源码解读(二)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/30/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%BA%8C)/" class="article-date">
  <time class="dt-published" datetime="2018-12-30T12:19:15.000Z" itemprop="datePublished">2018-12-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/30/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%BA%8C)/">rviz源码解读(二)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>rviz增加panel也是在fillTree</p>
<p><code>VisualizationFrame::initMenus()</code>是rviz的菜单栏，其中的显示工具栏是<code>initToolbars</code>的<code>toolbar_</code>。<br><code>关于</code>是函数<code>VisualizationFrame::onHelpAbout()</code></p>
<p>rviz/src/CMakeLists.txt :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">add_subdirectory(rviz)</span><br><span class="line">add_subdirectory(image_view)</span><br><span class="line">if (CATKIN_ENABLE_TESTING)</span><br><span class="line">  add_subdirectory(test)</span><br><span class="line">endif()</span><br><span class="line"># Python bindings are only support with Qt5, PyQt5, and PySide2 for Kinetic+.</span><br><span class="line">if (UseQt5)</span><br><span class="line">  add_subdirectory(python_bindings)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>
<p>其实是包含了4个子目录，最重要的当然是<code>rviz</code>目录了，其他目录在调试时可以先注释掉。</p>
<p><code>rviz/CMakeLists.txt</code>内容:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">find_package(PkgConfig)</span><br><span class="line">pkg_check_modules(NEW_YAMLCPP yaml-cpp&gt;=0.5)</span><br><span class="line">if(NEW_YAMLCPP_FOUND)</span><br><span class="line">  add_definitions(-DRVIZ_HAVE_YAMLCPP_05)</span><br><span class="line">endif(NEW_YAMLCPP_FOUND)</span><br><span class="line"></span><br><span class="line">if(UNIX AND NOT APPLE)</span><br><span class="line">  find_package(X11 REQUIRED)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">add_subdirectory(default_plugin)</span><br><span class="line"></span><br><span class="line">include_directories(.)</span><br><span class="line"></span><br><span class="line"># Build the version number and other build-time constants into the</span><br><span class="line"># source for access at run-time.</span><br><span class="line">set(ENV_CONFIG_FILE $&#123;CMAKE_CURRENT_BINARY_DIR&#125;/env_config.cpp)</span><br><span class="line">set(RVIZ_VERSION $&#123;rviz_VERSION&#125;)</span><br><span class="line">message(&quot;making version $&#123;RVIZ_VERSION&#125;.&quot;)</span><br><span class="line">set(ROS_DISTRO $ENV&#123;ROS_DISTRO&#125;)</span><br><span class="line">configure_file(env_config.cpp.in $&#123;ENV_CONFIG_FILE&#125; @ONLY)</span><br><span class="line"></span><br><span class="line"># We create one lib with the C++...</span><br><span class="line">add_library($&#123;PROJECT_NAME&#125;  bit_allocator.cpp  ...... yaml_config_reader.cpp  yaml_config_writer.cpp    $&#123;ENV_CONFIG_FILE&#125;  )</span><br><span class="line"></span><br><span class="line">if(NOT WIN32)</span><br><span class="line">  set_target_properties($&#123;PROJECT_NAME&#125; PROPERTIES COMPILE_FLAGS &quot;-std=c++11&quot;)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">target_link_libraries($&#123;PROJECT_NAME&#125;</span><br><span class="line">  $&#123;Boost_LIBRARIES&#125;</span><br><span class="line">  $&#123;catkin_LIBRARIES&#125;</span><br><span class="line">  $&#123;QT_LIBRARIES&#125;</span><br><span class="line">  $&#123;OGRE_OV_LIBRARIES_ABS&#125;</span><br><span class="line">  $&#123;OPENGL_LIBRARIES&#125;</span><br><span class="line">  $&#123;rviz_ADDITIONAL_LIBRARIES&#125;</span><br><span class="line">  $&#123;TinyXML_LIBRARIES&#125;</span><br><span class="line">  $&#123;X11_X11_LIB&#125;</span><br><span class="line">  assimp</span><br><span class="line">  yaml-cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">########### The rviz executable ###########</span><br><span class="line">add_executable(executable main.cpp)</span><br><span class="line"></span><br><span class="line">if(NOT WIN32)</span><br><span class="line">  set_target_properties(executable PROPERTIES COMPILE_FLAGS &quot;-std=c++11&quot;)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">target_link_libraries(executable $&#123;PROJECT_NAME&#125; $&#123;QT_LIBRARIES&#125; $&#123;OGRE_OV_LIBRARIES_ABS&#125;)</span><br><span class="line"></span><br><span class="line">set_target_properties(executable   PROPERTIES OUTPUT_NAME $&#123;PROJECT_NAME&#125;)</span><br><span class="line"></span><br><span class="line">install( TARGETS executable $&#123;PROJECT_NAME&#125;</span><br><span class="line">  RUNTIME DESTINATION $&#123;CATKIN_PACKAGE_BIN_DESTINATION&#125;</span><br><span class="line">  LIBRARY DESTINATION $&#123;CATKIN_PACKAGE_LIB_DESTINATION&#125;     )</span><br><span class="line">install(DIRECTORY ./</span><br><span class="line">  DESTINATION $&#123;CATKIN_PACKAGE_INCLUDE_DESTINATION&#125;</span><br><span class="line">  FILES_MATCHING PATTERN &quot;*.h&quot;)</span><br><span class="line"></span><br><span class="line">install(TARGETS executable  DESTINATION $&#123;CATKIN_GLOBAL_BIN_DESTINATION&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h3><p>主要部分：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rviz::VisualizerApp vapp;	<span class="comment">//最外层</span></span><br><span class="line">vapp.<span class="built_in">setApp</span>( &amp;qapp );		<span class="comment">//赋值给app_</span></span><br><span class="line"><span class="keyword">if</span>( vapp.<span class="built_in">init</span>( argc, argv ))</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> qapp.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="VisualizerApp-init"><a href="#VisualizerApp-init" class="headerlink" title="VisualizerApp::init"></a>VisualizerApp::init</h3><ul>
<li>终端输出rviz, Qt, ogre的版本</li>
<li>基于BOOST检查命令行参数，根据参数进行一些配置</li>
<li>ros::init之后检查是否成功，若不成功则关闭所有窗口</li>
<li>若启动后，与roscore通讯失败，弹出<code>WaitForMasterDialog</code></li>
<li>显示主窗口<code>VisualizationFrame</code>，根据命令行参数进一番设置</li>
<li>主窗口初始化，函数<code>VisualizationFrame::initialize</code>　　//第二层</li>
</ul>
<h3 id="VisualizationFrame-initialize"><a href="#VisualizationFrame-initialize" class="headerlink" title="VisualizationFrame::initialize"></a>VisualizationFrame::initialize</h3><p>  initConfigs();<br>  loadPersistentSettings();<br>  //软件图标<br>  QIcon app_icon( QString::fromStdString( (fs::path(package_path_) / “icons/package.png”).BOOST_FILE_STRING() ) );<br>  setWindowIcon( app_icon );<br>  if( splash_path_ != “” )<br>  {<br>    QPixmap splash_image( splash_path_ );<br>    splash_ = new SplashScreen( splash_image );<br>    splash_-&gt;show();<br>    connect( this, SIGNAL( statusUpdate( const QString&amp; )), splash_, SLOT( showMessage( const QString&amp; )));<br>  }</p>
<p>加载<code>Grid</code>等<code>Display Type</code>是在<code>DisplayTypeTree::fillTree</code></p>
<p><code>add_button</code>按钮的槽函数——<code>DisplaysPanel::onNewDisplay()</code>——<code>AddDisplayDialog</code>构造函数——<code>DisplayTypeTree::fillTree</code>——</p>
<p><code>VisualizationFrame::prepareToExit()</code></p>
<p>保存配置文件为：<code>VisualizationFrame::onSaveAs()</code></p>
<p>保存配置文件：<code>VisualizationFrame::onSave()</code>——<code>saveDisplayConfig</code>——<code>VisualizationFrame::save</code>——<code>savePanels</code>, <code>saveWindowGeometry</code>,<code>saveToolbars</code>——</p>
<p>初始化加载配置文件：<code>VisualizerApp::init</code>——<code>VisualizationFrame::initialize</code>——<code>VisualizationFrame::loadDisplayConfig</code>——<code>VisualizationFrame::load</code>——<code>loadPanels</code>,  <code>loadWindowGeometry</code>,   <code>configureToolbars</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/30/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%BA%8C)/" data-id="ckr29myqe00f7i0lm7mhw0nmd" data-title="rviz源码解读(二)" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/rviz深入研究/rviz源码解读(一)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/25/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%80)/" class="article-date">
  <time class="dt-published" datetime="2018-12-25T12:22:55.000Z" itemprop="datePublished">2018-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/25/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%80)/">rviz源码解读(一)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>rviz启动时会加载一个扩展名为<code>.rviz</code>的配置文件，如果没有指定的话，会默认加载<code>~/.rviz/default.rviz</code>做配置文件，如果没有这个文件，就创建一个。</p>
<p>rviz启动时还会读取一个文件<code>/home/user/.rviz/persistent_settings</code>，内容大致如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Last Config Dir: /home/user/.rviz</span><br><span class="line">Last Image Dir: &quot;&quot;</span><br><span class="line">Recent Configs:</span><br><span class="line">  - /home/user/.rviz/default.rviz</span><br></pre></td></tr></table></figure>
<p>对这个文件的加载是在rviz源码中的函数<code>VisualizationFrame::loadPersistentSettings()</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">VisualizationFrame::loadPersistentSettings</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  YamlConfigReader reader;</span><br><span class="line">  Config config;</span><br><span class="line">  reader.<span class="built_in">readFile</span>( config, QString::<span class="built_in">fromStdString</span>( persistent_settings_file_ ));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>( !reader.<span class="built_in">error</span>() )</span><br><span class="line">  &#123;</span><br><span class="line">    QString last_config_dir, last_image_dir;</span><br><span class="line">    <span class="keyword">if</span>( config.<span class="built_in">mapGetString</span>( <span class="string">&quot;Last Config Dir&quot;</span>, &amp;last_config_dir ) &amp;&amp;</span><br><span class="line">        config.<span class="built_in">mapGetString</span>( <span class="string">&quot;Last Image Dir&quot;</span>, &amp;last_image_dir ))</span><br><span class="line">    &#123;</span><br><span class="line">      last_config_dir_ = last_config_dir.<span class="built_in">toStdString</span>();</span><br><span class="line">      last_image_dir_ = last_image_dir.<span class="built_in">toStdString</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Config recent_configs_list = config.<span class="built_in">mapGetChild</span>( <span class="string">&quot;Recent Configs&quot;</span> );</span><br><span class="line">    recent_configs_.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> num_recent = recent_configs_list.<span class="built_in">listLength</span>();</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_recent; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">      recent_configs_.<span class="built_in">push_back</span>( recent_configs_list.<span class="built_in">listChildAt</span>( i ).<span class="built_in">getValue</span>().<span class="built_in">toString</span>().<span class="built_in">toStdString</span>() );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">ROS_ERROR</span>( <span class="string">&quot;%s&quot;</span>, <span class="built_in">qPrintable</span>( reader.<span class="built_in">errorMessage</span>() ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在编译rviz时出错了，就是在读这个配置文件里，追踪bug的路线:<code>VisualizationFrame::loadPersistentSettings</code>——<code>YamlConfigReader::readFile</code>——<code>YamlConfigReader::readStream</code>——<code>YamlConfigReader::readYamlNode</code>，有问题的代码在<code>yaml_config_reader.cpp</code>的76行，但不论怎么修改都未通过。目前把<code>readStream</code>注释掉，估计PersistentSettings不影响使用。</p>
<p>工具栏添加机器人操作的按钮在<code>ToolManager::load</code>，但是先调用了<code>removeAll</code>，导致没有添加按钮。如果没有removeAll，就有四个按钮: <code>Move Camera</code>,   <code>交互</code>,    <code>Select</code>,    <code>校正位置</code>。可以调用函数<code>removeTool(int  index)</code>，去掉不需要的。</p>
<p>用+按钮添加新的按钮时，打开的对话框是<code>NewObjectDialog</code>，列表中加载按钮的函数是<code>NewObjectDialog::fillTree</code>，<code>QStringList classes = factory_-&gt;getDeclaredClassIds();</code>是所有即将显示的项目，我去掉了一部分。</p>
<p>主界面的标题在　<code>VisualizationFrame::setDisplayConfigFile</code><br>工具栏的编辑在　<code>VisualizationFrame::initToolbars()</code><br>Interact改名是在<code>InteractionTool::onInitialize()</code>里加<code>setName()</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/25/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/rviz%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB(%E4%B8%80)/" data-id="ckr29myqc00f4i0lm1ci6a0d8" data-title="rviz源码解读(一)" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/rviz深入研究/使用Qt二次开发rviz(二) rviz的插件开发" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%BA%8C)%20rviz%E7%9A%84%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" class="article-date">
  <time class="dt-published" datetime="2018-12-24T13:30:36.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%BA%8C)%20rviz%E7%9A%84%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/">使用Qt二次开发rviz(二) rviz的插件开发环境配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>package.xml</code>文件中的<code>&lt;export&gt;</code>用于添加额外的信息，比如需要嵌入的其它package的插件，或者一些说明信息。<br>例如这样的:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;export&gt;</span><br><span class="line">  &lt;rviz plugin=&quot;$&#123;prefix&#125;/plugin_description.xml&quot;/&gt;</span><br><span class="line">&lt;/export&gt;</span><br></pre></td></tr></table></figure>
<p>编译ROS插件时，必须添加一个<code>plugin_description.xml</code>文件，与<code>package.xml</code>同级，它包括了插件动态库的位置，使用的类和基类。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">library</span> <span class="attr">path</span>=<span class="string">&quot;libpluginTest&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;my_plugin/PluginTest&quot;</span></span></span><br><span class="line"><span class="tag">	 <span class="attr">type</span> = <span class="string">&quot;my_plugin::PluginTest&quot;</span></span></span><br><span class="line"><span class="tag">	 <span class="attr">base_class_type</span>=<span class="string">&quot;rviz::Panel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">		The first plugin to test</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">library</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>path</code>是生成的so文件名，可以到lib文件夹查看。这里可以加<code>lib/</code>指定路径，也可以不加。<code>class name</code>必须是<code>命名空间/类名</code>，<code>type</code>必须是<code>命名空间::类名</code>，其他就不用解释了。</p>
<p>还有就是<code>CMakeLists</code>了，除了原有内容，还要加入下面这些:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">find_package(Qt5 COMPONENTS Core Widgets )</span><br><span class="line">set(QT_LIBRARIES Qt5::Widgets)</span><br><span class="line">set(SOURCE_FILES src/my_plugin.cpp include/my_plugin/my_plugin.h)</span><br><span class="line"></span><br><span class="line">add_library(pluginTest $&#123;SOURCE_FILES&#125; )</span><br><span class="line">target_link_libraries(pluginTest</span><br><span class="line">   $&#123;catkin_LIBRARIES&#125;</span><br><span class="line">   $&#123;rviz_DEFAULT_PLUGIN_LIBRARIES&#125;</span><br><span class="line">   $&#123;QT_LIBRARIES&#125;</span><br><span class="line"> )</span><br></pre></td></tr></table></figure>
<p>添加Qt的库，注意生成的是库文件。<strong>这里要注意源文件和头文件都参与编译，尤其头文件要放在include文件夹里</strong>，否则编译不报错但运行会报错:<img src="https://c2.staticflickr.com/8/7825/46533032612_2780714905.jpg"></p>
<p>源文件大致是这样的:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> my_plugin</span><br><span class="line">&#123;</span><br><span class="line">  PluginTest::<span class="built_in">PluginTest</span>(QWidget* parent)</span><br><span class="line">    :rviz::<span class="built_in">Panel</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">resize</span>(<span class="number">406</span>, <span class="number">308</span>);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">setMaximumSize</span>(<span class="built_in">QSize</span>(<span class="number">436</span>, <span class="number">346</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pluginlib/class_list_macros.h&gt;</span></span></span><br><span class="line"><span class="built_in">PLUGINLIB_EXPORT_CLASS</span>(my_plugin::PluginTest,rviz::Panel)</span><br></pre></td></tr></table></figure>
<p>最后两句不能缺少，这是输出插件的类名称，<code>rviz::Panel</code>是基类。</p>
<p>编译完成后，先在工作空间里执行一次<code>source devel/setup.bash</code>，然后再打开rviz就能看到插件了。</p>
<p>参考:<br><a target="_blank" rel="noopener" href="http://wiki.ros.org/pluginlib/PluginDescriptionFile">plugin_description文件的官方文档</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/39390512">ROS技术点滴 —— rviz plugin</a><br><a target="_blank" rel="noopener" href="https://answers.ros.org/question/215487/could-not-load-panel-in-rviz-pluginlibfactory-the-plugin-for-class/">Could not load panel in rviz – PluginlibFactory</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%BA%8C)%20rviz%E7%9A%84%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" data-id="ckr29myqf00fbi0lm3v0kh9i4" data-title="使用Qt二次开发rviz(二) rviz的插件开发环境配置" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/rviz深入研究/使用Qt二次开发rviz(一) 配置编译环境和测试librviz" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%B8%80)%20%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95librviz/" class="article-date">
  <time class="dt-published" datetime="2018-12-24T13:08:24.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%B8%80)%20%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95librviz/">使用Qt二次开发rviz(一) 配置Qt-ROS编译环境</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>新建一个文件夹，在Qt里选中后进行新建工作空间，不必使用<code>ros_workspace_init</code>命令。ROS自带功能包可以直接创建带有Qt界面的package，方法为<code>catkin_create_qt_pkg</code>命令，然后导入Qt中进一步修改为适合自己的GUI节点。</p>
<h3 id="workspace文件"><a href="#workspace文件" class="headerlink" title="workspace文件"></a>workspace文件</h3><p>用qt_ros_plugin创建的工作空间有一个workspace文件，这是普通工作空间没有的，与src同级。内容如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Workspace</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Distribution</span> <span class="attr">name</span>=<span class="string">&quot;kinetic&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DefaultBuildSystem</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">WatchDirectories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Directory</span>&gt;</span>src<span class="tag">&lt;/<span class="name">Directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">WatchDirectories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Workspace</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加以下内容:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">IncludePaths</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Directory</span>&gt;</span>/opt/ros/kinetic/include<span class="tag">&lt;/<span class="name">Directory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">IncludePaths</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是为了防止不能在代码里使用跟ROS有关的自动提示，不过一般也可以不加。</p>
<h3 id="修改CMakeLists和package-xml"><a href="#修改CMakeLists和package-xml" class="headerlink" title="修改CMakeLists和package.xml"></a>修改CMakeLists和package.xml</h3><p><code>ros_qtc_plugin</code>还是基于Qt4的，目前普遍都是Qt5了，所以对新建的package需要修改编译环境，也就是<code>CMakeLists.txt</code>和<code>package.xml</code>两个文件。这里所用的librvi用到了<code>rviz</code>这个package，所以需要一起修改。</p>
<p>对于<code>package.xml</code>，本来是这样的:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>qt_build<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>libqt4-dev<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>qt_build<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>libqt4-dev<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要改成这样:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>qtbase5-dev<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>libqt5-core<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>libqt5-gui<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>rviz<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>rviz<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也就是换成Qt5的几个库，还要加上rviz</p>
<p>对CMakeLists.txt先删除这一项:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosbuild_prepare_qt4(QtCore QtGui)</span><br></pre></td></tr></table></figure>
<p>再添加:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//另一个find_package中添加rviz</span><br><span class="line">find_package(Qt5 REQUIRED Core Widgets)</span><br><span class="line">set(QT_LIBRARIES Qt5::Widgets)</span><br></pre></td></tr></table></figure>
<p>修改所有QT4为QT5，还有在<code>file(GLOB_RECURSE QT_MOC RELATIVE</code>中添加头文件<code>*.h</code></p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>点击左侧兰的“项目”，在<code>构建设置</code>页的<code>编辑构建配置</code>一栏选择<code>Default</code>，然后在下图所示光标处点击切换到<code>运行设置</code>页，可以看到一个<code>Add Run Step</code>的选项，可以添加<code>rosrun</code>和<code>roslaunch</code>，可以通过下拉菜单选择package和target，下拉菜单可以通过键入首字母初步定位到你要找的package位置 。<br><img src="https://c2.staticflickr.com/8/7899/45532545255_eeb930b367_b.jpg"><br>配置好<code>rosrun</code>和<code>roslaunch</code>后，可以直接在Creator中运行节点了，但是还要先运行<code>roscore</code>，否则可以运行节点但是会报错。</p>
<p>参考:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30460905/article/details/79210300"></a><br><a target="_blank" rel="noopener" href="https://uzzz.org/2018/08/05/ee631b67e8705f169072546de0e2cc2c.html"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/24/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/%E4%BD%BF%E7%94%A8Qt%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91rviz(%E4%B8%80)%20%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95librviz/" data-id="ckr29myqe00f8i0lm52q03za2" data-title="使用Qt二次开发rviz(一) 配置Qt-ROS编译环境" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/ROS Kinetic知识/ROS安装和编译等常见问题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/ROS%E5%AE%89%E8%A3%85%E5%92%8C%E7%BC%96%E8%AF%91%E7%AD%89%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2018-12-15T03:13:56.000Z" itemprop="datePublished">2018-12-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/ROS%E5%AE%89%E8%A3%85%E5%92%8C%E7%BC%96%E8%AF%91%E7%AD%89%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">安装和编译等常见问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="安装ROS报错"><a href="#安装ROS报错" class="headerlink" title="安装ROS报错"></a>安装ROS报错</h3><p>Ubuntu 16.04 安装ROS kinetic报错<code>Depends: ros-kinetic-desktop but it is not going to be installed</code></p>
<ol>
<li>删除ros-latest.list</li>
<li>修改源: <code>vim /etc/apt/sources.list</code>，改为下面内容，也就是中科大的安装源:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<p>结果未变，再运行<code>sudo apt-get -f install</code>后安装了一个软件包，再安装<code>ros-kinetic-desktop-full</code>正常了</p>
<h2 id="安装ROS时，最后的-rosdep-update-报错"><a href="#安装ROS时，最后的-rosdep-update-报错" class="headerlink" title="安装ROS时，最后的 rosdep update 报错"></a>安装ROS时，最后的 rosdep update 报错</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reading <span class="keyword">in</span> sources list data from /etc/ros/rosdep/sources.list.d</span><br><span class="line">ERROR: unable to process <span class="built_in">source</span></span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/resolv.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将原有的nameserver这一行注释，并添加以下两行：</span></span><br><span class="line"></span><br><span class="line">nameserver 8.8.8.8 <span class="comment">#google域名服务器</span></span><br><span class="line"></span><br><span class="line">nameserver 8.8.4.4 <span class="comment">#google域名服务器</span></span><br><span class="line"></span><br><span class="line">sudo  apt-get update</span><br><span class="line"></span><br><span class="line">rosdep update</span><br></pre></td></tr></table></figure>

<h3 id="安装时找不到软件包"><a href="#安装时找不到软件包" class="headerlink" title="安装时找不到软件包"></a>安装时找不到软件包</h3><p><img src="https://i.loli.net/2019/06/20/5d0b26a83905675577.png"><br>从报错的内容找到安装包的地址，直接下载，有时一个软件包还有其他依赖包，都要下载<br><img src="https://i.loli.net/2019/06/20/5d0b22d9b724889992.png"></p>
<h2 id="编译缺少-libvtkproj4"><a href="#编译缺少-libvtkproj4" class="headerlink" title="编译缺少 libvtkproj4"></a>编译缺少 libvtkproj4</h2><p>编译时报错: <code>No rule to make target &#39;/usr/lib/x86_64-linux-gnu/libvtkproj4-6.2.so.6.2.0&#39;</code></p>
<p>解决方法:  <code>sudo ln -s /usr/lib/x86_64-linux-gnu/libvtkCommonCore-6.2.so /usr/lib/x86_64-linux-gnu/libvtkproj4-6.2.so.6.2.0</code></p>
<h2 id="执行sudo-rosdep-init后报错"><a href="#执行sudo-rosdep-init后报错" class="headerlink" title="执行sudo rosdep init后报错"></a>执行<code>sudo rosdep init</code>后报错</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: cannot download default sources list from:</span><br><span class="line">https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/sources.list.d/20-default.list Website may be down</span><br></pre></td></tr></table></figure>
<p>这个问题非常棘手，最后终于发现解决方法:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打开hosts文件</span></span><br><span class="line">sudo gedit /etc/hosts</span><br><span class="line"><span class="comment">#在文件末尾添加</span></span><br><span class="line">151.101.84.133  raw.githubusercontent.com</span><br><span class="line"><span class="comment">#保存后退出再尝试</span></span><br><span class="line">rosdep update</span><br></pre></td></tr></table></figure>

<h3 id="E-无法定位软件包-ros-kinetic-map-server"><a href="#E-无法定位软件包-ros-kinetic-map-server" class="headerlink" title="E: 无法定位软件包 ros-kinetic-map-server"></a>E: 无法定位软件包 ros-kinetic-map-server</h3><p>在<strong>软件和更新</strong>的<code>其他软件</code>里添加两项:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://packages.ros.org/ros/ubuntu xenial main</span><br><span class="line">deb http://packages.ros.org/ros-shadow-fixed/ubuntu xenial main</span><br></pre></td></tr></table></figure>
<p>然后执行<code>sudo apt-get update</code>，应该就能安装了。<br>在<code>/etc/apt/sources.list</code>里添加也是同样效果，但两个地方不能都添加，否则update时会报错</p>
<h3 id="without-authentic"><a href="#without-authentic" class="headerlink" title="without authentic"></a>without authentic</h3><p>有时安装某个包出现下面情况，<br><img src="https://i.loli.net/2020/03/10/IRAdK6sqvbEFaXN.png" alt="without authentic.png"><br>在命令最后添加<code>--allow-unauthenticated</code>即可</p>
<h3 id="安装ROS包出现404-Not-Found"><a href="#安装ROS包出现404-Not-Found" class="headerlink" title="安装ROS包出现404  Not Found"></a>安装ROS包出现404  Not Found</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Err:1 http://packages.ros.org/ros/ubuntu &lt;YOUR_UBUNTU_VERSION&gt;/main amd64 &lt;SOME_ROS_PKG&gt; amd64 0.13.3-0xenial-20190320-132757-0800</span><br><span class="line">  404  Not Found [IP: 64.50.236.52 80]</span><br></pre></td></tr></table></figure>
<p>运行<code>sudo apt update</code>也无效，打开上面的网页后，发现安装包的版本是更新的，看来我们的安装没有更新。<br>最后发现在2019年夏天，ROS官方更改了安装的Key，也就是第一次安装ROS时设置的Key。需要换成新的Key，步骤如下：</p>
<ul>
<li><p>sudo apt-key del 421C365BD9FF1F717815A3895523BAEEB01FA116  (Kinetic及以后的版本)</p>
</li>
<li><p>sudo -E apt-key adv –keyserver ‘hkp://keyserver.ubuntu.com:80’ –recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</p>
</li>
<li><p>sudo apt clean</p>
</li>
<li><p>sudo apt update</p>
</li>
</ul>
<p>现在可以正常安装了，如果以后安装ROS，需要用这个新的Key，目前网上很多旧资料还是以前那个Key</p>
<p>参考：<a target="_blank" rel="noopener" href="https://answers.ros.org/question/325039/apt-update-fails-cannot-install-pkgs-key-not-working/">apt update fails / cannot install pkgs</a></p>
<h3 id="找不到-deb"><a href="#找不到-deb" class="headerlink" title="找不到***.deb"></a>找不到<code>***.deb</code></h3><p>有时候我们解决了上面的问题，还是会出现下载ros包出现找不到的错误，这是因为ROS的包大部分都是在更新的，比如robot_state_publisher在2020年1月就更新了，如果没有apt-get update，是下载不到的</p>
<h3 id="roscore报错"><a href="#roscore报错" class="headerlink" title="roscore报错"></a>roscore报错</h3><p>安装完ROS后，运行roscore报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last): File &quot;/opt/ros/groovy/lib/python2.7/dist-packages/roslaunch/__init__.py&quot;, line 230, in main write_pid_file(options.pid_fn, options.core, options.port) File &quot;/opt/ros/groovy/lib/python2.7/dist-packages/roslaunch/__init__.py&quot;, line 106, in write_pid_file with open(pid_fn, &quot;w&quot;) as f: IOError: [Errno 13] Permission denied: &#x27;/home/user/.ros/roscore-11311.pid&#x27;</span><br></pre></td></tr></table></figure>
<p>注意<code>rosdep update</code>不要用sudo，解决方法：<code>sudo rosdep fix-permissions</code>，然后<code>rosdep update</code></p>
<h2 id="roscore报错-2"><a href="#roscore报错-2" class="headerlink" title="roscore报错 2"></a>roscore报错 2</h2><p>在一堆报错的最后是:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InvalidURL: URL can<span class="string">&#x27;t contain control characters. &#x27;</span>192.168.1.35 <span class="string">&#x27; (found at least &#x27;</span> <span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure>
<p>看上去是IP最后多了个空格，改了<code>MASTER_URI</code>不起作用，最后发现问题是<code>ROS_IP</code> 和 <code>ROS_HOME</code>,不要再写成<code>hostname -I</code>，写成<code>192.168.1.35</code></p>
<h3 id="liborocos-kdl-1-3-0"><a href="#liborocos-kdl-1-3-0" class="headerlink" title="liborocos-kdl_1.3.0"></a>liborocos-kdl_1.3.0</h3><p><a target="_blank" rel="noopener" href="https://ubuntu.pkgs.org/16.04/ubuntu-universe-i386/liborocos-kdl1.3_1.3.0+dfsg-1_i386.deb.html">liborocos-kdl1.3_1.3.0的下载地址</a></p>
<h3 id="rosbash出错"><a href="#rosbash出错" class="headerlink" title="rosbash出错"></a>rosbash出错</h3><p><img src="https://i.loli.net/2020/03/12/WBcXvI1h8gpmOJA.png" alt="rosbash出错"><br><code>source setup.bash</code>出现的错误，发现我用的是zsh，换了之后正常</p>
<h3 id="rosdep-init报警"><a href="#rosdep-init报警" class="headerlink" title="rosdep init报警"></a>rosdep init报警</h3><p><img src="https://i.loli.net/2020/03/12/wTezaptWXlkDiNL.png" alt="rosdep init"><br>这是因为之前运行过了，可以无视这个问题</p>
<h3 id="rosrun-Couldn’t-find-executable-named-……"><a href="#rosrun-Couldn’t-find-executable-named-……" class="headerlink" title="[rosrun] Couldn’t find executable named ……"></a>[rosrun] Couldn’t find executable named ……</h3><p><img src="https://c2.staticflickr.com/2/1868/30805780148_db59e627f5_b.jpg"></p>
<h3 id="rosrun出错"><a href="#rosrun出错" class="headerlink" title="rosrun出错"></a>rosrun出错</h3><p><img src="https://c2.staticflickr.com/2/1862/44676479061_f26db9633a_b.jpg"><br>环境变量没设置好，应当是IP和端口组合</p>
<h3 id="编译出错"><a href="#编译出错" class="headerlink" title="编译出错"></a>编译出错</h3><p><img src="https://c2.staticflickr.com/2/1953/31877502238_b9bbbfaa4a_b.jpg"><br>对用到的某个文件没有给权限，找到执行<code>chmod 755</code>即可</p>
<h3 id="rosnode-list无结果"><a href="#rosnode-list无结果" class="headerlink" title="rosnode list无结果"></a>rosnode list无结果</h3><p><code>roscore</code>和<code>rosrun</code>可以正常运行，但是<code>rosnode list</code>只有<code>rosout</code>，<code>rostopic list</code>没有任何话题。无法用命令对节点和话题操作，可能是通信问题。原因不明，重启电脑后正常。</p>
<h3 id="编译rviz出错"><a href="#编译rviz出错" class="headerlink" title="编译rviz出错"></a>编译rviz出错</h3><p><img src="https://c1.staticflickr.com/5/4806/46407510602_e90cfbd218_b.jpg"><br>没有安装yaml-cpp或者版本不对，因为rviz读取PersistentSettings文件时需要这个库，下载0.5.1版本的yaml，把之前安装的yaml删掉，重新编译安装。编译生成的几个文件在<code>/usr/local/lib</code>和<code>/usr/local/include</code>，如果找不全，就先用现在的版本再编译一遍就知道了</p>
<h3 id="多个工作空间中存在同名package-此时使用rosrun会造成歧义，结果不确定，此时最好到devel-lib-package文件夹直接运行可执行文件"><a href="#多个工作空间中存在同名package-此时使用rosrun会造成歧义，结果不确定，此时最好到devel-lib-package文件夹直接运行可执行文件" class="headerlink" title="多个工作空间中存在同名package,此时使用rosrun会造成歧义，结果不确定，此时最好到devel/lib/package文件夹直接运行可执行文件"></a>多个工作空间中存在同名package,此时使用<code>rosrun</code>会造成歧义，结果不确定，此时最好到<code>devel/lib/package</code>文件夹直接运行可执行文件</h3><h3 id="roslaunch参数报错"><a href="#roslaunch参数报错" class="headerlink" title="roslaunch参数报错"></a>roslaunch参数报错</h3><p>一次运行某launch时报错：<br><img src="https://i.loli.net/2019/07/10/5d25d2735fb4747854.png"><br>后来发现问题是当前工作空间不存在nav_control，所有source的工作空间都没有，当然找不到了</p>
<h3 id="Lost-sync-with-device-restarting"><a href="#Lost-sync-with-device-restarting" class="headerlink" title="Lost sync with device, restarting"></a>Lost sync with device, restarting</h3><p><img src="https://i.loli.net/2019/08/08/lZaQ5C9mVL7yGvD.png"><br>启动<code>bringup.launch</code>，偶尔会出现这个错误，这是下位机和ROS通讯失败造成的，报错在rosserial，很少发生</p>
<h3 id="Could-NOT-find-SDL-missing-SDL-LIBRARY-SDL-INCLUDE-DIR"><a href="#Could-NOT-find-SDL-missing-SDL-LIBRARY-SDL-INCLUDE-DIR" class="headerlink" title="Could NOT find SDL (missing: SDL_LIBRARY SDL_INCLUDE_DIR)"></a>Could NOT find SDL (missing: SDL_LIBRARY SDL_INCLUDE_DIR)</h3><p>在编译<code>map_server</code>时出错，是缺少了库文件：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libsdl-image1.2-dev</span><br><span class="line">sudo apt-get install libsdl-dev</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/ROS%E5%AE%89%E8%A3%85%E5%92%8C%E7%BC%96%E8%AF%91%E7%AD%89%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" data-id="ckr29myol00axi0lm1fob38f7" data-title="安装和编译等常见问题" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/ROS Kinetic知识/rosparam与参数服务器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosparam%E4%B8%8E%E5%8F%82%E6%95%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2018-12-15T02:04:47.000Z" itemprop="datePublished">2018-12-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosparam%E4%B8%8E%E5%8F%82%E6%95%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/">rosparam与参数服务器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>机器人的参数一般会提前设置好，这些参数都会放在yaml文件里，但有些参数是需要动态改变的，调试导航时尤其如此。于是ROS提供了rosparam命令和参数服务器这两个工具。<code>rosparam</code>命令的方便之处在于它可以直接读取yaml文件中的参数，而不必自己找第三方库去文件中读取。</p>
<p>一般在package的文件夹里会建一个<code>param</code>文件夹，也就是与<code>launch</code>和<code>msg</code>同一级，yaml文件就放在这个<code>param</code>文件夹里。</p>
<p>rosparam dump    # 保存参数到一个文件</p>
<p>使用<code>rosparam load file.yaml</code>命令将多个参数加载到参数服务器，在用到时会从服务器中获取。但实际上，这个命令直接用得不多。要将一个yaml文件中的参数在节点启动时都加载到参数服务器，一般是在launch文件中使用<code>rosparam</code>标签:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">&quot;$(find turtlebot_navigation)/param/move_base_params.yaml&quot;</span> <span class="attr">command</span>=<span class="string">&quot;load&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">&quot;$(arg custom_param_file)&quot;</span> <span class="attr">command</span>=<span class="string">&quot;load&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>加载完成后，可以使用一些调试性的命令了。用<code>rosparam list</code>查看所有参数。可以用<code>rosparam get param</code>查看某参数的值，用<code>rosparam set param value</code>设定参数的值。另外还可以用<code>rosparam delete param</code>删除某个参数。</p>
<p>使用<code>rosparam get</code>时要注意，参数名称不只是yaml文件中的名称，而是一个完整名称，比如<code> .yaml</code>中是这样的:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TrajectoryPlannerROS:</span><br><span class="line">  int_param: 2</span><br><span class="line">  max_vel_x: 0.15</span><br></pre></td></tr></table></figure>

<p>要获得<code>max_vel_x</code>的值，命令是<code>rosparam get /move_base/TrajectoryPlannerROS/max_vel_x</code>，也就是<code>/node/tag/param</code><br><img src="https://c1.staticflickr.com/5/4819/46282089562_a049538b6e_b.jpg"></p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><p>启动ROS节点后, 用<code>rosparam get param</code>可获知各个参数值，而且发现在关掉所有节点后，仍然能用<code>rosparam get</code>获得参数值，可见它被存到参数服务器里了</p>
<h3 id="程序中的param"><a href="#程序中的param" class="headerlink" title="程序中的param"></a>程序中的param</h3><p>加载参数的方法其实有三种，除了上面说的直接用<code>rosparam load</code>命令和launch文件中使用load外，还可以在程序中使用<code>param</code>和<code>setParam</code>,<code>getParam</code>函数，这里和yaml文件就没关系了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">std::string s;</span><br><span class="line"><span class="keyword">int</span> num;</span><br><span class="line">n.<span class="built_in">getParam</span>(<span class="string">&quot;string_param&quot;</span>, s);</span><br><span class="line">pn.<span class="built_in">getParam</span>(<span class="string">&quot;int_param&quot;</span>, num);</span><br><span class="line">n.<span class="built_in">setParam</span>(<span class="string">&quot;string_param&quot;</span>, <span class="string">&quot;hehe&quot;</span>);</span><br><span class="line">pn.<span class="built_in">setParam</span>(<span class="string">&quot;int_param&quot;</span>, <span class="number">222</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n.param&lt;std::string&gt;(<span class="string">&quot;string_param&quot;</span>, s, <span class="string">&quot;haha&quot;</span>);</span><br><span class="line">pn.param&lt;<span class="keyword">int</span>&gt;(<span class="string">&quot;int_param&quot;</span>, num, <span class="number">666</span>)</span><br></pre></td></tr></table></figure>
<p>getParam()函数可以从参数服务器获取参数值。如果成功，变量s和num的值将会被修改为参数值，函数返回true；如果不成功（譬如参数服务器没有设置这个参数），变量s和num将保持原值，函数会返回false。setParam()就是设置参数的值了。param()函数从参数服务器取参数值给变量。如果无法获取，则将默认值赋给变量，和param()函数的区别是还提供了一个默认值。</p>
<p>还有<code>ros::NodeHandle::hasParam()</code>和<code>ros::NodeHandle::deleteParam()</code>函数，不过用的不多</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>使用yaml文件时，一定要注意格式的正确，但是<strong>最好不要用-符号，也就是不要用数组项，否则可能出问题</strong>，之前尝试使用一个第三方库读取yaml文件时，总是读取失败，发现只有加上-符号，也就是将参数作为数组项后才能正常读取。但再用<code>rosparam get</code>读取这个文件中的参数就会出错，结果获得的全是默认值，不是当前值。用<code>rosparam list</code>会发现加载的参数不全，原因是yaml文件中这样编辑:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TrajectoryPlannerROS:</span><br><span class="line">  -name: value</span><br><span class="line">  int_param: 2</span><br><span class="line">  max_vel_x: 0.15</span><br></pre></td></tr></table></figure>
<p>不要加<code>-name</code>一行，也就是反而不能使用标准的yaml格式</p>
<p>参考:<a target="_blank" rel="noopener" href="http://wiki.ros.org/roscpp_tutorials/Tutorials/Parameters">Using Parameters in roscpp</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/15/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/rosparam%E4%B8%8E%E5%8F%82%E6%95%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ckr29myot00bli0lmhljx878x" data-title="rosparam与参数服务器" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-第三方库/解析yaml" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/05/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/%E8%A7%A3%E6%9E%90yaml/" class="article-date">
  <time class="dt-published" datetime="2018-12-05T13:33:36.000Z" itemprop="datePublished">2018-12-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/">第三方库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/05/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/%E8%A7%A3%E6%9E%90yaml/">解析yaml</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>YAML最基本，最常用的一些使用格式：<br>首先YAML中允许表示三种格式，分别是常量值，对象和数组</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://www.wolfcode.cn</span> </span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">http://www.wolfcode.cn</span> </span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">120.168</span><span class="number">.117</span><span class="number">.21</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">120.168</span><span class="number">.117</span><span class="number">.22</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">120.168</span><span class="number">.117</span><span class="number">.23</span></span><br><span class="line"><span class="comment">#常量</span></span><br><span class="line"><span class="attr">pi:</span> <span class="number">3.14</span>   <span class="comment">#定义一个数值3.14</span></span><br><span class="line"><span class="attr">hasChild:</span> <span class="literal">true</span>  <span class="comment">#定义一个boolean值</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">&#x27;Hello YAML&#x27;</span>   <span class="comment">#定义一个字符串</span></span><br></pre></td></tr></table></figure>


<p>读YAML的最好方法是使用Python的yaml库<code>PyYAML</code>，到<a target="_blank" rel="noopener" href="https://pyyaml.org/wiki/PyYAMLDocumentation">官网</a>下载安装后，可以先运行测试程序看是否成功。<br>读取程序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> yaml,os</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;test.yaml&quot;</span>)</span><br><span class="line">y = yaml.load(f,Loader=yaml.FullLoader)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> y</span><br></pre></td></tr></table></figure>
<p>运行后，结果：<br><img src="https://live.staticflickr.com/65535/47751988322_72c2646b97_b.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/05/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/%E8%A7%A3%E6%9E%90yaml/" data-id="ckr29mylw004zi0lm1x8334vd" data-title="解析yaml" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ROS/ROS Kinetic知识/工作空间和package.xml" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/11/29/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4%E5%92%8Cpackage.xml/" class="article-date">
  <time class="dt-published" datetime="2018-11-29T13:08:22.000Z" itemprop="datePublished">2018-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ROS/">ROS</a>►<a class="article-category-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/11/29/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4%E5%92%8Cpackage.xml/">工作空间和package.xml</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>创建package后，<code>package.xml</code>不需要再修改，cpp文件必须有个main函数<code>return 0</code>，否则报错。</p>
<p>创建package命令是<code>catkin_create_pkg nodeName</code></p>
<h3 id="package名称"><a href="#package名称" class="headerlink" title="package名称"></a>package名称</h3><p>package的名称对应<code>CMakeLists</code>中的<code>project(package)</code>和<code>package.xml</code>中的<code>&lt;name&gt;package&lt;/name&gt;</code></p>
<p>package的命名是有官方规范的，我意外地发现<code>test</code>这个名字往往会带来问题，可能是因为带<code>test</code>的package都是用于测试的，所以要避免使用。基本规则如下:</p>
<ol>
<li>只能使用字母数字下划线</li>
<li>字母只能用小写，开头必须是字母</li>
<li>至少有两个字符长度</li>
<li>只做消息的package以_msg结尾，只含launch的以_launch结尾，以此类推</li>
</ol>
<p>不要轻易用<code>msg</code>, <code>launch</code>, <code>test</code>这样的字符串做名称，容易出问题。如果命名不规范，编译时会告警，影响编译时间。查看官方package列表，发现除了tf这样一个单词做名称的例子外，其他基本都是<code>a_b</code>或<code>a_b_c</code>这样的名称，例如<code>tuw_geometry_rviz</code>，所以这样命名比较稳妥。</p>
<h3 id="package-xml"><a href="#package-xml" class="headerlink" title="package.xml"></a>package.xml</h3><p>每个package.xml文件必须包含的标签包括：</p>
<ul>
<li><code>&lt;package&gt;</code> : 最高级tag，属性：format，用于指定格式 </li>
<li><code>&lt;name&gt;</code> ：package名称</li>
<li><code>&lt;version&gt;</code> ：当前版本</li>
<li><code>&lt;description&gt;</code>：package的基本描述</li>
<li><code>&lt;maintainer&gt;</code>(至少一个)：维护者</li>
<li><code>&lt;license&gt;</code>(至少一个)：协议</li>
<li><code>&lt;buildtool_depend&gt;</code>(至少一个): 一般情况下只需要指定catkin作为编译工具， <strong>在需要交叉编译的情况下需要增加目标机器的编译工具</strong></li>
</ul>
<p>可选标签包括：</p>
<ul>
<li><code>&lt;build_depend&gt;</code> (多个)：编译时需要依赖的其它package，适用于静态库</li>
<li><code>&lt;exec_depend&gt;</code> (多个)：运行时需要依赖的其它package，适用于静态库</li>
<li><code>build_export_depend</code>: 编译时需要链接(build against)的package</li>
<li><code>&lt;export&gt;</code>：用于添加额外的信息，比如需要嵌入的其它package的插件，或者一些说明信息。<br><img src="https://c1.staticflickr.com/5/4906/44628455720_2d3643554f_b.jpg"></li>
</ul>
<p>使用<code>depend</code>可以表示同时包括<code>build</code>和<code>exec</code>依赖，也就是说<code>&lt;depend&gt;roscpp&lt;/depend&gt;</code>相当于</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一般都包括的几个是</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 可能还有其他msgs类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build_export_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">build_export_depend</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<h3 id="几个重要路径"><a href="#几个重要路径" class="headerlink" title="几个重要路径"></a>几个重要路径</h3><p>4个ROS的重要路径，可在CMakeLists中用message函数查看：</p>
<ul>
<li><p><code>CATKIN_PACKAGE_LIB_DESTINATION</code>： lib库的路径</p>
</li>
<li><p><code>CATKIN_PACKAGE_BIN_DESTINATION</code>： 可执行文件的路径</p>
</li>
<li><p><code>CATKIN_PACKAGE_SHARE_DESTINATION</code>：共享文件的路径，就是CMakeLists中的INSTALL生成的两个cmake文件的路径</p>
</li>
<li><p><code>catkin_INCLUDE_DIRS</code>： 跟catkin有关文件的路径，不仅仅是ROS相关的</p>
</li>
</ul>
<p><img src="https://c2.staticflickr.com/8/7881/44628455000_50c1e40128_b.jpg"></p>
<p>在代码中包含另一个package的头文件时，经常写成<code>#include&lt;robot_api/robot_api.h&gt;</code>，注意程序目录结构必须是这样：<br><img src="https://i.loli.net/2019/08/20/5TpseFtAu7VfivG.png"></p>
<h2 id="多工作空间的问题"><a href="#多工作空间的问题" class="headerlink" title="多工作空间的问题"></a>多工作空间的问题</h2><table><tr><td bgcolor=yellow> 尽量只用一个工作空间，如果用到两个以上，不要出现同名package，也不要出现不同工作空间的包有依赖的情况 </td></tr></table>

<p>如果在<code>/opt/ros/kinetic/</code>之外，如果我们创建了多个工作空间且需要在多个工作空间中来回地工作，比如<code>/home/user/catkin_ws1</code> 和 <code>/home/user/catkin_ws2</code></p>
<p><code>ROS_PACKAGE_PATH</code>环境变量中的多个目录是有先后顺序的。如果工作空间1和2中的所有包之间没有依赖关系，那么将下面两句话放在<code>bashrc</code>文件中合适的位置（至少应该放在<code>source /opt/ros/kinetic/setup.*sh</code>后）。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /home/user/catkin_ws1/devel/setup.*sh --extended</span><br><span class="line"><span class="built_in">source</span> /home/user/catkin_ws2/devel/setup.*sh --extended</span><br></pre></td></tr></table></figure>
<p>后面source的工作空间会遮蔽之前工作空间的同名包，比如<code>opt/ros/indigo/share/</code>中安装了move_base包，又在<code>/home/user/catkin_ws1</code>中通过下载源代码的方式安装了move_base，由于<code>ROS_PACKAGE_PATH</code>环境变量的遮蔽效果，我实际用的是<code>/home/user/catkin_ws1/</code>中的<code>move_base</code>，这正是我们常常的目的</p>
<p>环境变量中这样设置：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /opt/ros/kinetic/setup.zsh</span><br><span class="line"><span class="built_in">source</span> /home/xiaoqiang/catkin_ws/devel/setup.zsh</span><br></pre></td></tr></table></figure>
<p><code>ROS_PACKAGE_PATH</code>结果是<code>/home/xiaoqiang/catkin_ws/src:/opt/ros/kinetic/share</code>，也就是说后source的工作空间会排在<code>ROS_PACKAGE_PATH</code>的靠前部分，也就是优先级高</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/11/29/ROS/ROS%20Kinetic%E7%9F%A5%E8%AF%86/%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4%E5%92%8Cpackage.xml/" data-id="ckr29myp400cbi0lm1awm54ck" data-title="工作空间和package.xml" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/38/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="page-number" href="/page/38/">38</a><span class="page-number current">39</span><a class="page-number" href="/page/40/">40</a><a class="page-number" href="/page/41/">41</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/40/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/Boost/">Boost</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E5%9F%BA%E7%A1%80/">C++ 基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E6%A8%A1%E6%9D%BF%E4%B8%8ESTL/">C++ 模板与STL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/C-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">C++ 面向对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux%E5%9F%BA%E7%A1%80/">Linux基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Matlab/">Matlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PCL%E7%82%B9%E4%BA%91/">PCL点云</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/">ROS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS-Kinetic%E7%9F%A5%E8%AF%86/">ROS Kinetic知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/">ROS机器人</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/ROS%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">ROS程序和源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/rviz%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6/">rviz深入研究</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ROS/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AF%BC%E8%88%AA/">机器人导航</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SLAM%E5%B7%A5%E5%85%B7/">SLAM工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Valgrind%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">Valgrind和内存管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Wireshark/">Wireshark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cmake-qmake/">cmake/qmake</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%97%E4%BA%AC%E5%AF%BC%E8%88%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%96%91%E9%9A%BE%E9%97%AE%E9%A2%98/">南京导航程序的疑难问题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/">常用工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/">数学基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/">Cartographer</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/%E5%8E%9F%E7%90%86%E5%92%8C%E9%85%8D%E7%BD%AE/">原理和配置</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/">源码解读</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/ICP/">ICP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/amcl%E5%92%8C%E7%B2%92%E5%AD%90%E6%BB%A4%E6%B3%A2/">amcl和粒子滤波</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/gmapping/">gmapping</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/">卡尔曼滤波</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E5%8F%8D%E5%85%89%E6%9D%BF/">反光板</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/">算法推导</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BF%80%E5%85%89SLAM/%E9%9B%B7%E8%BE%BE/">雷达</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/">第三方库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%84%9A%E6%9C%AC/">脚本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%86%E8%A7%89SLAM/">视觉SLAM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/">路径规划</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/TEB%E7%AE%97%E6%B3%95/">TEB算法</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/TEB%E7%AE%97%E6%B3%95/costmap-converter/">costmap converter</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/move-base%E5%88%86%E6%9E%90/">move_base分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E4%BB%A3%E4%BB%B7%E5%9C%B0%E5%9B%BE/">代价地图</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%85%A8%E5%B1%80%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/">全局路径算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%9F%BA%E4%BA%8Erealsense%E6%89%AB%E6%8F%8F%E7%82%B9%E4%BA%91%E7%9A%84%E4%BD%8E%E7%9F%AE%E9%81%BF%E9%9A%9C/">基于realsense扫描点云的低矮避障</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/%E5%A4%A7%E8%BD%AE%E5%BB%93%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E5%AF%BC%E8%88%AA/">大轮廓机器人的导航</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/">面试笔试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">web服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%91%84%E5%83%8F%E5%A4%B4/" rel="tag">摄像头</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95/" rel="tag">编译调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/" rel="tag">面试笔试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/web%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 10px;">web服务器</a> <a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 10px;">内存管理</a> <a href="/tags/%E6%91%84%E5%83%8F%E5%A4%B4/" style="font-size: 15px;">摄像头</a> <a href="/tags/%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95/" style="font-size: 20px;">编译调试</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95/" style="font-size: 10px;">面试笔试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/13/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/%E9%AB%98%E6%96%AF%E7%89%9B%E9%A1%BF%E6%B3%95/">高斯牛顿法</a>
          </li>
        
          <li>
            <a href="/2021/07/13/%E6%BF%80%E5%85%89SLAM/%E7%AE%97%E6%B3%95%E6%8E%A8%E5%AF%BC/%E7%89%9B%E9%A1%BF%E6%B3%95/">牛顿法</a>
          </li>
        
          <li>
            <a href="/2021/07/12/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/ROS/">ROS</a>
          </li>
        
          <li>
            <a href="/2021/07/12/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/">算法</a>
          </li>
        
          <li>
            <a href="/2021/07/07/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/AddAccumulatedRangeData%E5%87%BD%E6%95%B0(3)/">AddAccumulatedRangeData函数(3) 加入位姿估计器和插入子图</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>