<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Charon Cheung"><meta name="copyright" content="Charon Cheung"><title>If you wish for peace, prepare for war | æ²‰é»˜æ€æ‰‹</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://s2.loli.net/2022/02/17/HQaCXUBn64zsMIL.png"></div><div class="author-info__name text-center">Charon Cheung</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">644</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">6</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">53</span></a></div></div></div><nav id="nav" style="background-image: url(https://s2.loli.net/2022/11/17/QOR8cePIS5NdDrK.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">æ²‰é»˜æ€æ‰‹</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="site-info"><div id="site-title">æ²‰é»˜æ€æ‰‹</div><div id="site-sub-title">If you wish for peace, prepare for war</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/14/C++/Boost/Boost%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E7%BA%BF%E7%A8%8B/">Boostæ•™ç¨‹ï¼ˆä¸‰ï¼‰å¤šçº¿ç¨‹</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/Boost/">Boost</a></span><div class="content"><p>ä½¿ç”¨Windowså†™Boostå¤šçº¿ç¨‹æ—¶ï¼Œè¿˜éœ€è¦å…ˆç¼–è¯‘Boostæºç äº§ç”Ÿåº“æ–‡ä»¶ï¼Œæˆ‘è¯•äº†å‡ æ¬¡éƒ½æ²¡æˆåŠŸï¼Œå°±æ‡’å¾—åœ¨Windowsä¸Šç¼–ç¨‹äº†ã€‚</p>
<p>åœ¨Linuxä¸Šï¼ŒBoostä½¿ç”¨å¤šçº¿ç¨‹è¿˜å¾—ç”¨åˆ°filesystemå’Œsystemæ¨¡å—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¯èƒ½æ˜¯threadæ¨¡å—ç”¨åˆ°äº†å®ƒä»¬ï¼Œå› æ­¤cmakeè¿™æ ·å†™<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find_package(Boost COMPONENTS filesystem system thread REQUIRED)</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="string">&quot;main.cpp&quot;</span> )</span><br><span class="line">target_link_libraries(untitled  <span class="variable">$&#123;Boost_FILESYSTEM_LIBRARY&#125;</span> </span><br><span class="line">        <span class="variable">$&#123;Boost_SYSTEM_LIBRARY&#125;</span>  </span><br><span class="line">        <span class="variable">$&#123;Boost_THREAD_LIBRARY&#125;</span>)</span><br></pre></td></tr></table></figure><br>å¤´æ–‡ä»¶åªéœ€è¦<code>#include &lt;boost/thread.hpp&gt;</code></p>
<p>å¯¹äºROSç¯å¢ƒï¼Œåº“æ–‡ä»¶å·²ç»åŒ…å«åœ¨<code>$&#123;catkin_LIBRARIES&#125;</code>å½“ä¸­</p>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_1</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;slot1: &quot;</span>&lt;&lt;n&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_2</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;slot2: &quot;</span>&lt;&lt; <span class="number">2</span>*n&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">13</span>;</span><br><span class="line">    boost::thread th_1 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_1,n));</span><br><span class="line">    th_1.<span class="built_in">join</span>();</span><br><span class="line">    boost::thread th_2 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_2,n));</span><br><span class="line">    th_2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;endl&lt;&lt;<span class="string">&quot;end&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ²¡æœ‰ä¸¤ä¸ªjoin()ä¼šæœ‰å¤šç§ç»“æœï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slot2: 26end</span><br><span class="line"></span><br><span class="line">slot1: 13</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slot1: end</span><br><span class="line">13</span><br><span class="line">slot2: 26</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">slot1: slot2: 13</span><br><span class="line">26</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>å¯è§å‡ ä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºä¹±å¥—äº†ï¼Œç»™ä¸¤ä¸ªçº¿ç¨‹éƒ½åŠ <code>join()</code>æ‰ç¡®å®šé¡ºåºæ˜¯ <strong>çº¿ç¨‹ï¼‘ï¼çº¿ç¨‹ï¼’ï¼ä¸»çº¿ç¨‹</strong>ï¼Œå¦‚æœåªåŠ ä¸€ä¸ªï¼Œå‰©ä¸‹ä¸¤ä¸ªçº¿ç¨‹çš„é¡ºåºè¿˜æ˜¯ä¸ç¡®å®šã€‚</p>
<h3 id="boost-condition"><a href="#boost-condition" class="headerlink" title="boost::condition"></a>boost::condition</h3><p>ç¨‹åºå¦‚ä¸‹ï¼Œmainå‡½æ•°é‡Œè¦æŠŠä¸Šé¢ä¸¤ä¸ªçº¿ç¨‹çš„joinäº¤æ¢ä¸€ä¸‹ï¼Œå…ˆæ‰§è¡Œçº¿ç¨‹2ï¼Œè¿™æ ·åœ¨çº¿ç¨‹2é‡Œçš„éšæœºæ•°å¦‚æœå¤§äº90ï¼Œä¼šå”¤é†’çº¿ç¨‹1ã€‚å¦‚æœå…ˆæ‰§è¡Œçº¿ç¨‹1ï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç¨‹åºæ²¡æ³•å‘ä¸‹æ‰§è¡Œäº†ã€‚<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">boost::mutex mut;</span><br><span class="line">boost::condition cond;</span><br><span class="line">boost::mutex::scoped_lock _lock(mut);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_1</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cond.<span class="built_in">wait</span>(_lock);</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;thread 1: &quot;</span>&lt;&lt;<span class="built_in">rand</span>()%<span class="number">50</span> &lt;&lt;endl;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_2</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m = <span class="number">50</span> + <span class="built_in">rand</span>()%<span class="number">50</span>;</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;thread 2: &quot;</span>&lt;&lt; m &lt;&lt;endl;</span><br><span class="line">        <span class="keyword">if</span>(m&gt;<span class="number">90</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cond.<span class="built_in">notify_one</span>();</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;thread 2 wake thread 1   &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æŸæ¬¡çš„æµ‹è¯•ç»“æœï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">thread 2: 65</span><br><span class="line">thread 2: 93</span><br><span class="line">thread 2 wake thread 1   thread 1: 35</span><br><span class="line">thread 2: 86</span><br><span class="line">thread 2: 92</span><br><span class="line">thread 2 wake thread 1   thread 1: 49</span><br><span class="line">thread 2: 71</span><br></pre></td></tr></table></figure></p>
<h3 id="atomic-æ— é”ç¼–ç¨‹"><a href="#atomic-æ— é”ç¼–ç¨‹" class="headerlink" title="atomic æ— é”ç¼–ç¨‹"></a>atomic æ— é”ç¼–ç¨‹</h3><p>å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹ä¸­çš„å…¨å±€å˜é‡å’Œå †ï¼Œéƒ½å¯ä»¥å¯¹å…¨å±€å˜é‡å’Œå †ä¸Šçš„æ•°æ®è¿›è¡Œè¯»å†™ï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªæ•°æ®ï¼Œå¯èƒ½é€ æˆæŸçº¿ç¨‹çš„ä¿®æ”¹ä¸¢å¤±ï¼›å¦‚æœä¸€ä¸ªçº¿ç¨‹å†™çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å»è¯»è¯¥æ•°æ®æ—¶å¯èƒ½ä¼šè¯»åˆ°å†™äº†ä¸€åŠçš„æ•°æ®ã€‚è¿™äº›è¡Œä¸ºéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„è¡Œä¸ºï¼Œä¼šé€ æˆç¨‹åºè¿è¡Œé€»è¾‘å‡ºç°é”™è¯¯ã€‚ä¸‹é¢çš„ç¨‹åºå¾ˆå¸¸è§ï¼š<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// boost::atomic&lt;int&gt; i(0);</span></span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">boost::mutex mut;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_1</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n=<span class="number">100000</span>;   <span class="comment">//  nä¸å¤Ÿå¤§æ—¶ï¼Œiä¸å®¹æ˜“å‡ºç°ä¸åŒçš„æƒ…å†µ</span></span><br><span class="line">    boost::thread th1 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_1,n));</span><br><span class="line">    boost::thread th2 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_1,n));</span><br><span class="line">    th1.<span class="built_in">join</span>();</span><br><span class="line">    th2.<span class="built_in">join</span>();</span><br><span class="line">    cout&lt;&lt; i&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_1</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">       mut.<span class="built_in">lock</span>();</span><br><span class="line">        i++;</span><br><span class="line">       mut.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å¦‚æœä¸åŠ lockï¼Œiæœ€ç»ˆå€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œå› ä¸ºä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹iè¿›è¡Œäº†å†™æ“ä½œã€‚ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬ç”¨äº’æ–¥é”mutexä¿æŠ¤ä¸´ç•ŒåŒºï¼Œä¿è¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–é”ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å®Œæ¯•åé‡Šæ”¾é”ï¼Œè€Œä¸æŒæœ‰é”çš„çº¿ç¨‹é˜»å¡ç­‰å¾…ç›´åˆ°è·å–åˆ°é”ï¼Œç„¶åæ‰èƒ½å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œæœ€åiå¿…å®šä¸º200000</p>
<p>Boostæä¾›äº†åŸå­ç±»å‹atomicï¼Œé€šè¿‡ä½¿ç”¨åŸå­ç±»å‹å¯æ‘†è„±æ¯æ¬¡å¯¹å…±äº«å˜é‡è¿›è¡Œæ“ä½œéƒ½è¿›è¡Œçš„åŠ é”è§£é”åŠ¨ä½œï¼ŒèŠ‚çœäº†ç³»ç»Ÿå¼€é”€ï¼ŒåŒæ—¶é¿å…äº†çº¿ç¨‹å› é˜»å¡è€Œé¢‘ç¹çš„åˆ‡æ¢ã€‚atomicå°è£…äº†ä¸åŒè®¡ç®—æœºç¡¬ä»¶çš„åº•å±‚æ“ä½œåŸè¯­ï¼Œæä¾›äº†è·¨å¹³å°çš„åŸå­æ“ä½œåŠŸèƒ½ï¼Œè§£å†³å¹¶å‘ç«äº‰è¯»å†™å˜é‡çš„å›°æ‰°ï¼Œåªéœ€è¦åŒ…å«æ–‡ä»¶<code>&lt;boost/atomic.hpp&gt;</code>ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨<code>boost::atomic&lt;int&gt; i(0);</code>ï¼Œç„¶åå»æ‰å‡½æ•°ä¸­çš„äº’æ–¥é”ï¼Œè¿è¡Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”èŠ‚çœäº†ç³»ç»Ÿå¼€é”€ã€‚</p>
<p>atomicå¯ä»¥æŠŠå¯¹ç±»å‹Tçš„æ“ä½œåŸå­åŒ–ï¼ŒTçš„è¦æ±‚ï¼š</p>
<ol>
<li>æ ‡é‡ç±»å‹ï¼ˆç®—æ•°ï¼Œæšä¸¾ï¼ŒæŒ‡é’ˆï¼‰</li>
<li>PODç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨memcmp,memsetç­‰å‡½æ•°</li>
</ol>
<p>ä¸¤ç§æ–¹å¼åˆ›å»ºatomicå¯¹è±¡ï¼š<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">atomic&lt;<span class="keyword">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="built_in">assert</span>(a==<span class="number">10</span>);      <span class="comment">//å®‰å…¨å‡½æ•°ï¼Œè‹¥è¡¨è¾¾å¼ä¸æˆç«‹ç»“æŸç¨‹åº</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">atomic&lt;<span class="keyword">long</span>&gt; L;</span><br><span class="line">cout &lt;&lt; L &lt;&lt;endl;    <span class="comment">//åˆå§‹å€¼ä¸ç¡®å®š</span></span><br></pre></td></tr></table></figure><br>æœ€é‡è¦çš„ä¸¤ä¸ªæˆå‘˜å‡½æ•°ï¼š <code>store()</code> (operator=) å’Œ <code>load()</code> (operator T() )ä»¥åŸå­æ–¹å¼å­˜å–ï¼Œä¸ä¼šå› ä¸ºå¹¶å‘è®¿é—®å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">boost::atomic&lt;<span class="keyword">bool</span>&gt; <span class="title">b</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="built_in">assert</span>(b != <span class="number">0</span>);</span><br><span class="line">std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line">b.<span class="built_in">store</span>(<span class="number">0</span>);<span class="comment">//å­˜å€¼</span></span><br><span class="line">std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="function">boost::atomic&lt;<span class="keyword">int</span>&gt; <span class="title">n1</span><span class="params">(<span class="number">100</span>)</span></span>;</span><br><span class="line">std::cout &lt;&lt; n1.<span class="built_in">exchange</span>(<span class="number">200</span>) &lt;&lt; std::endl;  <span class="comment">//äº¤æ¢ä¸¤ä¸ªå€¼ï¼Œå¹¶ä¸”è¿”å›åŸå€¼100</span></span><br><span class="line">std::cout &lt;&lt; n1 &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ä¸­ä¸´ç•ŒåŒºéå¸¸çŸ­ï¼Œåªæœ‰ä¸€ä¸ªè¯­å¥ï¼Œæ‰€ä»¥æ˜¾å¾—åŠ é”è§£é”æ“ä½œå¯¹ç¨‹åºæ€§èƒ½å½±å“å¾ˆå¤§ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬çš„ä¸´ç•ŒåŒºä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆçŸ­ï¼Œä¸´ç•ŒåŒºè¶Šé•¿ï¼ŒåŠ é”å’Œè§£é”æ“ä½œçš„æ€§èƒ½æŸè€—è¶Šå¾®å°ï¼Œæ— é”ç¼–ç¨‹å’Œæœ‰é”ç¼–ç¨‹ä¹‹é—´çš„æ€§èƒ½å·®è·ä¹Ÿå°±è¶Šå¾®å°ã€‚</p>
<p>æ— é”ç¼–ç¨‹æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºä¸¤ç‚¹ï¼š</p>
<ul>
<li>é¿å…äº†æ­»é”çš„äº§ç”Ÿã€‚ç”±äºæ— é”ç¼–ç¨‹é¿å…äº†ä½¿ç”¨é”ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ä¼šå‡ºç°å¹¶å‘ç¼–ç¨‹ä¸­æœ€è®©äººå¤´ç–¼çš„æ­»é”é—®é¢˜ï¼Œå¯¹äºæé«˜ç¨‹åºå¥å£®æ€§æœ‰å¾ˆå¤§ç§¯ææ„ä¹‰</li>
<li>ä»£ç æ›´åŠ æ¸…æ™°ä¸ç®€æ´</li>
</ul>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/8638.html">C++11å¤šçº¿ç¨‹ç¼–ç¨‹</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/14/C++/%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B%20join/">å¤šçº¿ç¨‹ join</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">å¤šçº¿ç¨‹</a></span><div class="content"><p>ä½¿ç”¨Windowså†™Boostå¤šçº¿ç¨‹æ—¶ï¼Œè¿˜éœ€è¦å…ˆç¼–è¯‘Boostæºç äº§ç”Ÿåº“æ–‡ä»¶ï¼Œæˆ‘è¯•äº†å‡ æ¬¡éƒ½æ²¡æˆåŠŸï¼Œå°±æ‡’å¾—åœ¨Windowsä¸Šç¼–ç¨‹äº†ã€‚</p>
<p>åœ¨Linuxä¸Šï¼ŒBoostä½¿ç”¨å¤šçº¿ç¨‹è¿˜å¾—ç”¨åˆ°filesystemå’Œsystemæ¨¡å—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¯èƒ½æ˜¯threadæ¨¡å—ç”¨åˆ°äº†å®ƒä»¬ï¼Œå› æ­¤cmakeè¿™æ ·å†™<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find_package(Boost COMPONENTS filesystem system thread REQUIRED)</span><br><span class="line"></span><br><span class="line">add_executable(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="string">&quot;main.cpp&quot;</span> )</span><br><span class="line">target_link_libraries(untitled  <span class="variable">$&#123;Boost_FILESYSTEM_LIBRARY&#125;</span> </span><br><span class="line">        <span class="variable">$&#123;Boost_SYSTEM_LIBRARY&#125;</span>  </span><br><span class="line">        <span class="variable">$&#123;Boost_THREAD_LIBRARY&#125;</span>)</span><br></pre></td></tr></table></figure><br>å¤´æ–‡ä»¶åªéœ€è¦<code>#include &lt;boost/thread.hpp&gt;</code></p>
<p>å¯¹äºROSç¯å¢ƒï¼Œåº“æ–‡ä»¶å·²ç»åŒ…å«åœ¨<code>$&#123;catkin_LIBRARIES&#125;</code>å½“ä¸­</p>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>ä½¿ç”¨join()å‡½æ•°æ—¶ï¼Œä¸»è°ƒçº¿ç¨‹é˜»å¡ï¼Œç­‰å¾…è¢«è°ƒçº¿ç¨‹ç»ˆæ­¢ï¼Œç„¶åä¸»è°ƒçº¿ç¨‹å›æ”¶è¢«è°ƒçº¿ç¨‹èµ„æºï¼Œå¹¶ç»§ç»­è¿è¡Œ<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_1</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;slot1: &quot;</span>&lt;&lt;n&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">thread_2</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;slot2: &quot;</span>&lt;&lt; <span class="number">2</span>*n&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">13</span>;</span><br><span class="line">    boost::thread th_1 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_1,n));</span><br><span class="line">    th_1.<span class="built_in">join</span>();</span><br><span class="line">    boost::thread th_2 = boost::<span class="built_in">thread</span>(boost::<span class="built_in">bind</span>(&amp;thread_2,n));</span><br><span class="line">    th_2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    cout&lt;&lt;endl&lt;&lt;<span class="string">&quot;end&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ²¡æœ‰ä¸¤ä¸ªjoin()ä¼šæœ‰å¤šç§ç»“æœï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slot2: 26end</span><br><span class="line"></span><br><span class="line">slot1: 13</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">slot1: end</span><br><span class="line">13</span><br><span class="line">slot2: 26</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">slot1: slot2: 13</span><br><span class="line">26</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>å¯è§å‡ ä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºä¹±å¥—äº†ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ &emsp;&emsp;  çº¿ç¨‹1 â€”â€”çº¿ç¨‹ 1çš„<code>join()</code>â€”â€” çº¿ç¨‹2 â€”â€”çº¿ç¨‹ 2çš„<code>join()</code> &emsp;&emsp; æ‰ç¡®å®šé¡ºåºæ˜¯ <strong>çº¿ç¨‹ï¼‘ï¼çº¿ç¨‹ï¼’ï¼ä¸»çº¿ç¨‹</strong>ï¼Œå¦‚æœåªåŠ ä¸€ä¸ªï¼Œæˆ–è€…å…ˆå®šä¹‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œå†æ‰§è¡Œä¸¤ä¸ªjoinï¼Œçº¿ç¨‹çš„é¡ºåºè¿˜æ˜¯ä¸ç¡®å®šã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/14/C++/Boost/Boost%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">Boostæ•™ç¨‹ï¼ˆäºŒï¼‰æ–‡ä»¶ç³»ç»Ÿ</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/Boost/">Boost</a></span><div class="content"><p>é¦–å…ˆåœ¨cmakeä¸­ä½¿ç”¨Boostçš„filesystemæ¨¡å—ï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find_package(Boost COMPONENTS system filesystem REQUIRED)</span><br><span class="line"></span><br><span class="line">target_link_libraries(mytarget </span><br><span class="line">  $&#123;Boost_FILESYSTEM_LIBRARY&#125;</span><br><span class="line">  $&#123;Boost_SYSTEM_LIBRARY&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><br>å¿…é¡»å¾—åŠ ä¸Š<code>system</code>æ¨¡å—</p>
<p>filesystemåº“æä¾›äº†ä¸¤ä¸ªå¤´æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯<boost/filesystem.hpp>ï¼Œè¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«ä¸»è¦çš„åº“å†…å®¹ã€‚å®ƒæä¾›äº†å¯¹æ–‡ä»¶ç³»ç»Ÿçš„é‡è¦æ“ä½œã€‚åŒæ—¶å®ƒå®šä¹‰äº†ä¸€ä¸ªç±»pathï¼Œæ­£å¦‚å¤§å®¶æ‰€æƒ³çš„ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªå¯ç§»æ¤çš„è·¯å¾„è¡¨ç¤ºæ–¹æ³•ï¼Œå®ƒæ˜¯filesystemåº“çš„åŸºç¡€ã€‚</p>
<p>filesystemåœ¨ä»»ä½•æ—¶å€™ï¼Œåªè¦ä¸èƒ½å®Œæˆç›¸åº”çš„ä»»åŠ¡ï¼Œå®ƒéƒ½å¯èƒ½æŠ›å‡º basic_filesystem_errorå¼‚å¸¸ï¼Œå½“ç„¶å¹¶ä¸æ˜¯æ€»ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºåœ¨åº“ç¼–è¯‘çš„æ—¶å€™å¯ä»¥å…³é—­è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>è·¯å¾„çš„åˆ›å»ºå¾ˆç®€å•ï¼Œä»…ä»…éœ€è¦å‘ç±»boost::filesystem::path()çš„æ„é€ å™¨ä¼ é€’ä¸€ä¸ªstring<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">    filesystem::path cur_path = filesystem::<span class="built_in">current_path</span>();</span><br><span class="line">    filesystem::path parent_path = cur_path.<span class="built_in">parent_path</span>();</span><br><span class="line">    <span class="comment">//pathæ”¯æŒé‡è½½/è¿ç®—ç¬¦ï¼Œè¿™ä¸ªå¾ˆå¥½ç”¨</span></span><br><span class="line">    filesystem::path file_path = cur_path/<span class="string">&quot;test&quot;</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;curren path: &quot;</span>&lt;&lt;cur_path&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;parent path: &quot;</span>&lt;&lt;parent_path&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">if</span>(filesystem::<span class="built_in">exists</span>(file_path))   <span class="comment">// é€‚åˆåˆ¤æ–­æ–‡ä»¶çš„å­˜åœ¨</span></span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;exists test &quot;</span>&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    filesystem::path  filePath = <span class="string">&quot;/home/user/yaml&quot;</span>;</span><br><span class="line">    cout&lt;&lt;fs::<span class="built_in">is_directory</span>(filePath)&lt;&lt;endl;     </span><br><span class="line">    cout&lt;&lt;fs::<span class="built_in">is_empty</span>(filePath)&lt;&lt;endl;     <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// unsigned long int,  byte</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;file test size: &quot;</span>&lt;&lt;filesystem::<span class="built_in">file_size</span>(file_path)&lt;&lt;endl;</span><br><span class="line"><span class="comment">//    filesystem::remove(file_path);</span></span><br><span class="line">    filesystem::<span class="built_in">rename</span>(file_path, cur_path/<span class="string">&quot;newTest&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="function">filesystem::path <span class="title">p</span><span class="params">(<span class="string">&quot;/home/user/ost.yaml&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(fs::<span class="built_in">exists</span>(p))   <span class="comment">// Boostç¼ºé™·ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¸¤å‡½æ•°ä¹Ÿèƒ½æ­£å¸¸è¾“å‡º</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;p.<span class="built_in">extension</span>()&lt;&lt;endl;      <span class="comment">// &quot;yaml&quot;</span></span><br><span class="line">        cout&lt;&lt;p.<span class="built_in">stem</span>()&lt;&lt;endl;        <span class="comment">// æ–‡ä»¶åï¼Œä¸å¸¦æ‰©å±•å</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ–‡ä»¶ï¼Œå¤±è´¥ä¼šå¼ºè¡Œç»“æŸï¼šterminate called after throwing an instance of &#x27;boost::filesystem::filesystem_error&#x27;   æ‰€ä»¥è¦ç”¨ try catch throw</span></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        boost::filesystem::<span class="built_in">remove</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in"><span class="keyword">catch</span></span>( <span class="keyword">const</span> boost::exception &amp; e )</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;remove error&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">throw</span>;</span><br><span class="line"><span class="comment">//        return -1;</span></span><br><span class="line">    &#125;</span><br><span class="line">    filesystem::<span class="built_in">create_directory</span>(cur_path/<span class="string">&quot;dir&quot;</span>);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;is dir: &quot;</span>&lt;&lt;filesystem::<span class="built_in">is_directory</span>(cur_path/<span class="string">&quot;dir&quot;</span>)&lt;&lt;endl;</span><br></pre></td></tr></table></figure></p>
<p>é€’å½’è·å–æŸæ–‡ä»¶å¤¹ä¸­ç¬¦åˆæŸæ‰©å±•åçš„æ‰€æœ‰æ–‡ä»¶åï¼š<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> fs = boost::filesystem;</span><br><span class="line"></span><br><span class="line"><span class="function">std::vector&lt;fs::path&gt; <span class="title">getFileNames</span><span class="params">(fs::path p, std::string extension)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::vector&lt;fs::path&gt; names;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!fs::<span class="built_in">is_directory</span>(p) )</span><br><span class="line">        <span class="keyword">return</span> names;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(fs::<span class="built_in">is_empty</span>(p))</span><br><span class="line">        <span class="keyword">return</span> names;</span><br><span class="line"></span><br><span class="line">    <span class="function">fs::recursive_directory_iterator <span class="title">iter</span><span class="params">(p)</span></span>;       <span class="comment">//è¿­ä»£ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">    fs::recursive_directory_iterator end_iter;      <span class="comment">// åªæ¥å°±æ˜¯end iterator</span></span><br><span class="line">    <span class="keyword">if</span>( !p.<span class="built_in">empty</span>() &amp;&amp; fs::<span class="built_in">exists</span>(p))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(; iter!= end_iter;iter++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (fs::<span class="built_in">is_directory</span>( *iter ) )</span><br><span class="line">                &#123;</span><br><span class="line"><span class="comment">//                    std::cout&lt;&lt;*iter &lt;&lt; &quot;is dir&quot; &lt;&lt; std::endl;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line"><span class="comment">//                    std::cout&lt;&lt;iter-&gt;path().stem() &lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//                    std::cout&lt;&lt;iter-&gt;path().extension() &lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//                    std::cout &lt;&lt; &quot;full name: &quot;&lt;&lt;*iter &lt;&lt; endl;              </span></span><br><span class="line">                    <span class="keyword">if</span>(iter-&gt;<span class="built_in">path</span>().<span class="built_in">extension</span>() == extension)</span><br><span class="line">                    &#123;</span><br><span class="line">                        names.<span class="built_in">push_back</span>(iter-&gt;<span class="built_in">path</span>().<span class="built_in">stem</span>());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in"><span class="keyword">catch</span></span> ( <span class="keyword">const</span> std::exception &amp; ex )&#123;</span><br><span class="line">                std::cerr &lt;&lt; ex.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> names;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line">std::vector&lt;fs::path&gt; names = <span class="built_in">getFileNames</span>(<span class="string">&quot;/home/zzp/yaml&quot;</span>, <span class="string">&quot;.yaml&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(names.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;It&#x27;s empty or not a dir&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;names.<span class="built_in">size</span>();i++)</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;name: &quot;</span>&lt;&lt;names.<span class="built_in">at</span>(i)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/13/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Gitå¸¸ç”¨å‘½ä»¤</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-13</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/">å¸¸ç”¨å·¥å…·</a></span><div class="content"><h2 id="åœ¨æœ¬åœ°å»ºç«‹ä»“åº“åˆ°pushçš„è¿‡ç¨‹ï¼š"><a href="#åœ¨æœ¬åœ°å»ºç«‹ä»“åº“åˆ°pushçš„è¿‡ç¨‹ï¼š" class="headerlink" title="åœ¨æœ¬åœ°å»ºç«‹ä»“åº“åˆ°pushçš„è¿‡ç¨‹ï¼š"></a>åœ¨æœ¬åœ°å»ºç«‹ä»“åº“åˆ°pushçš„è¿‡ç¨‹ï¼š</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git remote add origin https://github.com/rjosodtssp/Design-Modes.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<p>æäº¤ä¼šé™„å¸¦æ¶ˆæ¯å’Œä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œå“ˆå¸Œå€¼æ˜¯ä¸€ä¸²åŒ…å«æ•°å­—å’Œå­—æ¯çš„éšæœºåºåˆ—ã€‚</p>
<h2 id="ç”Ÿæˆå…¬é’¥"><a href="#ç”Ÿæˆå…¬é’¥" class="headerlink" title="ç”Ÿæˆå…¬é’¥"></a>ç”Ÿæˆå…¬é’¥</h2><p><img src="https://s2.loli.net/2022/06/15/NlS4hYr9Cz6W7eH.png" alt=""></p>
<h2 id="åˆ é™¤è¿œç¨‹åº“çš„æŸæ–‡ä»¶"><a href="#åˆ é™¤è¿œç¨‹åº“çš„æŸæ–‡ä»¶" class="headerlink" title="åˆ é™¤è¿œç¨‹åº“çš„æŸæ–‡ä»¶"></a>åˆ é™¤è¿œç¨‹åº“çš„æŸæ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm file.cpp</span><br><span class="line">git commit</span><br></pre></td></tr></table></figure>
<p>ä»æœ¬åœ°åº“ä¸­åˆ é™¤äº†ï¼Œå†pushå°±å¯ä»¥ä»è¿œç¨‹åº“åˆ é™¤</p>
<h2 id="ä»è¿œç¨‹ä»“åº“æ‹‰å–"><a href="#ä»è¿œç¨‹ä»“åº“æ‹‰å–" class="headerlink" title="ä»è¿œç¨‹ä»“åº“æ‹‰å–"></a>ä»è¿œç¨‹ä»“åº“æ‹‰å–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git <span class="built_in">clone</span></span><br></pre></td></tr></table></figure>
<h2 id="å•ç‹¬pushæŸæ–‡ä»¶"><a href="#å•ç‹¬pushæŸæ–‡ä»¶" class="headerlink" title="å•ç‹¬pushæŸæ–‡ä»¶"></a>å•ç‹¬pushæŸæ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit test.cpp</span><br><span class="line">//åœ¨vimä¸­è¾“å…¥æ›´æ–°ä¿¡æ¯</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h2 id="æ·»åŠ è¿œç¨‹ä»“åº“"><a href="#æ·»åŠ è¿œç¨‹ä»“åº“" class="headerlink" title=" æ·»åŠ è¿œç¨‹ä»“åº“ "></a><center> æ·»åŠ è¿œç¨‹ä»“åº“ </center></h2><p><code>git remote add origin git@github.com:rjosodtssp/DailyCode.git</code><br>æ·»åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œåœ°å€æ˜¯ <font color = blue> git@github.com:rjosodtssp/DailyCode.git </font>,è€Œ <strong>origin</strong> æ˜¯ç»™è¿™ä¸ªé¡¹ç›®çš„è¿œç¨‹ä»“åº“èµ·çš„åå­—ï¼Œåªæœ‰ä¸€ä¸ªè¿œç¨‹ä»“åº“æ—¶åå­—å°±æ˜¯ origin</p>
<p>æŸ¥çœ‹å½“å‰é¡¹ç›®æœ‰å“ªäº›è¿œç¨‹ä»“åº“å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:<br><code>git remote -v</code></p>
<h2 id="åˆ é™¤Repository"><a href="#åˆ é™¤Repository" class="headerlink" title=" åˆ é™¤Repository "></a><center> åˆ é™¤Repository </center></h2><p>åœ¨GitHubç½‘ç«™ä¸Šæ“ä½œï¼Œæ‰“å¼€è¦åˆ é™¤çš„Repository,ç‚¹ <code>Settings</code><br><img src="https://live.staticflickr.com/65535/48061319366_a21c469d95_b.jpg" alt=""></p>
<h2 id="Commit-message-ç”¨-emoji"><a href="#Commit-message-ç”¨-emoji" class="headerlink" title=" Commit message ç”¨ emoji "></a><center> Commit message ç”¨ emoji </center></h2><p>åˆæ¬¡æäº¤ç¤ºä¾‹:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;:tada: Initialize Repo&quot;</span></span><br></pre></td></tr></table></figure></p>
<p>ğŸ†• (å…¨æ–°)  :new:   å¼•å…¥æ–°åŠŸèƒ½<br>(é—ªç”µ)      :zap:    æå‡æ€§èƒ½<br>ğŸ”– (ä¹¦ç­¾)  :bookmark:  å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾<br>ğŸ› (bug)   :bug:   ä¿®å¤ bug<br>(æ€¥æ•‘è½¦)    :ambulance: é‡è¦è¡¥ä¸</p>
<p>(æ‰³æ‰‹)      :wrench:    ä¿®æ”¹é…ç½®æ–‡ä»¶<br>(åŠ å·)      :heavy_plus_sign:   å¢åŠ ä¸€ä¸ªä¾èµ–<br>â– (å‡å·)  :heavy_minus_sign:  å‡å°‘ä¸€ä¸ªä¾èµ–<br>(å¤‡å¿˜å½•)    :memo:       æ’°å†™æ–‡æ¡£<br>(é”¤å­)      :hammer:    é‡å¤§é‡æ„<br>ğŸ”¥ (ç«ç„°)   :fire:  ç§»é™¤ä»£ç æˆ–æ–‡ä»¶</p>
<h2 id="æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹"><a href="#æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title=" æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹ "></a><center> æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹ </center></h2><p>å¯¹qclipper.cppä¿®æ”¹åï¼Œæ‰“ç®—è¿”å›ä¸Šæ¬¡æäº¤çš„çŠ¶æ€ï¼Œä½¿ç”¨å‘½ä»¤:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- qclipper.cpp</span><br></pre></td></tr></table></figure><br>å¦‚æœè¦æ’¤é”€ <strong>æ‰€æœ‰æ–‡ä»¶</strong> çš„ä¿®æ”¹ï¼Œå‘½ä»¤ä¸ºï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -f</span><br></pre></td></tr></table></figure><br><code>git diff ReadMe.mdown</code> è¡¨ç¤ºåœ¨commitä¹‹å‰æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹å“ªäº›åœ°æ–¹ï¼Œ åœ¨commitä¹‹åä½¿ç”¨æ­¤å‘½ä»¤æ— æ•ˆã€‚</p>
<h2 id="é¿å…æ¯æ¬¡æäº¤æ—¶ç™»å½•"><a href="#é¿å…æ¯æ¬¡æäº¤æ—¶ç™»å½•" class="headerlink" title="é¿å…æ¯æ¬¡æäº¤æ—¶ç™»å½•"></a>é¿å…æ¯æ¬¡æäº¤æ—¶ç™»å½•</h2><p>å¦‚æœæˆ‘ä»¬git cloneçš„ä¸‹è½½ä»£ç çš„æ—¶å€™æ˜¯è¿æ¥çš„<a target="_blank" rel="noopener" href="https://è€Œä¸æ˜¯git@git">https://è€Œä¸æ˜¯git@git</a> (ssh)çš„å½¢å¼ï¼Œå½“æˆ‘ä»¬æ“ä½œgit pull/pushåˆ°è¿œç¨‹çš„æ—¶å€™ï¼Œæ€»æ˜¯æç¤ºæˆ‘ä»¬è¾“å…¥è´¦å·å’Œå¯†ç æ‰èƒ½æ“ä½œæˆåŠŸï¼Œé¢‘ç¹çš„è¾“å…¥è´¦å·å’Œå¯†ç ä¼šå¾ˆéº»çƒ¦ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šgit bashè¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•ï¼Œè¾“å…¥<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure><br>ç„¶åä½ ä¼šåœ¨ä½ æœ¬åœ°ç”Ÿæˆä¸€ä¸ªæ–‡æœ¬ï¼Œä¸Šè¾¹è®°å½•ä½ çš„è´¦å·å’Œå¯†ç ã€‚ä¸ç”¨å…³å¿ƒåœ¨å“ªï¼Œä½¿ç”¨ä¸Šè¿°çš„å‘½ä»¤é…ç½®å¥½ä¹‹åï¼Œå†æ“ä½œä¸€æ¬¡git pullï¼Œç„¶åå®ƒä¼šæç¤ºä½ è¾“å…¥è´¦å·å¯†ç ï¼Œè¿™ä¸€æ¬¡ä¹‹åå°±ä¸éœ€è¦å†æ¬¡è¾“å…¥å¯†ç äº†ã€‚</p>
<h2 id="åœ¨Githubæ‰¾åˆ°ä»¥å‰æäº¤çš„ç‰ˆæœ¬"><a href="#åœ¨Githubæ‰¾åˆ°ä»¥å‰æäº¤çš„ç‰ˆæœ¬" class="headerlink" title=" åœ¨Githubæ‰¾åˆ°ä»¥å‰æäº¤çš„ç‰ˆæœ¬ "></a><center> åœ¨Githubæ‰¾åˆ°ä»¥å‰æäº¤çš„ç‰ˆæœ¬ </center></h2><p>ç‚¹å‡»<code>commits</code><br>ç‚¹å‡»çº¢åœˆçš„æ ‡å¿—ï¼Œè¿›å…¥æ—§ç‰ˆæœ¬çš„<code>repository</code>ï¼Œç„¶åå¯ä»¥ä¸‹è½½</p>
<p><img src="https://live.staticflickr.com/65535/48061368043_9fcb31abba_b.jpg" alt="Alt text"></p>
<h2 id="git-tag"><a href="#git-tag" class="headerlink" title=" git tag "></a><center> git tag </center></h2><p>Git ä¸­çš„tagæŒ‡å‘ä¸€æ¬¡commitçš„idï¼Œé€šå¸¸ç”¨æ¥ç»™å¼€å‘åˆ†æ”¯åšä¸€ä¸ªæ ‡è®°ï¼Œå¦‚æ ‡è®°ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p>
<h2 id="æ‰“æ ‡ç­¾"><a href="#æ‰“æ ‡ç­¾" class="headerlink" title="æ‰“æ ‡ç­¾"></a>æ‰“æ ‡ç­¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.01 -m &quot;Relase version 1.01&quot;</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£ï¼šgit tag æ˜¯æ‰“æ ‡ç­¾çš„å‘½ä»¤ï¼Œ-a æ˜¯æ·»åŠ æ ‡ç­¾ï¼Œå…¶åè¦è·Ÿæ–°æ ‡ç­¾å·ï¼Œ-m åŠåé¢çš„å­—ç¬¦ä¸²æ˜¯å¯¹è¯¥æ ‡ç­¾çš„æ³¨é‡Šã€‚</p>
<h2 id="æäº¤æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"><a href="#æäº¤æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æäº¤æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"></a>æäº¤æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£ï¼šå°±åƒgit push origin master æŠŠæœ¬åœ°ä¿®æ”¹æäº¤åˆ°è¿œç¨‹ä»“åº“ä¸€æ ·ï¼Œ-tagså¯ä»¥æŠŠæœ¬åœ°çš„æ‰“çš„æ ‡ç­¾å…¨éƒ¨æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚</p>
<h2 id="åˆ é™¤æ ‡ç­¾"><a href="#åˆ é™¤æ ‡ç­¾" class="headerlink" title="åˆ é™¤æ ‡ç­¾"></a>åˆ é™¤æ ‡ç­¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d v1.01</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£ï¼š-d è¡¨ç¤ºåˆ é™¤ï¼Œåé¢è·Ÿè¦åˆ é™¤çš„tagåå­—</p>
<h2 id="åˆ é™¤è¿œç¨‹æ ‡ç­¾"><a href="#åˆ é™¤è¿œç¨‹æ ‡ç­¾" class="headerlink" title="åˆ é™¤è¿œç¨‹æ ‡ç­¾"></a>åˆ é™¤è¿œç¨‹æ ‡ç­¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :refs/tags/v1.01</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£ï¼šå°±åƒgit push origin :branch_1 å¯ä»¥åˆ é™¤è¿œç¨‹ä»“åº“çš„åˆ†æ”¯branch_1ä¸€æ ·ï¼Œ å†’å·å‰ä¸ºç©ºè¡¨ç¤ºåˆ é™¤è¿œç¨‹ä»“åº“çš„tagã€‚</p>
<h2 id="æŸ¥çœ‹æ ‡ç­¾"><a href="#æŸ¥çœ‹æ ‡ç­¾" class="headerlink" title="æŸ¥çœ‹æ ‡ç­¾"></a>æŸ¥çœ‹æ ‡ç­¾</h2><p><code>git tag</code> æˆ–è€… <code>git tag -l</code></p>
<p><img src="https://live.staticflickr.com/65535/48061319131_fb5423f504_b.jpg" alt="Alt text"></p>
<h2 id="ä¿®æ”¹commit-message"><a href="#ä¿®æ”¹commit-message" class="headerlink" title=" ä¿®æ”¹commit message "></a><center> ä¿®æ”¹commit message </center></h2><p>&emsp;&emsp;ä¸Šä¸€æ¬¡çš„messageå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œä½¿ç”¨ï¼š<code>git commit --amend</code> å¦‚æœä¸Šä¸€æ¬¡çš„commitå·²ç»pushäº†ï¼Œé‚£ä¹ˆéœ€è¦å¼ºåˆ¶æäº¤ <code>git push -f origin master</code></p>
<h2 id="ä»è¿œç¨‹ä»“åº“æ›´æ–°"><a href="#ä»è¿œç¨‹ä»“åº“æ›´æ–°" class="headerlink" title="ä»è¿œç¨‹ä»“åº“æ›´æ–°"></a>ä»è¿œç¨‹ä»“åº“æ›´æ–°</h2><p>GitHub çš„ä»“åº“ä¸Šå·²ç»æ›´æ–°äº†ï¼Œä½†æœ¬åœ°å´æ²¡æœ‰åšç›¸åº”çš„æ›´æ”¹ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œå¯ä»¥ä½¿ç”¨ <code>git pull origin &lt;branch&gt;</code>å‘½ä»¤ä»è¿œç¨‹åˆ†æ”¯ä¸­æ‹‰å–æœ€æ–°çš„æ›´æ”¹ã€‚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure></p>
<h2 id="ä¿®æ”¹åˆ«äººçš„ä»£ç "><a href="#ä¿®æ”¹åˆ«äººçš„ä»£ç " class="headerlink" title=" ä¿®æ”¹åˆ«äººçš„ä»£ç  "></a><center> ä¿®æ”¹åˆ«äººçš„ä»£ç  </center></h2><p>å…ˆåˆ°åˆ«äººçš„é¡¹ç›®ä¸Šforkåˆ°è‡ªå·±çš„GitHubä¸‹ï¼Œcloneä¸‹æ¥ä»¥åè¿›è¡Œä¿®æ”¹ï¼Œpushåˆ°è‡ªå·±çš„é¡¹ç›®ã€‚</p>
<p>åœ¨è‡ªå·±çš„é¡¹ç›®é¡µé¢<code>pull request</code>ï¼ŒæŠŠæˆ‘çš„ä¿®æ”¹å‘åˆ°å¯¹æ–¹çš„é¡¹ç›®é‡Œï¼ŒGitHubåŒæ—¶ç»™å¯¹æ–¹å‘äº†é‚®ä»¶ï¼Œç”±å¯¹æ–¹å†³å®šæ˜¯å¦æ¥å—ä¿®æ”¹ã€‚</p>
<p>æ³¨æ„ï¼šä¸è¦åœ¨å¯¹æ–¹çš„é¡¹ç›®é¡µé¢clone</p>
<h2 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·åå’Œé‚®ç®±"><a href="#æŸ¥çœ‹å½“å‰ç”¨æˆ·åå’Œé‚®ç®±" class="headerlink" title=" æŸ¥çœ‹å½“å‰ç”¨æˆ·åå’Œé‚®ç®± "></a><center> æŸ¥çœ‹å½“å‰ç”¨æˆ·åå’Œé‚®ç®± </center></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ç”¨æˆ·åå’Œåœ°å€ï¼Œä¸åŠ globalåªèƒ½ç”Ÿæ•ˆä¸€æ¬¡<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;your name&quot;</span><br><span class="line">git config --global user.email &quot;your email&quot;</span><br></pre></td></tr></table></figure></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/12/ROS/ROS%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/%E8%A7%A3%E6%9E%90ros%20init%EF%BC%88%E4%BA%8C%EF%BC%89/">è§£æros initï¼ˆäºŒï¼‰</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ROS/">ROS</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ROS/ROS%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">ROSç¨‹åºå’Œæºç åˆ†æ</a></span><div class="content"><h3 id="this-node-init"><a href="#this-node-init" class="headerlink" title="this_node::init"></a>this_node::init</h3><p>å‘½åç©ºé—´<code>names</code>æ˜¯åœ¨è¿™é‡Œåˆå§‹åŒ–çš„</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> M_string&amp; remappings, <span class="keyword">uint32_t</span> options)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ThisNode::<span class="built_in">instance</span>().<span class="built_in">init</span>(name, remappings, options);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ThisNodeæ˜¯ä¸€ä¸ªç±»ï¼Œinstance()æ˜¯å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> ThisNode&amp; <span class="title">instance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">static</span> ThisNode singleton;</span><br><span class="line">	<span class="keyword">return</span> singleton;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»è¦å®ç°åœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ThisNode::init</span><span class="params">(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> M_string&amp; remappings, <span class="keyword">uint32_t</span> options)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> *ns_env = <span class="literal">NULL</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _MSC_VER</span></span><br><span class="line">  _dupenv_s(&amp;ns_env, <span class="literal">NULL</span>, <span class="string">&quot;ROS_NAMESPACE&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">  ns_env = <span class="built_in">getenv</span>(<span class="string">&quot;ROS_NAMESPACE&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (ns_env)	<span class="comment">//å¦‚æœè·å¾—ç¯å¢ƒå˜é‡</span></span><br><span class="line">  &#123;</span><br><span class="line">    namespace_ = ns_env;    <span class="comment">// namespace_æ˜¯æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _MSC_VER</span></span><br><span class="line">    <span class="built_in">free</span>(ns_env);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (name.<span class="built_in">empty</span>()) &#123;	<span class="comment">// èŠ‚ç‚¹åä¸èƒ½ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">InvalidNameException</span>(<span class="string">&quot;The node name must not be empty&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  name_ = name;     <span class="comment">// èŠ‚ç‚¹åèµ‹å€¼ï¼Œname_ä¹Ÿæ˜¯ç±»æˆå‘˜å˜é‡ï¼Œåˆå§‹å€¼ä¸º&quot;empty&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">bool</span> disable_anon = <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">//åœ¨è¾“å…¥å‚æ•°remappingsæŸ¥æ‰¾é”®ä¸º&quot;__name&quot;çš„é¡¹</span></span><br><span class="line">  M_string::const_iterator it = remappings.<span class="built_in">find</span>(<span class="string">&quot;__name&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (it != remappings.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    name_ = it-&gt;second;</span><br><span class="line">    disable_anon = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//åœ¨è¾“å…¥å‚æ•°remappingsæŸ¥æ‰¾é”®ä¸º&quot;__ns&quot;çš„é¡¹</span></span><br><span class="line">  it = remappings.<span class="built_in">find</span>(<span class="string">&quot;__ns&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (it != remappings.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    namespace_ = it-&gt;second;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿™é‡Œå¯ä»¥çœ‹å‡ºROS_NAMESPACEä¸æ˜¯å¿…è¦çš„</span></span><br><span class="line">  <span class="keyword">if</span> (namespace_.<span class="built_in">empty</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    namespace_ = <span class="string">&quot;/&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¦‚æœåœ¨ä¸Šé¢èµ‹å€¼ä¸º / ï¼Œæœ€ç»ˆå°±æ˜¯ /  ï¼›å¦åˆ™å°±æ˜¯ /+namespace</span></span><br><span class="line">  namespace_ = (namespace_ == <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    ? std::<span class="built_in">string</span>(<span class="string">&quot;/&quot;</span>) </span><br><span class="line">    : (<span class="string">&quot;/&quot;</span> + namespace_)</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">  std::string error;</span><br><span class="line">  <span class="comment">// å¯¹å‘½åç©ºé—´è¿›è¡ŒéªŒè¯ï¼Œè¿™è‚¯å®šåˆæ˜¯ä¸ªå­—ç¬¦ä¸²å¤„ç†å‡½æ•°</span></span><br><span class="line">  <span class="comment">// æ£€æŸ¥é¦–å­—ç¬¦ï¼Œé¦–å­—ç¬¦åªèƒ½æ˜¯~ / æˆ– alphaï¼Œé€ä¸ªæ£€æŸ¥nameä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºåˆæ³•å­—ç¬¦</span></span><br><span class="line">  <span class="keyword">if</span> (!names::<span class="built_in">validate</span>(namespace_, error))</span><br><span class="line">  &#123;</span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">&quot;Namespace [&quot;</span> &lt;&lt; namespace_ &lt;&lt; <span class="string">&quot;] is invalid: &quot;</span> &lt;&lt; error;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">InvalidNameException</span>(ss.<span class="built_in">str</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// names must be initialized here, because it requires the namespace to already be known so that it can properly resolve names.</span></span><br><span class="line">  <span class="comment">// It must be done before we resolve g_name, because otherwise the name will not get remapped.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†remappingsæ˜ å°„ä¸ºg_remappingså’Œg_unresolved_remappingsä¸¤ä¸ªå˜é‡</span></span><br><span class="line">  names::<span class="built_in">init</span>(remappings);</span><br><span class="line">  <span class="comment">// èŠ‚ç‚¹åä¸èƒ½å«æœ‰ / å’Œ ~</span></span><br><span class="line">  <span class="keyword">if</span> (name_.<span class="built_in">find</span>(<span class="string">&quot;/&quot;</span>) != std::string::npos)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">InvalidNodeNameException</span>(name_, <span class="string">&quot;node names cannot contain /&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (name_.<span class="built_in">find</span>(<span class="string">&quot;~&quot;</span>) != std::string::npos)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">InvalidNodeNameException</span>(name_, <span class="string">&quot;node names cannot contain ~&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç®€å•çš„æ ¼å¼åŒ–æ“ä½œ</span></span><br><span class="line">  name_ = names::<span class="built_in">resolve</span>(namespace_, name_);</span><br><span class="line">  <span class="comment">// å¦‚æœåˆå§‹åŒ–æ—¶çš„optionsé€‰æ‹©çš„æ—¶åŒ¿åèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨èŠ‚ç‚¹åååŠ UNIXæ—¶é—´æˆ³ï¼Œå•ä½æ˜¯çº³ç§’</span></span><br><span class="line">  <span class="keyword">if</span> (options &amp; init_options::AnonymousName &amp;&amp; !disable_anon)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">200</span>];</span><br><span class="line">    <span class="comment">// å…¶å®æ˜¯ros::WallTime::now()  è¿”å›å½“å‰æ—¶é—´çš„çº³ç§’è¡¨ç¤º</span></span><br><span class="line">    <span class="built_in">snprintf</span>(buf, <span class="built_in"><span class="keyword">sizeof</span></span>(buf), <span class="string">&quot;_%llu&quot;</span>, (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)WallTime::<span class="built_in">now</span>().<span class="built_in">toNSec</span>());</span><br><span class="line">    name_ += buf;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//æŠŠèŠ‚ç‚¹å’Œåå­—è”ç³»èµ·æ¥</span></span><br><span class="line">  ros::console::<span class="built_in">setFixedFilterToken</span>(<span class="string">&quot;node&quot;</span>, name_);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åçš„å‡½æ•°æ˜¯:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setFixedFilterToken</span><span class="params">(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  g_extra_fixed_tokens[key] = val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä¸»è¦æ˜¯å¯¹å˜é‡g_extra_fixed_tokensè¿›è¡Œèµ‹å€¼</p>
<h3 id="file-log-init"><a href="#file-log-init" class="headerlink" title="file_log::init"></a>file_log::init</h3><p><code>file_log</code>å°±æ˜¯ä¸ªå‘½åç©ºé—´ï¼Œå‡½æ•°å®šä¹‰åœ¨./src/ros_comm/roscpp/src/libros/file_log.cpp:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">const</span> M_string&amp; remappings)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  std::string log_file_name;</span><br><span class="line">  M_string::const_iterator it = remappings.<span class="built_in">find</span>(<span class="string">&quot;__log&quot;</span>);</span><br><span class="line">  <span class="comment">//åœ¨remappingsä¸­æ‰¾åˆ°é”®ä¸º&quot;__log&quot;çš„é¡¹</span></span><br><span class="line">  <span class="keyword">if</span> (it != remappings.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    log_file_name = it-&gt;second;		<span class="comment">//å¦‚æœæ‰¾åˆ°äº†ï¼Œå°†å¯¹åº”çš„å€¼èµ‹å€¼ç»™log_file_name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// Log filename can be specified on the command line through __log</span></span><br><span class="line">    <span class="comment">// If it&#x27;s been set, don&#x27;t create our own name</span></span><br><span class="line">    <span class="keyword">if</span> (log_file_name.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// Setup the logfile appender</span></span><br><span class="line">      <span class="comment">// Can&#x27;t do this in rosconsole because the node name is not known</span></span><br><span class="line">      <span class="keyword">pid_t</span> pid = <span class="built_in">getpid</span>();		<span class="comment">//è·å–å½“å‰è¿›ç¨‹å·</span></span><br><span class="line">      std::string ros_log_env;</span><br><span class="line">      <span class="comment">//è·å–&quot;ROS_LOG_DIR&quot;</span></span><br><span class="line">      <span class="keyword">if</span> ( <span class="built_in">get_environment_variable</span>(ros_log_env, <span class="string">&quot;ROS_LOG_DIR&quot;</span>))</span><br><span class="line">      &#123;</span><br><span class="line">        log_file_name = ros_log_env + std::<span class="built_in">string</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span>		<span class="comment">//å¦‚æœä¸å­˜åœ¨&quot;ROS_LOG_DIR&quot;è¿™ä¸ªç¯å¢ƒå˜é‡</span></span><br><span class="line">      &#123;			<span class="comment">//è·å–&quot;ROS_HOME&quot;çš„ç¯å¢ƒå˜é‡å€¼</span></span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">get_environment_variable</span>(ros_log_env, <span class="string">&quot;ROS_HOME&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">          log_file_name = ros_log_env + std::<span class="built_in">string</span>(<span class="string">&quot;/log/&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>		<span class="comment">//å¦‚æœä¸å­˜åœ¨ç¯å¢ƒå˜é‡&quot;ROS_HOME&quot;</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// æ— æ³•è·¨å¹³å°?</span></span><br><span class="line">          <span class="comment">// å¦‚æœæ²¡æœ‰è®¾ç½®ä»¥ä¸Šç¯å¢ƒå˜é‡ï¼Œæ—¥å¿—æœ€ç»ˆæ”¾åœ¨ ~/.ros/log</span></span><br><span class="line">          <span class="keyword">if</span>( <span class="built_in">get_environment_variable</span>(ros_log_env, <span class="string">&quot;HOME&quot;</span>) )</span><br><span class="line">          &#123;</span><br><span class="line">            std::string dotros = ros_log_env + std::<span class="built_in">string</span>(<span class="string">&quot;/.ros/&quot;</span>);</span><br><span class="line">            fs::<span class="built_in">create_directory</span>(dotros);</span><br><span class="line">            log_file_name = dotros + <span class="string">&quot;log/&quot;</span>;</span><br><span class="line">            fs::<span class="built_in">create_directory</span>(log_file_name);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// log_file_nameæ˜¯å®Œæ•´è·¯å¾„ï¼Œè¿™é‡Œæ˜¯å– æ–‡ä»¶å=èŠ‚ç‚¹å_</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">1</span>; i &lt; this_node::<span class="built_in">getName</span>().<span class="built_in">length</span>(); i++)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isalnum</span>(this_node::<span class="built_in">getName</span>()[i]))</span><br><span class="line">        &#123;</span><br><span class="line">          log_file_name += <span class="string">&#x27;_&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          log_file_name += this_node::<span class="built_in">getName</span>()[i];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å˜æˆäº†  èŠ‚ç‚¹å_pid_log</span></span><br><span class="line">      <span class="keyword">char</span> pid_str[<span class="number">100</span>];</span><br><span class="line">      <span class="built_in">snprintf</span>(pid_str, <span class="built_in"><span class="keyword">sizeof</span></span>(pid_str), <span class="string">&quot;%d&quot;</span>, pid);  <span class="comment">//å°†pidä»¥æ•´å½¢å˜é‡çš„å½¢å¼å†™å…¥pid_str</span></span><br><span class="line">      log_file_name += std::<span class="built_in">string</span>(<span class="string">&quot;_&quot;</span>) + std::<span class="built_in">string</span>(pid_str) + std::<span class="built_in">string</span>(<span class="string">&quot;.log&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// èµ‹å€¼</span></span><br><span class="line">    log_file_name = fs::<span class="built_in">system_complete</span>(log_file_name).<span class="built_in">string</span>();</span><br><span class="line">    g_log_directory = fs::<span class="built_in">path</span>(log_file_name).<span class="built_in">parent_path</span>().<span class="built_in">string</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™ä¸ªå‡½æ•°å…¶å®å°±æ˜¯ç¡®å®šæ—¥å¿—å­˜æ”¾ç›®å½•å’Œæ—¥å¿—åç§°ï¼Œä¾‹å¦‚ï¼š<br><img src="https://i.loli.net/2019/06/18/5d08f4513674d52984.png" alt=""></p>
<p>é—®é¢˜æ˜¯ä¸ºä»€ä¹ˆæœ‰çš„èŠ‚ç‚¹æœ€åè¿˜è¦åŠ ä¸Šæ—¶é—´æˆ³ï¼Ÿ</p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="http://docs.ros.org/indigo/api/rostime/html/time_8h_source.html">ros time.h</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/11/C++/C++%20%20%E5%9F%BA%E7%A1%80/%E8%A7%A3%E6%9E%90cout,cerr,clog/">è§£æcout,cerr,clog</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/C/C-%E5%9F%BA%E7%A1%80/">C++ åŸºç¡€</a></span><div class="content"><p>clogå’Œcerrä¸»è¦ç”¨äºé”™è¯¯è¾“å‡ºã€‚</p>
<ul>
<li>cout    å†™å…¥æ ‡å‡†è¾“å‡ºæµ stdoutï¼Œæœ‰ç¼“å†²</li>
<li>cerr    å†™å…¥æ ‡å‡†é”™è¯¯æµ stderrï¼Œæ— ç¼“å†²</li>
<li>clog    å†™å…¥æ ‡å‡†é”™è¯¯æµ stderrï¼Œæœ‰ç¼“å†²</li>
</ul>
<h3 id="std-endlçš„å«ä¹‰"><a href="#std-endlçš„å«ä¹‰" class="headerlink" title="std::endlçš„å«ä¹‰"></a>std::endlçš„å«ä¹‰</h3><p>å¸¸å¸¸æœ‰ <code>std::cout&lt;&lt;&quot;test&quot;&lt;&lt;std::endl</code>ï¼Œè¿™æ˜¯æŠŠ<code>test</code>å…ˆæ”¾åˆ°æ ‡å‡†è¾“å‡ºæµï¼Œcoutä¼šå¯¹å†…å®¹è¿›è¡Œç¼“å†²ï¼Œä¸ä¼šç«‹å³è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ï¼æœ‰ä¸¤ç§æ–¹æ³•ç«‹å³æ˜¾ç¤ºï¼šåŠ flushæˆ–endlï¼Œåè€…è¿˜è¦æ¢è¡Œï¼Œè¿™æ˜¯åœ¨ç¼“å†²åŒºä¸æ»¡æ—¶åˆ·æ–°ï¼æœ‰æ—¶ä¸åŠ è¿™ä¸¤ä¸ªå…³é”®å­—ä¹Ÿèƒ½æ˜¾ç¤ºï¼Œæ˜¯å› ä¸ºç¼“å†²åŒºæ»¡äº†æˆ–è€…é•¿æ—¶é—´æœªè¾“å…¥ï¼</p>
<h3 id="precision"><a href="#precision" class="headerlink" title="precision"></a>precision</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cout.precision(3);</span><br><span class="line">cout&lt;&lt;123.567890&lt;&lt;endl;ã€€ã€€// 124</span><br><span class="line">cout&lt;&lt;scientific&lt;&lt;123.567890&lt;&lt;endl;         // 1.236e+02</span><br></pre></td></tr></table></figure>
<p><code>precision</code>æ˜¯æ§åˆ¶è¾“å‡ºæµ®ç‚¹æ•°çš„ç²¾åº¦ï¼Œ3è¡¨ç¤ºå››èˆäº”å…¥åå¾—åˆ°3ä¸ªæœ‰æ•ˆæ•°å­—ï¼ç²¾åº¦æ•°å­—è¶…å‡ºæ•°å­—ä¸ªæ•°æ—¶ï¼Œè¿˜æŒ‰åŸæ¥æ•°å­—ï¼</p>
<p>scientificè¡¨ç¤ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼Œæ­¤æ—¶ç²¾åº¦æ•°å­—æ˜¯å°æ•°ç‚¹ä½æ•°</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/11/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E6%AC%A7%E6%8B%89%E8%A7%92%EF%BC%8C%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%EF%BC%8C%E6%97%8B%E8%BD%AC%E5%90%91%E9%87%8F%EF%BC%8C%E5%9B%9B%E5%85%83%E6%95%B0/">æ¬§æ‹‰è§’ï¼Œæ—‹è½¬çŸ©é˜µï¼Œæ—‹è½¬å‘é‡ï¼Œå››å…ƒæ•°</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/">æ•°å­¦åŸºç¡€</a></span><div class="content"><h2 id="æ¬§æ‹‰è§’"><a href="#æ¬§æ‹‰è§’" class="headerlink" title="æ¬§æ‹‰è§’"></a>æ¬§æ‹‰è§’</h2><p>å‚è€ƒ<a target="_blank" rel="noopener" href="https://www.guyuehome.com/33200">æ¬§æ‹‰è§’çš„ç†è§£</a></p>
<p>å¯¹äºåœ¨ä¸‰ç»´ç©ºé—´é‡Œçš„ä¸€ä¸ªå‚è€ƒç³»ï¼Œä»»ä½•åæ ‡ç³»çš„å–å‘ï¼Œéƒ½å¯ä»¥ç”¨ä¸‰ä¸ªæ¬§æ‹‰è§’æ¥è¡¨ç°ã€‚å‚è€ƒç³»åˆç§°ä¸ºå®éªŒå®¤å‚è€ƒç³»ï¼Œæ˜¯é™æ­¢ä¸åŠ¨çš„ï¼Œè€Œåˆšä½“åæ ‡ç³»åˆ™å›ºå®šäºåˆšä½“ï¼Œéšç€åˆšä½“çš„æ—‹è½¬è€Œæ—‹è½¬ã€‚</p>
<p>è§„å®šï¼šXYZåæ ‡è½´æ˜¯æ—‹è½¬çš„åˆšä½“åæ ‡è½´ï¼›è€Œxyzåæ ‡è½´æ˜¯é™æ­¢ä¸åŠ¨çš„å®éªŒå®¤å‚è€ƒè½´ã€‚</p>
<p>åæ ‡ç³»XYZåŸä¸å‚è€ƒç³»xyzé‡åˆï¼Œæ—‹è½¬åï¼Œç§°xyå¹³é¢ä¸XYå¹³é¢çš„äº¤çº¿ä¸ºäº¤ç‚¹çº¿ï¼Œç”¨è‹±æ–‡å­—æ¯Nä»£è¡¨ã€‚zXZé¡ºè§„çš„æ¬§æ‹‰è§’å¯ä»¥é™æ€åœ°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>Î±æ˜¯xè½´ä¸äº¤ç‚¹çº¿çš„å¤¹è§’ï¼›</p>
</li>
<li><p>Î²æ˜¯zè½´ä¸Zè½´çš„å¤¹è§’ï¼›</p>
</li>
<li><p>Î³æ˜¯äº¤ç‚¹çº¿ä¸Xè½´çš„å¤¹è§’ã€‚</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2023/02/27/YKVEzmnOgStBw3d.png" alt=""><br><img src="https://s2.loli.net/2023/02/27/rxgHq9lu2PmB7ec.gif" alt=""></p>
<p>ç¬¬ä¸€ç»•zè½´æ—‹è½¬Î±ï¼Œç¬¬äºŒç»•äº¤ç‚¹çº¿ï¼ˆå³Xè½´æ—‹è½¬åçš„è½´ï¼‰æ—‹è½¬Î²ï¼Œç¬¬ä¸‰ç»•Zè½´æ—‹è½¬Î³. å› æ­¤ï¼Œæ­¤è¿‡ç¨‹å¯åˆ†è§£ä¸ºä¸‰ä¸ªåŸºæœ¬çš„æ—‹è½¬ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ä»£è¡¨ç»•ç€zè½´çš„æ—‹è½¬ã€ç»•ç€äº¤ç‚¹çº¿çš„æ—‹è½¬ã€ç»•ç€Zè½´çš„æ—‹è½¬ã€‚å³å…¶æ—‹è½¬çŸ©é˜µä¸º<br><img src="https://s2.loli.net/2023/02/27/75vWw3nTkGCRqEt.png" alt=""></p>
<p>å¯¹äºæ¬§æ‹‰è§’ï¼Œæˆ‘ä»¬è§„å®šä»»ä½•ä¸¤ä¸ªè¿ç»­çš„æ—‹è½¬ï¼Œå¿…é¡»æ˜¯ç»•ç€ä¸åŒçš„è½¬åŠ¨è½´æ—‹è½¬ã€‚å› æ­¤ï¼Œä¸€å…±æœ‰ 12=3x2x2 ç§é¡ºè§„ã€‚ç¬¬ä¸€æ¬¡æ—‹è½¬å¯ä»¥ç»•ä¸‰ä¸ªåæ ‡è½´ä¸­çš„ä»»æ„ä¸€è½´è½¬åŠ¨ï¼Œæœ‰3ç§æƒ…å†µï¼Œç¬¬äºŒæ¬¡æ—‹è½¬å¯ä»¥ç»•é™¤ç¬¬ä¸€æ¬¡æ—‹è½¬è½´å¤–çš„ä»»æ„ä¸€è½´è½¬åŠ¨ï¼Œæœ‰2ç§æƒ…å†µï¼Œç¬¬ä¸‰æ¬¡æ—‹è½¬å¯ä»¥ç»•é™¤ç¬¬äºŒæ¬¡æ—‹è½¬è½´å¤–çš„ä»»æ„ä¸€è½´è½¬åŠ¨ï¼Œæœ‰2ç§æƒ…å†µã€‚</p>
<ul>
<li><p>ç»å…¸æ¬§æ‹‰è§’ï¼šz-x-z, x-y-x, y-z-y, z-y-z, x-z-x, y-x-y</p>
</li>
<li><p>æ³°ç‰¹-å¸ƒè±æ©è§’ï¼ˆTaitâ€“Bryan anglesï¼‰ï¼šx-y-z, y-z-x, z-x-y, x-z-y, z-y-x, y-x-z</p>
</li>
</ul>
<font size="4" color="blue"> æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„roll, pitch, yaw å…¶å®æ˜¯æ³°ç‰¹-å¸ƒè±æ©è§’ï¼Œæˆ‘ç®€ç§°ä¹‹ä¸ºTBè§’  </font>

<p>å¯ä»¥çœ‹å‡ºä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼šç»å…¸æ¬§æ‹‰è§’çš„ç¬¬ä¸€ä¸ªæ—‹è½¬è§’åº¦å’Œç¬¬ä¸‰ä¸ªæ—‹è½¬è§’åº¦éƒ½æ˜¯å›´ç»•åŒä¸€ä¸ªè½´çš„ï¼Œè€ŒTait-Bryanè§’ä½¿ç”¨ä¸‰ä¸ªè½´ä¸Šçš„æ—‹è½¬è§’åº¦å»è¡¨ç¤º</p>
<ul>
<li><strong>å†…æ—‹å’Œå¤–æ—‹</strong></li>
</ul>
<p>åŒæ ·çš„ä¸€ä¸ªæ—‹è½¬ï¼ŒæŒ‰æ—‹è½¬çš„åæ ‡ç³»åˆå¯åˆ†ä¸ºå†…æ—‹å’Œå¤–æ—‹ã€‚</p>
<p>å†…æ—‹æ˜¯åŸºäºè‡ªèº«åæ ‡ç³»çš„æ—‹è½¬ï¼Œæ—‹è½¬è½´æ˜¯åŠ¨æ€çš„ã€‚å†…æ—‹çš„æ—‹è½¬çŸ©é˜µæ˜¯æŒ‰é¡ºåºå³ä¹˜ï¼Œ</p>
<p>å¤–æ—‹æ˜¯åŸºäºå¤–éƒ¨åæ ‡ç³»çš„æ—‹è½¬ï¼Œæ—‹è½¬è½´å§‹ç»ˆä¸å˜ï¼Œä¹Ÿå°±æ˜¯RPYã€‚å¤–æ—‹çš„æ—‹è½¬çŸ©é˜µæ˜¯æŒ‰é¡ºåºå·¦ä¹˜ã€‚</p>
<p>æ‰€ä»¥æ¬§æ‹‰è§’è¦çŸ¥é“æ—‹è½¬é¡ºåºå’Œæ˜¯å¦å®šè½´æ—‹è½¬ï¼Œè€Œæ—‹è½¬çŸ©é˜µå’Œå››å…ƒæ•°åˆ™æ˜¯ä¸€ä¸ªå§¿æ€å°±å¯¹åº”çš„ä¸€ä¸ªæ—‹è½¬çŸ©é˜µæˆ–å››å…ƒæ•°ã€‚é™¤äº†ä¸‡å‘é”é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯SLAMä¸å¸¸ç”¨æ¬§æ‹‰è§’çš„å¦ä¸€ä¸ªåŸå› ã€‚</p>
<p>åœ¨ä½¿ç”¨æ¬§æ‹‰è§’çš„åœºåˆï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é‡‡å–å¤–æ—‹ XYZ</p>
<p><br></p>
<p><img src="https://i.loli.net/2020/03/03/itMb4fy9uzjs6Rl.png" alt="è½¬æ¢"></p>
<h2 id="æ¬§æ‹‰è§’å’Œæ—‹è½¬çŸ©é˜µ"><a href="#æ¬§æ‹‰è§’å’Œæ—‹è½¬çŸ©é˜µ" class="headerlink" title="æ¬§æ‹‰è§’å’Œæ—‹è½¬çŸ©é˜µ"></a>æ¬§æ‹‰è§’å’Œæ—‹è½¬çŸ©é˜µ</h2><p>ã€ŠSLAMåå››è®²ã€‹æ²¡æœ‰è®²åˆ°è¿™éƒ¨åˆ†ã€‚åæ ‡ç³»Aæ—‹è½¬åˆ°åæ ‡ç³»Bï¼Œå…ˆç»•Zè½´æ—‹è½¬äº†<code>yaw</code>ï¼Œè¿™é‡Œéµå¾ªå³æ‰‹æ³•åˆ™ï¼Œå¤§æ‹‡æŒ‡æœåæ ‡ç³»æ–¹å‘ï¼Œå››æŒ‡ä»£è¡¨æ­£å‘ã€‚æˆ–è€…è¯´æ­£å‘æ—‹è½¬æ˜¯ä»¥æ²¿Xè½´æ–¹å‘çœ‹ï¼Œé¡ºæ—¶é’ˆæ—‹è½¬ä¸ºæ­£å‘ï¼Œå¦åˆ™ä¸ºè´Ÿå‘ã€‚é‚£ä¹ˆç›¸åº”çš„æ—‹è½¬çŸ©é˜µä¸º<br><img src="https://s2.loli.net/2022/12/03/YPXpVmfCQM8ehEg.png" alt="ç»•åæ ‡è½´æ—‹è½¬çš„è½´åæ ‡æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥å¯¹åº”ä½ç½®æ˜¯1"><br>ä¹‹åç»•æ—‹è½¬ååæ ‡ç³»çš„Yè½´æ—‹è½¬äº†<code>pitch</code>ï¼Œä¹‹åç»•æ—‹è½¬ååæ ‡ç³»Xè½´æ—‹è½¬äº†<code>roll</code>ï¼Œæœ€ç»ˆçš„æ—‹è½¬çŸ©é˜µå¦‚ä¸‹ï¼Œå³ä¾æ¬¡å·¦ä¹˜ç›¸åº”çš„çŸ©é˜µ<br><img src="https://s2.loli.net/2022/12/03/f7nZSeHrlozGwic.png" alt=""></p>
<h2 id="å…¸å‹ä¸¾ä¾‹"><a href="#å…¸å‹ä¸¾ä¾‹" class="headerlink" title="å…¸å‹ä¸¾ä¾‹"></a>å…¸å‹ä¸¾ä¾‹</h2><p>å¦‚å›¾ï¼Œå¤§åæ ‡ç³»æ˜¯<code>base_link</code>ï¼Œå°çš„æ˜¯ <code>camera</code><br><img src="https://s2.loli.net/2023/07/06/tYR1Q7Tf692Ekha.png" alt=""></p>
<p>æˆ‘ä»¬å¸Œæœ›çš„åæ ‡ç³»å…³ç³»æ˜¯è¿™æ ·çš„<br><img src="https://s2.loli.net/2023/07/06/chvgRXyLFPlbUTw.png" alt=""><br>å˜åŒ–çš„è¿‡ç¨‹æ˜¯<code>camera</code>åæ ‡ç³»åšå†…æ—‹æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ç»•è‡ªèº«è½´æŒ‰ç…§Z-Y-Xçš„é¡ºåºæ—‹è½¬ï¼Œå³å…ˆç»•è‡ªèº«è½´Zï¼Œå†ç»•è‡ªèº«è½´Yï¼Œæœ€åç»•è‡ªèº«è½´Xï¼Œå¯å¾—æ—‹è½¬çŸ©é˜µ(å†…æ—‹æ˜¯å³ä¹˜)<br><img src="https://s2.loli.net/2023/07/06/wAg68QvJCH4G5r2.png" alt=""><br><img src="https://s2.loli.net/2023/07/06/3fTsYtUczbnXa65.png" alt=""></p>
<p>åˆ¤æ–­æ¬§æ‹‰è§’çš„æ­£è´Ÿ: ä½¿ç”¨å³æ‰‹ç³»ï¼Œæ—‹è½¬è½´æ­£æ–¹å‘é¢å¯¹è§‚å¯Ÿè€…æ—¶ï¼Œé€†æ—¶é’ˆæ–¹å‘çš„æ—‹è½¬æ˜¯æ­£ã€é¡ºæ—¶é’ˆæ–¹å‘çš„æ—‹è½¬æ˜¯è´Ÿã€‚è¿™é‡Œå…ˆç»•Zè½´è½¬ -90Â°ï¼Œå†ç»•Xè½´è½¬-90Â°ï¼Œ<code>camera</code>å°±èƒ½å˜æˆå¸Œæœ›çš„æ ·å­ã€‚</p>
<p>æœ€ç»ˆçš„æ—‹è½¬çŸ©é˜µ<br><img src="https://s2.loli.net/2023/07/06/f6DoymCvgOKAbxa.png" alt=""><br>æ‰“å¼€ç½‘ç«™<a target="_blank" rel="noopener" href="https://www.andre-gaschler.com/rotationconverter/">rotationconverter</a>ï¼Œåœ¨å·¦ä¸Šè§’çš„æ—‹è½¬çŸ©é˜µè¾“å…¥è®¡ç®—çš„ç»“æœï¼Œåœ¨å³ä¸‹è§’å‡ºç°<code>XYZ</code>å¯¹åº”çš„ç»“æœï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯<code>ZYX</code>ï¼Œå³<code>[ x: -90, y: 0, z: -90 ]</code>ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯ç®€å•çš„æŠŠ<code>XYZ</code>çš„ç»“æœå€’åºå°±è¡Œäº†ã€‚</p>
<p>æˆ‘ä»¬è¦çš„æ¬§æ‹‰è§’<code>rpy</code>å°±æ˜¯ <code>(-1.57,  0,  -1.57)</code></p>
<h2 id="æ—‹è½¬å‘é‡"><a href="#æ—‹è½¬å‘é‡" class="headerlink" title="æ—‹è½¬å‘é‡"></a>æ—‹è½¬å‘é‡</h2><p>æ—‹è½¬çŸ©é˜µæœ‰å‡ ä¸ªç¼ºç‚¹ï¼š<code>SO(3)</code>çš„æ—‹è½¬çŸ©é˜µæœ‰9ä¸ªé‡ï¼Œä½†ä¸€æ¬¡æ—‹è½¬åªæœ‰3ä¸ªè‡ªç”±åº¦ã€‚å› æ­¤ï¼Œè¿™ç§è¡¨è¾¾å¼å†—ä½™ã€‚è€Œä¸”å¯¹äºæ—‹è½¬çŸ©é˜µè‡ªèº«ä¹Ÿæœ‰çº¦æŸï¼Œå®ƒå¿…é¡»æ˜¯æ­£äº¤çŸ©é˜µï¼Œä¸”è¡Œåˆ—å¼ä¸º1ï¼Œè¿™äº›çº¦æŸä¼šä½¿æ±‚è§£å˜å¾—å›°éš¾ã€‚æ‰©å±•åˆ°å˜æ¢çŸ©é˜µï¼Œå°±æ˜¯ç”¨16ä¸ªé‡è¡¨è¾¾äº†6ä¸ªè‡ªç”±åº¦çš„å˜æ¢ã€‚</p>
<p>ä¸Šé¢è¯´çš„æ¬§æ‹‰è§’æ˜¯ç»•ä¸‰ä¸ªæ­£äº¤è½´çš„ä¾æ¬¡æ—‹è½¬ï¼Œå…¶å®ä»»æ„æ—‹è½¬éƒ½å¯ä»¥ç”¨ä¸€ä¸ªæ—‹è½¬è½´å’Œä¸€ä¸ªæ—‹è½¬è§’æ¥è¡¨ç¤ºã€‚è¿™åªéœ€è¦ä¸€ä¸ªæ—‹è½¬å‘é‡å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªä¸‰ç»´å‘é‡è¡¨ç¤ºäº†æ—‹è½¬ï¼Œå†åŠ ä¸Šä¸€ä¸ªå¹³ç§»å‘é‡ï¼Œè¿™æ ·å°±æ˜¯6ä¸ªè‡ªç”±åº¦ï¼Œæ²¡æœ‰å†—ä½™äº†ã€‚</p>
<h2 id="å››å…ƒæ•°"><a href="#å››å…ƒæ•°" class="headerlink" title="å››å…ƒæ•°"></a>å››å…ƒæ•°</h2><p>Quaternionç”¨ä¸€ä¸ªå†—ä½™çš„å˜é‡è§£å†³äº†æ¬§æ‹‰è§’çš„Singularityé—®é¢˜ï¼Œåœ¨è¿ç®—æ’å€¼æ—¶ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œå› æ­¤<strong>å››å…ƒæ•°æ˜¯ç¨‹åºä¸­è¡¨ç¤ºæ—‹è½¬æœ€å¸¸ç”¨çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•</strong></p>
<p><strong>å››å…ƒæ•°â€”â€”&gt;æ—‹è½¬çŸ©é˜µâ€”â€”&gt;æ¬§æ‹‰è§’</strong> è¿™ä¸ªè¿‡ç¨‹è½¬å‡ºæ¥çš„æ¬§æ‹‰è§’ï¼Œä¸å¯èƒ½æ˜¯æƒ³è¦çš„ã€‚å› ä¸ºåŒä¸€ä¸ªå››å…ƒæ•°ï¼Œå¯ä»¥ç”¨2ä¸ªæ¬§æ‹‰è§’æ¥è¡¨ç¤ºï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¾—åˆ°çš„ç»“æœæœ‰å¯èƒ½æ˜¯ç”¨è½¬è§’å¤§äº2Ï€çš„æ–¹å¼è¡¨è¾¾çš„ï¼</p>
<p>æœ€å¥½ä¸è¦ç›´æ¥ä»å››å…ƒæ•°è½¬æ¬§æ‹‰è§’åï¼Œå¤„ç†å‘é‡çš„æ—‹è½¬ï¼</p>
<p>å››å…ƒæ•°åŠ å‡æ³•ï¼š å››å…ƒæ•°çš„åŠ æ³•åªéœ€è¦å°†åˆ†é‡ç›¸åŠ å°±å¯ä»¥äº†</p>
<p>å››å…ƒæ•°çš„å…±è½­æ˜¯è®©å››å…ƒæ•°çš„å‘é‡éƒ¨åˆ†å–è´Ÿï¼Œè®°åš <code>(w, -x, -y, -z)</code>ã€‚ å››å…ƒæ•°å’Œå®ƒçš„å…±è½­ä»£è¡¨ç›¸åçš„è§’ä½ç§»ï¼Œå› ä¸ºç›¸å½“äºæ—‹è½¬è½´åå‘ã€‚</p>
<p>å››å…ƒæ•°çš„é€†è¡¨ç¤ºä¸€ä¸ªåå‘çš„æ—‹è½¬ï¼Œå®šä¹‰ä¸ºå››å…ƒæ•°çš„å…±è½­é™¤ä»¥å®ƒçš„æ¨¡çš„å¹³æ–¹ï¼Œå››å…ƒæ•°å’Œé€†çš„ä¹˜ç§¯ä¸ºå®æ•° 1ã€‚<font size="4" color="blue"> å¦‚æœæ˜¯å•ä½å››å…ƒæ•°ï¼Œé‚£ä¹ˆé€†å°±æ˜¯å…±è½­  </font></p>
<p>å››å…ƒæ•°çš„æ’å€¼ä¸èƒ½ç”¨ç®€å•çš„çº¿æ€§æ’å€¼ï¼Œè€Œæ˜¯ç”¨slerpã€‚å› ä¸ºå½“æ—¶é—´tåŒ€é€Ÿå˜åŒ–æ—¶ï¼Œä»£è¡¨å§¿æ€çŸ¢é‡çš„è§’é€Ÿåº¦å˜åŒ–å¹¶ä¸å‡åŒ€</p>
<p><code>Eigen::Quaterniond::Identity().slerp(t, q_last_curr)</code>èƒ½å¤Ÿå®ç°å››å…ƒæ•°çš„çƒé¢æ’å€¼ã€‚<br><code>t âˆˆ [0, 1]</code>ä¸ºæ’å€¼ç‚¹ï¼Œ<code>q_last_curr</code>ä¸ºä¸¤å¸§ä¹‹é—´çš„æ—‹è½¬å››å…ƒæ•°ï¼Œå³é’ˆå¯¹ä¸¤å¸§ä¹‹é—´çš„æ—‹è½¬è€Œçº¿æ€§æ’å…¥ä¸€ä¸ªå››å…ƒæ•°ã€‚</p>
<p>cartographerä¸­é‡æ–°å®ç°çš„<code>slerp</code><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">std::array&lt;T, 4&gt; <span class="title">SlerpQuaternions</span><span class="params">(<span class="keyword">const</span> T* <span class="keyword">const</span> start, </span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> T* <span class="keyword">const</span> end,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">double</span> factor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// Angle &#x27;theta&#x27; is the half-angle &quot;between&quot; quaternions. It can be computed</span></span><br><span class="line">  <span class="comment">// as the arccosine of their dot product.</span></span><br><span class="line">  <span class="keyword">const</span> T cos_theta = start[<span class="number">0</span>] * end[<span class="number">0</span>] + start[<span class="number">1</span>] * end[<span class="number">1</span>] +</span><br><span class="line">                      start[<span class="number">2</span>] * end[<span class="number">2</span>] + start[<span class="number">3</span>] * end[<span class="number">3</span>];</span><br><span class="line">  <span class="comment">// Avoid using ::abs which would cast to integer.</span></span><br><span class="line">  <span class="keyword">const</span> T abs_cos_theta = ceres::<span class="built_in">abs</span>(cos_theta);</span><br><span class="line">  <span class="comment">// If numerical error brings &#x27;cos_theta&#x27; outside [-1 + epsilon, 1 - epsilon]</span></span><br><span class="line">  <span class="comment">// interval, then the quaternions are likely to be collinear.</span></span><br><span class="line">  <span class="function">T <span class="title">prev_scale</span><span class="params">(<span class="number">1.</span> - factor)</span></span>;</span><br><span class="line">  <span class="function">T <span class="title">next_scale</span><span class="params">(factor)</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (abs_cos_theta &lt; <span class="built_in">T</span>(<span class="number">1.</span> - <span class="number">1e-5</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> T theta = <span class="built_in">acos</span>(abs_cos_theta);</span><br><span class="line">    <span class="keyword">const</span> T sin_theta = <span class="built_in">sin</span>(theta);</span><br><span class="line">    prev_scale = <span class="built_in">sin</span>((<span class="number">1.</span> - factor) * theta) / sin_theta;</span><br><span class="line">    next_scale = <span class="built_in">sin</span>(factor * theta) / sin_theta;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (cos_theta &lt; <span class="built_in">T</span>(<span class="number">0.</span>)) &#123;</span><br><span class="line">    next_scale = -next_scale;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;&#123;prev_scale * start[<span class="number">0</span>] + next_scale * end[<span class="number">0</span>],</span><br><span class="line">           prev_scale * start[<span class="number">1</span>] + next_scale * end[<span class="number">1</span>],</span><br><span class="line">           prev_scale * start[<span class="number">2</span>] + next_scale * end[<span class="number">2</span>],</span><br><span class="line">           prev_scale * start[<span class="number">3</span>] + next_scale * end[<span class="number">3</span>]&#125;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/55790406">å››å…ƒæ•°å’Œæ¬§æ‹‰è§’äº’ç›¸è½¬æ¢</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hzwwpgmwy/article/details/101547949">æ¬§æ‹‰è§’ä¸æ—‹è½¬çŸ©é˜µ</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/11/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2/">æ­å»ºHexoåšå®¢</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/">å¸¸ç”¨å·¥å…·</a></span><div class="content"><h4 id="Disqusè¯„è®º"><a href="#Disqusè¯„è®º" class="headerlink" title="Disqusè¯„è®º"></a>Disqusè¯„è®º</h4><p>æŒ‰<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d68de067ea74">è¿™ä¸ªæ•™ç¨‹</a>æ“ä½œå³å¯</p>
<h4 id="å¿«æ·ä¸Šä¼ å›¾ç‰‡"><a href="#å¿«æ·ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="å¿«æ·ä¸Šä¼ å›¾ç‰‡"></a>å¿«æ·ä¸Šä¼ å›¾ç‰‡</h4><p>ä»¥å‰ä¸€ç›´ç”¨flickerï¼Œæ¯æ¬¡éƒ½åˆ°ç½‘ç«™ä¸Šä¼ ï¼Œç„¶åå¤åˆ¶å›¾ç‰‡çš„ç½‘å€ï¼Œæ“ä½œå®åœ¨å¤ªéº»çƒ¦äº†ï¼Œè€Œä¸”flickeræœ‰ä¸Šä¼ å›¾ç‰‡é™åˆ¶ã€‚ä»Šå¤©ç»ˆäºçœ‹åˆ°ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•ï¼Œä½¿ç”¨ä¸€ä¸ª<code>Hexo Editor</code>çš„å·¥å…·ï¼Œæˆªå›¾ä¹‹åå¤åˆ¶å›¾ç‰‡æ–‡æœ¬ï¼Œæ¯”å¦‚<code>![](/20190616210334907/20190616091008239.png)</code>ï¼Œç„¶åå³é”®é€‰æ‹©<code>ä¸Šä¼ SM.MS</code>ï¼Œè¿™æ—¶å›¾ç‰‡ä¼šä¸Šä¼ åˆ°å›¾åºŠSM.MSï¼Œè¿™ä¸ªå›¾åºŠåº”å½“æ²¡æœ‰ä¸Šä¼ é™åˆ¶ï¼Œå¹¶ä¸”æŠŠå›¾ç‰‡çš„ç½‘å€ç›´æ¥å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š<code>![](https://i.loli.net/2019/06/16/5d064094f300180845.png)</code></p>
<p><img src="https://i.loli.net/2019/06/16/5d0640fb7ae3354419.png" alt=""></p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title=" é—®é¢˜ "></a><center/> é—®é¢˜ <center></h2><h4 id="hexo-g-æŠ¥é”™"><a href="#hexo-g-æŠ¥é”™" class="headerlink" title="hexo g æŠ¥é”™"></a>hexo g æŠ¥é”™</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: ejs:13</span><br><span class="line">    11|         &lt;title&gt;&lt;%-: post.title %&gt;&lt;/title&gt;</span><br><span class="line">    12|         &lt;pubTime&gt;&lt;%= post.date.toDate().toISOString() %&gt;&lt;/pubTime&gt;</span><br><span class="line"> &gt;&gt; 13|         &lt;%if(post.tags)&#123; post.tags.toArray().forEach(function(tag)&#123; %&gt;</span><br><span class="line">    14|         &lt;tag&gt;&lt;%= tag.name %&gt;&lt;/tag&gt;</span><br><span class="line">    15|          &lt;% &#125;)&#125;/*%&gt;</span><br><span class="line">    16|          &lt;content&gt;&lt;%-: post.content%&gt;&lt;/content&gt;</span><br></pre></td></tr></table></figure>
<p>å°†hexo-generator-baidu-sitemapæ–‡ä»¶åˆ é™¤æ‰å³å¯</p>
<p>å¦ä¸€ä¸ªå¯èƒ½çš„åŸå› ï¼šæŠŠä¸€ä¸ªæœªå†™å®Œçš„.mdæ–‡ä»¶æ”¾åˆ°äº†_postsæ–‡ä»¶å¤¹åŒåä¸‹ï¼Œä¹Ÿå°±æ˜¯æ”¾åˆ°äº†sourceæ–‡ä»¶å¤¹ä¸‹</p>
<h4 id="hexo-dæŠ¥é”™"><a href="#hexo-dæŠ¥é”™" class="headerlink" title="hexo dæŠ¥é”™"></a>hexo dæŠ¥é”™</h4><p><img src="https://i.loli.net/2019/06/21/5d0cd701e9f3d70056.png" alt=""><br>ç»“æœæ˜¯gité…ç½®å’ŒSSH Keyçš„é—®é¢˜</p>
<p>è¿˜åœ¨hexoåšå®¢çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œ<code>ssh-keygen</code>ï¼Œæ ¹æ®æç¤ºä¸€ç›´æŒ‰å›è½¦å³å¯ï¼Œä¸€èˆ¬ç”Ÿæˆçš„ä½ç½®åœ¨<code>C:\Users\username\.ssh</code>ï¼Œæ‰¾åˆ°<code>id_rsa.pub</code>åæ‰“å¼€ï¼Œåˆ°githubç½‘ç«™çš„Settingsä¸­æ–°å»ºä¸€ä¸ªSSH keyï¼Œå°†id_rsa.pubä¸­çš„å†…å®¹å¤åˆ¶åˆ°Keyä¸­<br><img src="https://i.loli.net/2019/06/21/5d0cd7ef388ea48304.png" alt=""><br>ç”¨<code>git config --global</code>é…ç½®gitçš„ç”¨æˆ·åå’Œé‚®ç®±</p>
<p>é€šè¿‡å‘½ä»¤<code>ssh-add</code>è§£å†³æ¯æ¬¡æ“ä½œéƒ½éœ€è¦è¾“å…¥keyçš„å¯†ç çš„é—®é¢˜</p>
<p>ä½¿ç”¨<code>ssh -v git@github.com</code>æµ‹è¯•è¿æ¥ï¼Œå¦‚æœçœ‹åˆ°éªŒè¯é€šè¿‡å°±æ˜¯æˆåŠŸäº†</p>
<p><br><br></p>
<h2 id="algoliaæœç´¢"><a href="#algoliaæœç´¢" class="headerlink" title="algoliaæœç´¢"></a>algoliaæœç´¢</h2><p>æ•´ä¸ªé…ç½®è¿‡ç¨‹å‚è§<a target="_blank" rel="noopener" href="https://yfzhou.coding.me/2018/08/08/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E9%9B%86%E6%88%90Algolia%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%EF%BC%89/"></a></p>
<p>å¦‚æœæœç´¢æˆåŠŸï¼Œåœ¨algoliaç½‘ç«™çš„<code>indices</code>é¡¹ç›®å¯ä»¥æµ‹è¯•æœç´¢ç»“æœ<br><img src="https://live.staticflickr.com/65535/48043054416_ec20fa2e56_b.jpg" alt=""></p>
<h4 id="é—®é¢˜1"><a href="#é—®é¢˜1" class="headerlink" title="é—®é¢˜1"></a>é—®é¢˜1</h4><p>å¼€å§‹ä¸€ç›´å®‰è£…algoliaå¤±è´¥ï¼Œå‘ç°æ˜¯æŠŠ<code>package.json</code>è®¾ç½®ä¸ºåªè¯»äº†</p>
<h4 id="é—®é¢˜2"><a href="#é—®é¢˜2" class="headerlink" title="é—®é¢˜2"></a>é—®é¢˜2</h4><p>å®‰è£…é…ç½®æˆåŠŸåï¼Œæ‰“å¼€åšå®¢å‘ç°æœ‰äº†æœç´¢æŒ‰é’®ä½†æ²¡å‡ºç°æœç´¢æ¡ï¼Œåœ¨ç½‘é¡µä¸ŠæŒ‰F12æ‰“å¼€ç½‘é¡µæºç å‘ç°æœ‰æŠ¥é”™ï¼Œæ‰€ä»¥æ˜¯æµè§ˆå™¨é—®é¢˜è€Œä¸æ˜¯algoliaçš„é—®é¢˜ï¼<br><img src="https://live.staticflickr.com/65535/48043084398_0ff2c4d3e1_b.jpg" alt=""><br><img src="https://live.staticflickr.com/65535/48043084293_f2450f1c71_b.jpg" alt=""><br>è§£å†³æ–¹æ³•ï¼šè¿˜ç”¨npmå®‰è£…hexoæ’ä»¶<code>hexo-all-minifier</code>ï¼Œé‡æ–°æ‰§è¡Œ<code>hexo clean</code>å’Œ<code>hexo algolia</code>ï¼Œå†<code>hexo g</code>   <code>hexo d</code>ï¼Œæ‰“å¼€åšå®¢åº”è¯¥æˆåŠŸäº†ï¼</p>
<h4 id="é—®é¢˜3"><a href="#é—®é¢˜3" class="headerlink" title="é—®é¢˜3"></a>é—®é¢˜3</h4><p>æœç´¢æ—¶ä¼šå‘ç°ä¸åœ¨<code>post</code>ç›®å½•çš„æ–‡ç« ä¹Ÿèƒ½æœç´¢åˆ°ï¼Œä½†æ˜¯æ‰“å¼€æ˜¯404</p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLXbU-2B80FvDjD_RiuNwsSQ4eF8pkwAIa">Youtubeä¸Šçš„è§†é¢‘æ•™ç¨‹</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/09/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/Latex%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/">Latex å¸¸ç”¨è¯­æ³•</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-09</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/">å¸¸ç”¨å·¥å…·</a></span><div class="content"><h2 id="å¸¸è§ç¬¦å·"><a href="#å¸¸è§ç¬¦å·" class="headerlink" title="å¸¸è§ç¬¦å·"></a>å¸¸è§ç¬¦å·</h2><p>\hat x   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\hat x</script><br>\bar x     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;    <script type="math/tex">\bar x</script><br>\div     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;    <script type="math/tex">\div</script><br>\times         &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\times</script><br>\sin\theta &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\sin\theta</script><br>a\in A   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;      <script type="math/tex">a\in A</script><br>\frac{2}{4}  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\frac{2}{4}</script><br>ç‚¹ä¹˜ï¼ša \cdot b<br>å‰ä¹˜ï¼ša \times b<br>é™¤ä»¥ï¼ša \div b</p>
<script type="math/tex; mode=display">\dots{}$$     \hat{} æˆ– \widehat{}

æ¨ªçº¿ $$\dots{} $$     \overline{}

æ³¢æµªçº¿ $$ \dots{}$$     \widetilde{}

$$ \dots{}$$     \dots{}

## ç©ºæ ¼å’Œæ‹¬å·

ç›´æ¥æ‰“ç©ºæ ¼æ˜¯æ— æ•ˆçš„ï¼Œè¦ç”¨å­—ç¬¦`\qquad`æ˜¯ä¸¤ä¸ªmå®½åº¦çš„ç©ºæ ¼ï¼Œ`\quad`æ˜¯ä¸€ä¸ªmå®½åº¦ï¼Œæ›´å¸¸ç”¨çš„æ˜¯`\ `

mçš„å®½åº¦æŒ‡åœ¨å½“å‰å­—ä½“ä¸‹å­—ç¬¦â€œMâ€çš„å®½åº¦ã€‚

å°æ‹¬å·:     \left( \frac{a}{b} \right)         $$\left( \frac{a}{b} \right)</script><p>ä¸­æ‹¬å·:     \left[ \frac{a}{b} \right]      <script type="math/tex">\left[ \frac{a}{b} \right]</script><br>å¤§æ‹¬å·:   \left{ \frac{a}{b} \right}        <script type="math/tex">\left\{ \frac{a}{b} \right\}</script></p>
<h2 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h2><p>\xi     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\xi</script><br>\pi     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\pi</script><br>\alpha &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\alpha</script><br>\beta  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\beta</script><br>\lambda  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; <script type="math/tex">\lambda</script><br>\gamma \delta \epsilon \zeta \eta \theta  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;    <script type="math/tex">\gamma \delta \epsilon \zeta \eta \theta</script><br>\Sigma\sigma\varsigma     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;        <script type="math/tex">\Sigma\sigma\varsigma</script></p>
<h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>\mathbb Z  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;    <script type="math/tex">\mathbb Z</script>    æ•´æ•°é›†</p>
<h2 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h2><p>\bigoplus  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\bigoplus</script><br>\oplus  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  <script type="math/tex">\oplus</script>   </p>
<h2 id="å˜ä½“"><a href="#å˜ä½“" class="headerlink" title="å˜ä½“"></a>å˜ä½“</h2><p>æ–œä½“ &emsp;&emsp;&emsp;  \mathit{0123456789}  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\mathit{0123456789}</script></p>
<p>ç²—ä½“ &emsp;&emsp;&emsp;  \boldsymbol{0123456789} &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\boldsymbol{0123456789}</script></p>
<p>èŠ±ä½“ï¼Œç”¨äºé›†åˆ  &emsp;&emsp;&emsp; \mathbb{ABCD}     &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;    <script type="math/tex">\mathbb{ABCD}</script></p>
<h2 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a>å‘é‡</h2><p><code>\vec&#123;&#125;</code>å¯ä»¥è¡¨ç¤ºå‘é‡ï¼Œä½¿ç”¨æ›´ä¸ºæ™®éçš„æ˜¯ï¼š</p>
<p>\overrightarrow{AB}   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\overrightarrow{AB}</script></p>
<p>\overleftarrow{AB}    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;   <script type="math/tex">\overleftarrow{AB}</script> </p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ LaTeX ä¸­è¾“å…¥å‘é‡<code>\vec x</code>ï¼Œå‘é‡ x ä¸Šå¤´ä¼šå‡ºç°ä¸€ä¸ªç®­å¤´è€ŒéåŠ ç²—:  <script type="math/tex">\vec x</script></p>
<p>è¦ä½¿ç”¨å‘é‡çš„ç²—ä½“æ ¼å¼ï¼Œæ”¹ç”¨ <code>\boldsymbol</code> å³å¯ã€‚</p>
<p>èŒƒæ•°ï¼š \Vert x \Vert        <script type="math/tex">\Vert x \Vert</script></p>
<h2 id="æ¢è¡Œå‘½ä»¤"><a href="#æ¢è¡Œå‘½ä»¤" class="headerlink" title="æ¢è¡Œå‘½ä»¤"></a>æ¢è¡Œå‘½ä»¤</h2><p><code>\\</code>ï¼šæ¢è¡Œï¼Œåœ¨åšå®¢ç¯å¢ƒä¸‹ä¸å¥½ç”¨<br><code>\\[offset]</code>ï¼šæ¢è¡Œï¼Œå¹¶ä¸”ä¸ä¸‹ä¸€è¡Œçš„è¡Œé—´è·ä¸ºåŸæ¥è¡Œé—´è·+offset<br><code>\newline</code>ï¼šä¸\ç›¸åŒï¼Œèƒ½åœ¨åšå®¢ç¯å¢ƒä¸‹æ¢è¡Œ<br><code>\linebreak</code>ï¼šå¼ºåˆ¶æ¢è¡Œï¼Œä¸\newlineçš„åŒºåˆ«ä¸º\linebreakçš„å½“å‰è¡Œåˆ†æ•£å¯¹é½</p>
<p><code>\\</code>ä¼šè‡ªåŠ¨è®©ä¸‹ä¸€è¡Œç¼©è¿›ï¼Œä¹Ÿå°±æ˜¯å½¢æˆä¸€ä¸ªæ®µè½ï¼Œæœ‰æ—¶ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„<br>å›è½¦å‡ºä¸€ä¸ªç©ºè¡Œï¼Œä¸ä¼šé€ æˆç¼©è¿›</p>
<h2 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h2><p><code>\left[ \begin&#123;matrix&#125; R &amp; t \\   0 &amp; 1 \\ \end&#123;matrix&#125; \right]</code></p>
<script type="math/tex; mode=display">\left[ \begin{matrix}   R & t \\   0 & 1 \\ \end{matrix}  \right]</script><h2 id="å¸¸ç”¨å…¬å¼"><a href="#å¸¸ç”¨å…¬å¼" class="headerlink" title="å¸¸ç”¨å…¬å¼"></a>å¸¸ç”¨å…¬å¼</h2><p>\mathop{min}\limits_{x}{\frac{1}{2}\left|f(x)\right|_2^2}\tag1</p>
<script type="math/tex; mode=display">\mathop{min}\limits_{x}{\frac{1}{2}\left\|f(x)\right\|_2^2} \tag1</script><p>\varepsilon^* = arg\ \mathop{max} \limits<em>{\varepsilon \in \mathcal{W}} \sum\limits</em>{k=1}^{K}M\</p>
<script type="math/tex; mode=display">\varepsilon^* = arg\ \mathop{max} \limits_{\varepsilon \in \mathcal{W}} \sum\limits_{k=1}^{K}M\</script><h2 id="æ•°å­¦æ¨¡å¼"><a href="#æ•°å­¦æ¨¡å¼" class="headerlink" title="æ•°å­¦æ¨¡å¼"></a>æ•°å­¦æ¨¡å¼</h2><p>ç”¨ä¸¤ä¸ªç¾å…ƒæ‹¬å·æ‹¬èµ·æ¥æ˜¯ä¸€èˆ¬çš„æ•°å­¦æ¨¡å¼ï¼Œä¾‹å¦‚ $y=x+1$ ï¼Œç»“æœæ˜¯æ–œä½“çš„ï¼Œè¿™æ˜¯è¡Œå†…æ¨¡å¼ï¼<br>è¿˜æœ‰è¡Œé—´æ¨¡å¼ï¼š</p>
<script type="math/tex; mode=display">
y=x+1</script><p>ç»“æœæ˜¯æ¢è¡Œæ˜¾ç¤ºå…¬å¼</p>
<p>è¡Œå†…å…¬å¼ä¹Ÿå¯ä»¥ä½¿ç”¨ (â€¦) æˆ–è€… <code>\begin&#123;math&#125; ... \end&#123;math&#125;</code> æ¥æ’å…¥ã€‚<br>è¡Œé—´å…¬å¼ä¹Ÿå¯ä»¥ä½¿ç”¨ [ â€¦ ]  æˆ–è€… <code>\begin&#123;displaymath&#125; ... \end&#123;displaymath&#125;</code> æ¥æ’å…¥ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/05/30/SLAM%E5%B7%A5%E5%85%B7/Eigen(%E4%B8%80)%20%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%92%8C%E5%9F%BA%E7%A1%80/">Eigen(ä¸€) å®‰è£…é…ç½® å’Œ åŸºç¡€</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SLAM%E5%B7%A5%E5%85%B7/">SLAMå·¥å…·</a></span><div class="content"><p>Eigenæ˜¯ä¸€ä¸ªåŸºäºC++æ¨¡æ¿çš„çº¿æ€§ä»£æ•°åº“ï¼Œå®‰è£…ååªéœ€è¦åŒ…å«å¤´æ–‡ä»¶å³å¯ï¼Œå®ƒæ²¡æœ‰åº“æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸éœ€è¦é“¾æ¥ï¼Œä¸€èˆ¬æ˜¯<code>INCLUDE_DIRECTORIES(/usr/include/eigen3)</code></p>
<p>å®‰è£…ï¼š<code>sudo apt-get install libeigen3-dev</code>ï¼Œè¿™æ˜¯æœ€æ–°ç‰ˆæœ¬</p>
<p><strong>æŸ¥çœ‹Eigençš„ç‰ˆæœ¬</strong>ï¼šä¸èƒ½ç”¨å‘½ä»¤æŸ¥çœ‹ï¼Œç‰ˆæœ¬åœ¨Macros.hï¼Œåœ¨<code>/usr/local/include/eigen3/Eigen/src/Core/util</code>ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼š  <code>grep &#39;define EIGEN_....._VERSION\&gt;&#39; $(locate Macros.h | grep Core/util)</code>ï¼Œç»“æœæ˜¯ä¸‰ä¸ªç‰ˆæœ¬éƒ¨åˆ†çš„å®å®šä¹‰ã€‚ç›®å‰æˆ‘æ‰€ç”¨ä¸º<strong>3.2.92</strong></p>
<p><strong>å¸è½½Eigen</strong>ï¼šåˆ é™¤æ‰€æœ‰Eigençš„æ–‡ä»¶å³å¯<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudoÂ rmÂ -rfÂ /usr/include/eigen3Â /usr/lib/cmake/eigen3Â /usr/share/doc/libeigen3-devÂ /usr/share/pkgconfig/eigen3.pcÂ /var/lib/dpkg/info/libeigen3-dev.listÂ /var/lib/dpkg/info/libeigen3-dev.md5sums</span><br><span class="line">sudo updatedb</span><br><span class="line">locate eigen</span><br></pre></td></tr></table></figure><br>å¦‚æœlocateä¹‹åæ²¡æœ‰ç»“æœï¼Œé‚£å°±æ˜¯å¸è½½æˆåŠŸäº†</p>
<p>è¦å®‰è£…å…¶ä»–ç‰ˆæœ¬ï¼Œå°±éœ€è¦ä¸‹è½½å¯¹åº”å¾—debå®‰è£…ï¼Œæ¯”å¦‚<code>libeigen3-dev_3.2.0-8_all.deb</code>ï¼Œæˆ‘ä½¿ç”¨gdebiå®‰è£…æ—¶å¤±è´¥ï¼ŒæŠ¥è­¦<font color = orange size= 3> A later version is already installed </font>ï¼Œæœ€ç»ˆå‘ç°è¿˜æ˜¯è¦ç”¨dpkgå®‰è£…ï¼Œè¿™ä¸€ç‚¹ä»¥å‰æ²¡æœ‰å‘ç°ï¼Œå…¶ä»–è½¯ä»¶åŒ…åº”è¯¥ä¹Ÿä¼šæœ‰è¿™æ ·é—®é¢˜</p>
<h2 id="çŸ©é˜µEigen-MatrixåŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#çŸ©é˜µEigen-MatrixåŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="çŸ©é˜µEigen::MatrixåŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a>çŸ©é˜µEigen::MatrixåŸºæœ¬ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span>ã€€ã€€<span class="comment">// æ ¸å¿ƒæ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span>ã€€<span class="comment">// åŒ…å«äº†å¸¸ç”¨å‡½æ•°ï¼Œç¨ å¯†çŸ©é˜µçš„è¿ç®—</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Eigen&gt;</span>  ã€€<span class="comment">// ç¨€ç–éƒ¨åˆ†</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çŸ©é˜µåŸºæœ¬ä½¿ç”¨</span></span><br><span class="line">Eigen::Matrix&lt;<span class="keyword">float</span>, <span class="number">2</span>, <span class="number">3</span>&gt; m23;</span><br><span class="line">m23.<span class="built_in">setZero</span>(<span class="number">2</span>,<span class="number">3</span>);       <span class="comment">// çŸ©é˜µç½®ä¸º0ï¼Œå‚æ•°åˆ†åˆ«ä¸ºè¡Œæ•°å’Œåˆ—æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;After m23 initilized!&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout&lt;&lt;m23&lt;&lt;endl;    <span class="comment">// å¯ä»¥å°†çŸ©é˜µæ”¾å…¥æ ‡å‡†è¾“å‡ºæµï¼Œè¾“å‡ºç»“æœå°±æ˜¯çŸ©é˜µå½¢å¼ï¼Œæºç åº”å½“åšäº†ç©ºæ ¼å’Œæ¢è¡Œå¤„ç†</span></span><br><span class="line">m23&lt;&lt;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>;   ã€€<span class="comment">// çŸ©é˜µèµ‹å€¼çš„å¸¸ç”¨æ–¹å¼</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;After m23 set value!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">m23</span>(<span class="number">1</span>,<span class="number">2</span>) = <span class="number">54</span>;  ã€€ã€€<span class="comment">// å•ç‹¬ç»™æŸå…ƒç´ èµ‹å€¼</span></span><br><span class="line"><span class="comment">// è¾“å‡ºå…ƒç´ çš„å€¼</span></span><br><span class="line"> ã€€cout&lt;&lt;<span class="built_in">m23</span>(<span class="number">1</span>,<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Eigen::Matrix&lt;<span class="keyword">double</span>,<span class="number">2</span>,<span class="number">2</span>&gt; information;</span><br><span class="line">information.<span class="built_in">fill</span>(<span class="number">0.0</span>);   <span class="comment">// çŸ©é˜µå…ƒç´ å…¨èµ‹å€¼ä¸º 0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸ç”¨çš„ç±»å‹Matrix3Xdå’ŒMatrix3Xfå…¶å®æ˜¯åŠ¨æ€çŸ©é˜µï¼Œå®šä¹‰å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">// typedef Matrix&lt; double, 3, Dynamic &gt;    Eigen::Matrix3Xd</span></span><br><span class="line"><span class="comment">// typedef Matrix&lt; float, 3, Dynamic &gt;     Eigen::Matrix3Xf</span></span><br><span class="line"><span class="comment">// Eigen::Matrix3d ä¸‰é˜¶æ–¹é˜µ</span></span><br><span class="line"> </span><br><span class="line">Eigen::Matrix&lt;<span class="keyword">float</span>, <span class="number">2</span>, <span class="number">3</span>&gt; m;</span><br><span class="line">m.<span class="built_in">setRandom</span>(<span class="number">2</span>,<span class="number">3</span>);            <span class="comment">// çŸ©é˜µç”¨éšæœºå€¼åˆå§‹åŒ–ï¼Œä½†æ¯æ¬¡éšæœºå€¼ä¼¼ä¹éƒ½æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">m = m23;                <span class="comment">//  å°†å¦ä¸€çŸ©é˜µçš„å€¼èµ‹ç»™m</span></span><br><span class="line">m&lt;&lt;<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">-2</span>,<span class="number">10</span>;</span><br><span class="line">cout&lt;&lt;m23+m&lt;&lt;endl;      <span class="comment">// çŸ©é˜µåŠ æ³•</span></span><br><span class="line">cout&lt;&lt;m23 * m.<span class="built_in">transpose</span>()&lt;&lt;endl;    <span class="comment">// çŸ©é˜µä¹˜æ³•</span></span><br><span class="line"></span><br><span class="line">Eigen::Matrix3d m33</span><br><span class="line">m33&lt;&lt;<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>;</span><br><span class="line">cout&lt;&lt;m33&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">rows</span>()&lt;&lt;endl;                     <span class="comment">// è¡Œæ•°</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">cols</span>()&lt;&lt;endl;                      <span class="comment">// åˆ—æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Column major input:&quot;</span> &lt;&lt; endl &lt;&lt; m33 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="comment">// è·å–ç¬¬ä¸€åˆ—çš„å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The first column is:&quot;</span> &lt;&lt; endl &lt;&lt; m33.<span class="built_in">col</span>(<span class="number">0</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The last column is: &quot;</span> &lt;&lt; endl &lt;&lt; m33.<span class="built_in">rightCols</span>(<span class="number">1</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The first row is: &quot;</span> &lt;&lt; endl &lt;&lt; m33.topRows&lt;<span class="number">1</span>&gt;() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The last row is: &quot;</span> &lt;&lt; endl &lt;&lt; m33.bottomRows&lt;<span class="number">1</span>&gt;() &lt;&lt; endl;</span><br><span class="line"><span class="comment">// rowwiseå’Œcolwiseä¸¤ä¸ªå‡½æ•°å¾ˆå¥‡æ€ªï¼Œä¸è¦ä½¿ç”¨</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">transpose</span>()&lt;&lt;endl;        <span class="comment">// è½¬ç½®çŸ©é˜µ</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">sum</span>()&lt;&lt;endl;                  <span class="comment">// æ‰€æœ‰å…ƒç´ çš„å’Œ</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">trace</span>()&lt;&lt;endl;                <span class="comment">// çŸ©é˜µçš„è¿¹</span></span><br><span class="line">cout&lt;&lt;<span class="number">10</span>*m33&lt;&lt;endl;                         <span class="comment">//  çŸ©é˜µæ•°ä¹˜</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">isUnitary</span>()&lt;&lt;endl;      <span class="comment">// åˆ¤æ–­è¯¥çŸ©é˜µæ˜¯å¦æ˜¯é…‰çŸ©é˜µ(çŸ©é˜µå„åˆ—æ˜¯å¦ä¸ºæ ‡å‡†æ­£äº¤åŸº)</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">conjugate</span>()&lt;&lt;endl;     <span class="comment">//  å…±è½­çŸ©é˜µ</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">adjoint</span>()&lt;&lt;endl;           <span class="comment">//  ä¼´éšçŸ©é˜µ</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">inverse</span>()&lt;&lt;endl;          <span class="comment">//  é€†çŸ©é˜µï¼Œè‹¥ä¸å­˜åœ¨ä¼šæŠ¥é”™</span></span><br><span class="line">cout&lt;&lt;m33.<span class="built_in">determinant</span>()&lt;&lt;endl;   <span class="comment">// è¡Œåˆ—å¼ç»“æœï¼Œè‹¥ä¸å­˜åœ¨ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çŸ©é˜µä¹˜æ³•, m23æ¨¡æ¿ç±»å‹æ˜¯floatï¼Œéœ€è¦è½¬æ¢ï¼Œæ³¨æ„castä¸èƒ½è‡ªåŠ¨æç¤º</span></span><br><span class="line">Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">2</span>, <span class="number">1</span>&gt; m21 = m23.cast&lt;<span class="keyword">double</span>&gt;() * v3d;</span><br></pre></td></tr></table></figure>
<p>ç”±äºå…ƒç´ çº§è¿ç®—åœ¨çŸ©é˜µä¸­å¾ˆå¸¸è§ï¼Œæ‰€ä»¥Eigenå¯¹äºMatrixå…¶å®å†…ç½®äº†ä¸€äº›å‡½æ•°ï¼Œå‡ä»¥cwiseå¼€å¤´ã€‚mat.cwiseAbs()å…ƒç´ å–ç»å¯¹å€¼ã€mat.cwiseSqrt()é€å…ƒç´ å¼€æ ¹å·ã€mat.cwiseMin()å°†ä¸¤ä¸ªçŸ©é˜µä¸­ç›¸åº”ä½ç½®çš„æœ€å°å€¼ç»„æˆä¸€ä¸ªæ–°çŸ©é˜µ</p>
<p>Eigenæä¾›äº†ä¸€äº›åŸºç¡€çš„ç®—æ³•ï¼Œå¦‚sum()ï¼Œæ±‚æ‰€æœ‰å…ƒç´ å’Œï¼›prod()ï¼Œæ±‚æ‰€æœ‰å…ƒç´ ä¹‹ç§¯ï¼›mean()ï¼Œæ±‚å…ƒç´ å¹³å‡å€¼ï¼›minCoeff()ï¼Œæœ€å°å…ƒç´ ï¼›maxCoeff()ï¼Œæœ€å¤§å…ƒç´ ï¼›trace()ï¼Œæ±‚è¿¹</p>
<h2 id="Eigen-Isometry3d"><a href="#Eigen-Isometry3d" class="headerlink" title="Eigen::Isometry3d"></a>Eigen::Isometry3d</h2><p><code>Eigen::Isometry3d</code>ç›¸å½“äºä¸€ä¸ªå››ç»´çŸ©é˜µ<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Eigen::AngleAxisd  <span class="title">v</span><span class="params">(M_PI / <span class="number">3</span>, Eigen::Vector3d(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>).normalized() )</span></span>;</span><br><span class="line"><span class="function">Eigen::Quaterniond <span class="title">q</span><span class="params">(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="function">Eigen::Vector3d <span class="title">translate</span><span class="params">(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µ</span></span><br><span class="line">Eigen::Isometry3d T = Eigen::Isometry3d::<span class="built_in">Identity</span>();</span><br><span class="line">T.<span class="built_in">translate</span>(translate);</span><br><span class="line"><span class="comment">// T.rotate(q.matrix() )  æˆ–è€… T.rotate(v)</span></span><br><span class="line">T.<span class="built_in">rotate</span>(q);</span><br><span class="line">cout &lt;&lt; endl &lt;&lt; T.<span class="built_in">matrix</span>() &lt;&lt; endl;</span><br></pre></td></tr></table></figure><br><code>rotate</code>å‡½æ•°æ¯”è¾ƒå¼ºå¤§ï¼Œå¯æ¥å—çš„å‚æ•°æœ‰å››å…ƒæ•°ã€æ—‹è½¬çŸ©é˜µã€æ—‹è½¬å‘é‡</p>
<p>å¿…é¡»è¦è°ƒç”¨ <code>Isometry3d::Identity()</code>å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œåé¢çš„<code>translate()</code>å’Œ<code>rotate()</code>å‡½æ•°æ‰æœ‰ç”¨ã€‚</p>
<h2 id="ç¨€ç–çŸ©é˜µ"><a href="#ç¨€ç–çŸ©é˜µ" class="headerlink" title="ç¨€ç–çŸ©é˜µ"></a>ç¨€ç–çŸ©é˜µ</h2><p>ä½¿ç”¨æ–¹å¼å’Œæ™®é€šçŸ©é˜µä¸åŒ<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Eigen::SparseMatrix&lt;<span class="keyword">double</span>&gt; <span class="title">hessian</span><span class="params">(<span class="number">2</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="comment">// æ³¨æ„ç¨€ç–çŸ©é˜µçš„åˆå§‹åŒ–æ–¹å¼,æ— æ³•ä½¿ç”¨&lt;&lt;åˆå§‹åŒ–</span></span><br><span class="line">hessian.<span class="built_in">insert</span>(<span class="number">0</span>, <span class="number">0</span>) = <span class="number">2.0</span>; </span><br><span class="line">hessian.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="number">1</span>) = <span class="number">2.0</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="ä»å­çŸ©é˜µå’Œå‘é‡æ‹¼æ¥æˆæ–°çŸ©é˜µ"><a href="#ä»å­çŸ©é˜µå’Œå‘é‡æ‹¼æ¥æˆæ–°çŸ©é˜µ" class="headerlink" title="ä»å­çŸ©é˜µå’Œå‘é‡æ‹¼æ¥æˆæ–°çŸ©é˜µ"></a>ä»å­çŸ©é˜µå’Œå‘é‡æ‹¼æ¥æˆæ–°çŸ©é˜µ</h2><p>æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ª3X3çš„çŸ©é˜µï¼Œä¸€ä¸ªè¡Œå‘é‡å’Œä¸€ä¸ªåˆ—å‘é‡ï¼ŒäºŒè€…çš„æœ€åä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè¦æ‹¼æ¥æˆ4X4çš„çŸ©é˜µ</p>
<p><code>mat = mat1.block(i, j, p, q);</code>   //  ä»çŸ©é˜µ mat1 çš„ i è¡Œ j åˆ—å¼€å§‹è·å–ä¸€ä¸ª p è¡Œ q åˆ—çš„å­çŸ©é˜µ<br><code>mat = mat1.block&lt;p, q&gt;(i, j);</code>   //  ä»çŸ©é˜µ mat1 çš„ i è¡Œ j åˆ—å¼€å§‹è·å–ä¸€ä¸ª p è¡Œ q åˆ—çš„å­çŸ©é˜µï¼ˆåŠ¨æ€çŸ©é˜µï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Eigen::Matrix4d m;</span><br><span class="line">Eigen::Matrix3d rotation;</span><br><span class="line"><span class="comment">// ç»™ rotationèµ‹å€¼</span></span><br><span class="line">m.<span class="built_in">block</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">3</span>) = rotation;</span><br><span class="line"></span><br><span class="line">Eigen::Vector4d Vcol, Vrow;</span><br><span class="line"><span class="comment">// ç»™ Vcolå’ŒVrow èµ‹å€¼</span></span><br><span class="line">m.<span class="built_in">col</span>(<span class="number">3</span>) = Vcol;</span><br><span class="line">m.<span class="built_in">row</span>(<span class="number">3</span>) = Vrow.<span class="built_in">transpose</span>();</span><br></pre></td></tr></table></figure>
<h2 id="å‘é‡Eigen-Vector"><a href="#å‘é‡Eigen-Vector" class="headerlink" title="å‘é‡Eigen::Vector"></a>å‘é‡Eigen::Vector</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸¸ç”¨è¿™ç§æ–¹å¼ï¼ŒXd ä»£è¡¨doubleå‹çš„ä»»æ„è¡Œæ•°å‘é‡ï¼Œä½†åé¢çš„å‚æ•°å¿…é¡»æŒ‡å®šè¡Œæ•°</span></span><br><span class="line"><span class="function">Eigen::VectorXd <span class="title">v</span><span class="params">(<span class="number">3</span>)</span></span>;  </span><br><span class="line">v&lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>;          <span class="comment">// å¿…é¡»ä¸å¤šä¸å°‘ä¼ å…¥æ‰€æœ‰çš„å…ƒç´ å€¼ï¼Œå¦åˆ™æŠ¥é”™</span></span><br><span class="line"><span class="built_in">v</span>(<span class="number">2</span>) = <span class="number">9</span>;          <span class="comment">// ç»™ç¬¬ä¸‰ä¸ªå…ƒç´ èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">Eigen::VectorXd <span class="title">vv</span><span class="params">(<span class="number">12</span>)</span></span>; </span><br><span class="line">vv&lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>;</span><br><span class="line"><span class="comment">// å‰ä¸‰è¡Œ</span></span><br><span class="line">cout&lt;&lt; vv.<span class="built_in">block</span>(<span class="number">0</span>,<span class="number">0</span>, <span class="number">3</span>,<span class="number">1</span>).<span class="built_in">transpose</span>() &lt;&lt;endl&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt; vv.<span class="built_in">block</span>(<span class="number">3</span>,<span class="number">0</span>, <span class="number">3</span>,<span class="number">1</span>) &lt;&lt;endl&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt; vv.<span class="built_in">block</span>(<span class="number">6</span>,<span class="number">0</span>, <span class="number">3</span>,<span class="number">1</span>) &lt;&lt;endl&lt;&lt;endl;</span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šäº†3è¡Œï¼Œå¿…é¡»ä¼ å…¥3ä¸ªå€¼ï¼Œå¦åˆ™è¿è¡ŒæŠ¥é”™ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>Vector3f::UnitX()</code>,  <code>Vector3f::UnitY</code> å’Œ <code>Vector3f::UnitZ()</code>è¿™ä¸‰ä¸ªå‡½æ•°è¡¨ç¤ºä¸‰ä¸ªæ–¹å‘çš„<strong>åˆ—å‘é‡</strong>ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">X   Y   Z</span><br><span class="line"></span><br><span class="line">1   0   0</span><br><span class="line">0   1   0</span><br><span class="line">0   0   1</span><br></pre></td></tr></table></figure><br>å…¶å®å‘é‡åªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„çŸ©é˜µï¼Œä½†æ˜¯Eigenä¹Ÿä¸ºå®ƒå•ç‹¬æä¾›äº†ä¸€äº›ç®€åŒ–çš„å—æ“ä½œï¼Œå¦‚ä¸‹ä¸‰ç§å½¢å¼ï¼š</p>
<h3 id="head-tail-segment"><a href="#head-tail-segment" class="headerlink" title="head  tail  segment"></a>head  tail  segment</h3><ul>
<li><p>è·å–å‘é‡çš„å‰nä¸ªå…ƒç´ ï¼švector.head(n);</p>
</li>
<li><p>è·å–å‘é‡å°¾éƒ¨çš„nä¸ªå…ƒç´ ï¼švector.tail(n);</p>
</li>
<li><p>è·å–ä»å‘é‡çš„ç¬¬iä¸ªå…ƒç´ å¼€å§‹çš„nä¸ªå…ƒç´ ï¼švector.segment(i,n);</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Eigen::Vector4d <span class="title">v</span><span class="params">(<span class="number">4</span>)</span></span>; </span><br><span class="line">v&lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;head: &quot;</span>&lt;&lt;v.<span class="built_in">head</span>(<span class="number">1</span>) &lt;&lt;endl; <span class="comment">// 1</span></span><br><span class="line">cout &lt;&lt; v.<span class="built_in">segment</span>(<span class="number">1</span>,<span class="number">2</span>) &lt;&lt;endl;  <span class="comment">// 2 3</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;tail: &quot;</span>&lt;&lt;v.<span class="built_in">tail</span>(<span class="number">1</span>) &lt;&lt;endl;  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<h3 id="Vector-è½¬-Matrix"><a href="#Vector-è½¬-Matrix" class="headerlink" title="Vector è½¬ Matrix"></a>Vector è½¬ Matrix</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Eigen::Vector3d v;</span><br><span class="line">v &lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>;</span><br><span class="line"><span class="comment">// è¿™ä¸ªè½¬æ¢ååˆ†ç½•è§</span></span><br><span class="line">Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">3</span>, <span class="number">1</span>&gt; m = v.<span class="keyword">template</span> cast&lt;<span class="keyword">double</span>&gt;();</span><br></pre></td></tr></table></figure>
<h3 id="ä»Eigen-Vectoræ„å»ºå¯¹è§’çŸ©é˜µï¼Œå…¶ä¸­Vectorçš„å…ƒç´ å æ®çŸ©é˜µçš„ä¸»å¯¹è§’çº¿"><a href="#ä»Eigen-Vectoræ„å»ºå¯¹è§’çŸ©é˜µï¼Œå…¶ä¸­Vectorçš„å…ƒç´ å æ®çŸ©é˜µçš„ä¸»å¯¹è§’çº¿" class="headerlink" title="ä»Eigen::Vectoræ„å»ºå¯¹è§’çŸ©é˜µï¼Œå…¶ä¸­Vectorçš„å…ƒç´ å æ®çŸ©é˜µçš„ä¸»å¯¹è§’çº¿"></a>ä»Eigen::Vectoræ„å»ºå¯¹è§’çŸ©é˜µï¼Œå…¶ä¸­Vectorçš„å…ƒç´ å æ®çŸ©é˜µçš„ä¸»å¯¹è§’çº¿</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Eigen::Vector3d <span class="title">v</span><span class="params">(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span></span>;</span><br><span class="line">Eigen::Matrix3d m = v.<span class="built_in">asDiagonal</span>();</span><br></pre></td></tr></table></figure>
<h3 id="ä»å¤šä¸ªEigen-Vectoræ‹¼æ¥æˆEigen-Matrix"><a href="#ä»å¤šä¸ªEigen-Vectoræ‹¼æ¥æˆEigen-Matrix" class="headerlink" title="ä»å¤šä¸ªEigen::Vectoræ‹¼æ¥æˆEigen::Matrix"></a>ä»å¤šä¸ªEigen::Vectoræ‹¼æ¥æˆEigen::Matrix</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Eigen::Vector3d <span class="title">v</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">v&lt;&lt; <span class="number">2.1</span>, <span class="number">4.9</span>, <span class="number">0.4</span>;</span><br><span class="line">std::vector&lt;Eigen::Vector3d&gt; vv;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">    vv.<span class="built_in">push_back</span>( v );</span><br><span class="line"><span class="comment">// æ‹¼æ¥æˆ3X4çš„çŸ©é˜µ</span></span><br><span class="line"><span class="function">Eigen::Map&lt;Eigen::Matrix3Xd&gt; <span class="title">matrix</span><span class="params">(&amp;vv[<span class="number">0</span>].x(), <span class="number">3</span>, <span class="number">4</span>)</span></span>;  <span class="comment">//é¦–å…ƒç´ åœ°å€ï¼Œè¡Œï¼Œåˆ—</span></span><br><span class="line">cout &lt;&lt; matrix &lt;&lt;endl;</span><br></pre></td></tr></table></figure>
<p>Mapç±»ç”¨äºé€šè¿‡C++ä¸­æ™®é€šçš„è¿ç»­æŒ‡é’ˆæˆ–è€…æ•°ç»„ ï¼ˆæŒ‡é’ˆåœ°å€è¿ç»­ï¼‰æ¥æ„é€ Eigené‡Œçš„Matrixç±»ï¼Œè¿™å°±å¥½æ¯”Eigené‡Œçš„Matrixç±»çš„æ•°æ®å’Œraw C++array å…±äº«äº†ä¸€ç‰‡åœ°å€ï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨ã€‚</p>
<p>æœ‰ä¸ªåºå¤§çš„Matrixç±»ï¼Œåœ¨ä¸€ä¸ªå¤§å¾ªç¯ä¸­è¦ä¸æ–­è¯»å–Matrixä¸­çš„ä¸€æ®µè¿ç»­æ•°æ®ï¼Œå¦‚æœæ¯æ¬¡éƒ½ç”¨block operation å»å¼•ç”¨æ•°æ®ä¼šå¤ªç¹çã€‚äºæ˜¯å°±äº‹å…ˆå°†è¿™äº›æ•°æ®æ„é€ æˆè‹¥å¹²Mapï¼Œé‚£ä¹ˆä»¥åå¾ªç¯ä¸­ç›´æ¥æ“ä½œMapå°±è¡Œäº†ã€‚</p>
<h3 id="Eigen-Map"><a href="#Eigen-Map" class="headerlink" title="Eigen::Map"></a>Eigen::Map</h3><p>Mapç±»ç”¨äºé€šè¿‡C++ä¸­æ™®é€šçš„è¿ç»­æŒ‡é’ˆæˆ–è€…æ•°ç»„æ¥æ„é€ Eigené‡Œçš„Matrixç±»ï¼Œè¿™å°±å¥½æ¯”Eigené‡Œçš„Matrixç±»çš„æ•°æ®å’Œraw C++array å…±äº«äº†ä¸€ç‰‡åœ°å€ï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨ã€‚  æ¯”å¦‚æœ‰ä¸ªAPIåªæ¥å—æ™®é€šçš„C++æ•°ç»„ï¼Œä½†åˆè¦å¯¹æ™®é€šæ•°ç»„è¿›è¡Œçº¿æ€§ä»£æ•°æ“ä½œï¼Œé‚£ä¹ˆç”¨å®ƒæ„é€ ä¸ºMapç±»ã€‚ å®é™…ä¸ŠMapç±»å¹¶æ²¡æœ‰è‡ªå·±ç”³è¯·ä¸€ç‰‡ç©ºå†…å­˜ï¼Œåªæ˜¯ä¸€ä¸ªå¼•ç”¨<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> DynamicArray = Eigen::Array&lt;<span class="keyword">int</span>, Eigen::Dynamic, Eigen::Dynamic&gt;;</span><br><span class="line"></span><br><span class="line">std::vector&lt;<span class="keyword">int</span>&gt; cells&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span>&amp; v: cells)</span><br><span class="line">    cout &lt;&lt; v &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">cout &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line"><span class="comment">// ç»´åº¦ä¸è¦è¶…è¿‡ 3x3ï¼Œå¦åˆ™å‡ºç°invalidæ•°æ®</span></span><br><span class="line"><span class="function">Eigen::Map&lt;<span class="keyword">const</span> DynamicArray&gt; <span class="title">full_correspondence_costs</span><span class="params">(cells.data(), <span class="number">3</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; full_correspondence_costs &lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> data[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="function">Eigen::Map&lt;Eigen::RowVectorXi&gt; <span class="title">m</span><span class="params">(data, <span class="number">4</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;The mapped vector v is: &quot;</span> &lt;&lt; m &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 4 7</span><br><span class="line">2 5 8</span><br><span class="line">3 6 9</span><br><span class="line">The mapped vector v is: 1 2 3 4</span><br></pre></td></tr></table></figure></p>
<p>å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/wzaltzap/article/details/79501856">EigençŸ©é˜µåº“ä½¿ç”¨è¯´æ˜</a></p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/54/">&lt;&lt; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/54/">54</a><span class="page-number current">55</span><a class="page-number" href="/page/56/">56</a><span class="space">&hellip;</span><a class="page-number" href="/page/65/">65</a><a class="extend next" rel="next" href="/page/56/">Next &gt;&gt;</a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://s2.loli.net/2022/11/17/QOR8cePIS5NdDrK.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2023 By Charon Cheung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>