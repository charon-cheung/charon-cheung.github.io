<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="landmark的前端处理"><meta name="keywords" content=""><meta name="author" content="Charon Cheung"><meta name="copyright" content="Charon Cheung"><title>landmark的前端处理 | 沉默杀手</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">前端的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#node-cc-%E5%B1%82"><span class="toc-number">1.1.</span> <span class="toc-text">node.cc 层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sensor-bridge-cc-%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">sensor_bridge.cc 层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%9E%8D%E5%90%88%E9%98%B6%E6%AE%B5"><span class="toc-number">2.</span> <span class="toc-text">数据融合阶段</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s2.loli.net/2022/02/17/HQaCXUBn64zsMIL.png"></div><div class="author-info__name text-center">Charon Cheung</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">620</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">5</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">55</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.loli.net/2022/11/17/QOR8cePIS5NdDrK.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">沉默杀手</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">landmark的前端处理</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-12-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%BF%80%E5%85%89SLAM/">激光SLAM</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/">Cartographer</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/">源码解读</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2022/12/22/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/landmark%E7%9A%84%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2022/12/22/激光SLAM/Cartographer/源码解读/landmark的前端处理/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">649</span><span class="post-meta__separator">|</span><span>Reading time: 3 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>In order to make Cartographer calculations deterministic we strictly time order sensor data using the collator. But you only know in what order to publish data when you have already seen data from all other sources. Sparse sources pose a problem to that strategy.</p>
<p>You should publish empty landmark messages when you have nothing observed to unblock the queue. BTW this is also done for fixed frame poses (e.g. GPS): if there is no fix, you publish an empty fixed frame pose message.</p>
<h2 id="前端的处理"><a href="#前端的处理" class="headerlink" title="前端的处理"></a>前端的处理</h2><h3 id="node-cc-层"><a href="#node-cc-层" class="headerlink" title="node.cc 层"></a><code>node.cc</code> 层</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// landmark_poses_list 话题</span></span><br><span class="line">  landmark_poses_list_publisher_ =</span><br><span class="line">      node_handle_.advertise&lt;::visualization_msgs::MarkerArray&gt;(</span><br><span class="line">          kLandmarkPosesListTopic, kLatestOnlyPublisherQueueSize);</span><br></pre></td></tr></table></figure>
<p>发布话题：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Node::PublishLandmarkPosesList</span><span class="params">(<span class="keyword">const</span> ::ros::WallTimerEvent&amp; unused_timer_event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (landmark_poses_list_publisher_.<span class="built_in">getNumSubscribers</span>() &gt; <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="function">absl::MutexLock <span class="title">lock</span><span class="params">(&amp;mutex_)</span></span>;</span><br><span class="line">      landmark_poses_list_publisher_.<span class="built_in">publish</span>(map_builder_bridge_.<span class="built_in">GetLandmarkPosesList</span>() );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>处理传感器数据<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Node::HandleLandmarkMessage</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">int</span> trajectory_id, <span class="keyword">const</span> std::string&amp; sensor_id,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> cartographer_ros_msgs::LandmarkList::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">absl::MutexLock <span class="title">lock</span><span class="params">(&amp;mutex_)</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (!sensor_samplers_.<span class="built_in">at</span>(trajectory_id).landmark_sampler.<span class="built_in">Pulse</span>()) </span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  <span class="built_in">CHECK</span>(msg-&gt;landmarks.<span class="built_in">size</span>() != <span class="number">0</span>) &lt;&lt; <span class="string">&quot;No Landmarks !&quot;</span>;</span><br><span class="line"></span><br><span class="line">  map_builder_bridge_.<span class="built_in">sensor_bridge</span>(trajectory_id)-&gt;<span class="built_in">HandleLandmarkMessage</span>(sensor_id, msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="sensor-bridge-cc-层"><a href="#sensor-bridge-cc-层" class="headerlink" title="sensor_bridge.cc 层"></a><code>sensor_bridge.cc</code> 层</h3><p>用到的类型<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LandmarkData</span> &#123;</span></span><br><span class="line">  common::Time time;</span><br><span class="line">  std::vector&lt;LandmarkObservation&gt; landmark_observations;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LandmarkObservation</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  std::string id;</span><br><span class="line">  transform::Rigid3d landmark_to_tracking_transform;</span><br><span class="line">  <span class="keyword">double</span> translation_weight;</span><br><span class="line">  <span class="keyword">double</span> rotation_weight;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>landmark的观测是相对于 tracking frame<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SensorBridge::HandleLandmarkMessage</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> std::string&amp; sensor_id,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> cartographer_ros_msgs::LandmarkList::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> landmark_data = <span class="built_in">ToLandmarkData</span>(*msg);</span><br><span class="line">  <span class="keyword">auto</span> tracking_from_landmark_sensor = tf_bridge_.<span class="built_in">LookupToTracking</span>(</span><br><span class="line">      landmark_data.time, <span class="built_in">CheckNoLeadingSlash</span>(msg-&gt;header.frame_id));</span><br><span class="line">  <span class="comment">// 把相机对landmark的观测，转换到 tracking 坐标系</span></span><br><span class="line">  <span class="keyword">if</span> (tracking_from_landmark_sensor != <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; observation : landmark_data.landmark_observations)</span><br><span class="line">      &#123;</span><br><span class="line">        observation.landmark_to_tracking_transform =</span><br><span class="line">            *tracking_from_landmark_sensor *</span><br><span class="line">            observation.landmark_to_tracking_transform;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 进入传感器数据融合阶段</span></span><br><span class="line">  trajectory_builder_-&gt;<span class="built_in">AddSensorData</span>(sensor_id, landmark_data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>简单的类型转换而已<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LandmarkData <span class="title">ToLandmarkData</span><span class="params">(<span class="keyword">const</span> LandmarkList&amp; landmark_list)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LandmarkData landmark_data;</span><br><span class="line">    landmark_data.time = <span class="built_in">FromRos</span>(landmark_list.header.stamp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> LandmarkEntry&amp; entry : landmark_list.landmark)</span><br><span class="line">    &#123;</span><br><span class="line">        landmark_data.landmark_observations.<span class="built_in">push_back</span>(</span><br><span class="line">        &#123;entry.id, <span class="built_in">ToRigid3d</span>(entry.tracking_from_landmark_transform),</span><br><span class="line">         entry.translation_weight, <span class="number">10</span>, entry.type&#125;);</span><br><span class="line">         <span class="comment">//LOG(INFO) &lt;&lt; &quot;find landmark x: &quot; &lt;&lt; entry.tracking_from_landmark_transform.position.x;</span></span><br><span class="line">         <span class="comment">//LOG(INFO) &lt;&lt; &quot;find landmark y: &quot; &lt;&lt; entry.tracking_from_landmark_transform.position.y;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> landmark_data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="数据融合阶段"><a href="#数据融合阶段" class="headerlink" title="数据融合阶段"></a>数据融合阶段</h2><p><code>CollatedTrajectoryBuilder</code>类<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddSensorData</span><span class="params">(<span class="keyword">const</span> std::string&amp; sensor_id,</span></span></span><br><span class="line"><span class="params"><span class="function">                   <span class="keyword">const</span> sensor::LandmarkData&amp; landmark_data)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (collate_landmarks_)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">AddData</span>(sensor::<span class="built_in">MakeDispatchable</span>(sensor_id, landmark_data));</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// wrapped_trajectory_builder_ 赋值在 CollatedTrajectoryBuilder 构造函数</span></span><br><span class="line">    <span class="comment">// 应当为map_builder_-&gt;GetTrajectoryBuilder(trajectory_id)</span></span><br><span class="line">    wrapped_trajectory_builder_-&gt;<span class="built_in">AddSensorData</span>(sensor_id, landmark_data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>collate_landmarks</code>的设置问题</li>
</ul>
<p>在<code>CollatedTrajectoryBuilder</code>的构造函数里体现，比较坑的是设置为<code>on</code>或<code>off</code>，不是true, false<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (sensor_id.type == SensorId::SensorType::LANDMARK &amp;&amp;</span><br><span class="line">    !collate_landmarks_)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>如果提供landmark的观测不低于10 Hz，那么可以设置<code>TRAJECTORY_BUILDER.collate_landmarks = on</code>. Cartographer将deterministically运行(对于给定的bag, 使用offline node每次获得的结果是一样的). 如果<code>collate_landmarks = off</code>， landmark observations将跳过<code>sensor queue</code> (so they do not block it if they are sparse) and are injected directly into the pose graph, which is not deterministic. </p>
<p>但是看到另一种说法，在 <code>#1224</code>更新版本，作者提出如果有landmark，<code>collate_landmarks</code>就要为 false。这个再观察</p>
<p>接下来进入<code>GlobalTrajectoryBuilder</code><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddSensorData</span><span class="params">(<span class="keyword">const</span> std::string&amp; sensor_id,</span></span></span><br><span class="line"><span class="params"><span class="function">                   <span class="keyword">const</span> sensor::LandmarkData&amp; landmark_data)</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   pose_graph_-&gt;<span class="built_in">AddLandmarkData</span>(trajectory_id_, landmark_data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>这里可以看到landmark数据直接进后端，前端没有它的事了</p>
</div></article><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/12/22/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/landmark%E7%9A%84%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86/"><i class="fa fa-chevron-left">  </i><span>landmark的后端处理</span></a></div><div class="next-post pull-right"><a href="/2022/12/14/%E6%BF%80%E5%85%89SLAM/%E6%97%B7%E8%A7%86%E7%9A%84CamLaserCalibraTool/"><span>旷视的CamLaserCalibraTool</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://charon-cheung.github.io/2022/12/22/%E6%BF%80%E5%85%89SLAM/Cartographer/%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/landmark%E7%9A%84%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86/';
  this.page.identifier = '2022/12/22/激光SLAM/Cartographer/源码解读/landmark的前端处理/';
  this.page.title = 'landmark的前端处理';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '沉默杀手' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://沉默杀手.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://s2.loli.net/2022/11/17/QOR8cePIS5NdDrK.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2023 By Charon Cheung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>